import{u as Wa,c as j,a as La,b as za,o as et,m as Ge,D as Ba,r as Q,d as Ie,e as N,f as z,g as Xe,h as me,i as Et,j as qe,k as At,l as $a,n as xn,p as Ki,w as Va,s as En,q as Pn,t as In,v as Fn,x as Ua,y as Ut,z as G,A as Ka,B as qa,C as pt,E as ja,F as J,G as De,H as $e,I as ki,J as be,K as T,L as Pt,M as ze,N as An,O as gi,P as Kt,Q as qt,T as Rn,R as Nn,S as Ha,U as Re,V as Ja,W as Ga,X as je,Y as Mn,Z as yt,_ as Wn,$ as dt,a0 as Xa,a1 as Ya,a2 as ht,a3 as vi,a4 as qi,a5 as L,a6 as Qa,a7 as bi,a8 as yi,a9 as Qt,aa as Za,ab as el,ac as Rt,ad as Si,ae as Ye,af as Di,ag as tl,ah as ut,ai as Oi,aj as ji,ak as It,al as Nt,am as jt,an as il,ao as nl}from"./index-twoRmxeE.js";const al=function(e,a){let n;e?typeof e=="string"?n=new Date(Date.parse(e)):n=new Date(e):n=new Date;const i=n.getFullYear()+"-",s=(n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1)+"-",t=n.getDate()<10?"0"+n.getDate():n.getDate(),o=(n.getHours()<10?"0"+n.getHours():n.getHours())+":",l=(n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes())+":",r=n.getSeconds()<10?"0"+n.getSeconds():n.getSeconds();return a==="ymd hms"?i+s+t+" "+o+l+r:a==="ymd"?i+s+t:o+l+r};function Ht(e){const a=document.createElement("textarea");a.value=e,document.body.appendChild(a),a.select(),document.execCommand("Copy"),document.body.removeChild(a)}function ve(){const e=Wa(),a=j(()=>e.workspaceWidgetType),n=j(()=>e.version),i=j(()=>e.compositeArrowDirection),s=j(()=>e.settingArrowDirection);return{version:n,workspaceWidgetType:a,compositeArrowDirection:i,settingArrowDirection:s,updateVersion:e.updateVersion,updateWorkspaceComponentType:e.updateWorkspaceComponentType,updateCompositeArrowDirection:e.updateCompositeArrowDirection,updateSettingArrowDirection:e.updateSettingArrowDirection}}function ae(){const e=La(),a=j(()=>e.widgets),n=j(()=>e.activeWidget),i=j(()=>e.viewType),s=j(()=>e.boardHeight),t=j(()=>e.boardWidth),o=j(()=>e.originBoardHeight),l=j(()=>e.originBoardWidth),r=j(()=>e.simulatorType);return{widgets:a,activeWidget:n,viewType:i,boardHeight:s,boardWidth:t,originBoardHeight:o,originBoardWidth:l,simulatorType:r,addHistory:e.addHistory,pushWidget:e.pushWidget,updateWidget:e.updateWidget,deleteWidget:e.deleteWidget,copyWidget:e.copyWidget,updateWidgets:e.updateWidgets,clearWorkspaceComponentList:e.clearWorkspaceComponentList,updateActiveWidget:e.updateActiveWidget,updateViewType:e.updateViewType,updateBoardWH:e.updateBoardWH,updateOriginBoardWH:e.updateOriginBoardWH,updateSimulatorType:e.updateSimulatorType}}const Ue=()=>{const e=za(),a=j(()=>e.getFormData),n=j(()=>e.getFormConfig);return{formData:a,formConfig:n,setFormConfig:e.setFormConfig}};function Mt(e,a,n){const{compositeArrowDirection:i,settingArrowDirection:s,updateCompositeArrowDirection:t,updateSettingArrowDirection:o}=ve();let l;const r=u=>{let f;e==="right"?f=document.getElementById("settings-panel"):f=document.getElementsByClassName("composite-panel-tabs-content")[0];const d=f.style.width;(!d||d==="0px")&&d!==""||u?f.style.width=a:f.style.width="0",e==="right"?o(s.value==="right"?"left":"right"):t(i.value==="right"?"left":"right"),l=setTimeout(()=>Ge.emit("selection-change"),n)};return et(()=>{clearTimeout(l)}),{compositeArrowDirection:i,settingArrowDirection:s,clickAsideToggleWidget:r}}const ll=[{element:".composite-panel-tabs",popover:{title:"最左侧菜单",description:"组件、目录结构、操作记录",position:"right"}},{element:".drawer",popover:{title:"组件物料",description:"基础组件、高阶组件物料，拖拽配置表单和表格",position:"right"}},{element:".board",popover:{title:"画板",description:"通过拖拽、选中、新增、复制、删除等操作组件",position:"right"}},{element:".design-tools",popover:{title:"工具栏",description:"切换画板大小、切换画板代码预览、复制产出代码、清空画板",position:"bottom-right"}},{element:".settings-panel",popover:{title:"组件属性配置",description:"配置表单和组件属性",position:"left"}}];function ol(){let e=null;e=new Ba({allowClose:!1,closeBtnText:"关闭",nextBtnText:"下一步",prevBtnText:"上一步"});const a=()=>{try{const s=JSON.parse(localStorage.getItem("isNew")||"1");return Number(s)}catch{}},n=()=>{localStorage.setItem("isNew","0")};return{startDriver:()=>{a()&&(e==null||e.defineSteps(ll),e==null||e.start(),n())},getIsNew:a}}function sl(e){const a=Q(!0),n=i=>{a.value=i};return Ie(()=>{const i=document.getElementById(e);i==null||i.addEventListener("mouseenter",()=>n(!1)),i==null||i.addEventListener("mouseleave",()=>n(!0))}),et(()=>{const i=document.getElementById("selector-btn");i==null||i.removeEventListener("mouseenter",()=>n(!1)),i==null||i.removeEventListener("mouseleave",()=>n(!0))}),{isOutside:a,changeBtnStatus:n}}const rl=[{component:"option-item-widget",field:"options",label:"数据源",formItemProps:{class:"form-item-options__container"}},{component:"input",field:"alias.value",label:"value字段名",tooltip:"value自定义字段名"},{component:"input",field:"alias.label",label:"label字段名",tooltip:"label自定义字段名"},{component:"input",field:"alias.disabled",label:"禁用字段名",tooltip:"disabled自定义字段名"},{component:"el-input-number",field:"min",label:"勾选的最小数量",fieldProps:{controlsPosition:"right"}},{component:"el-input-number",field:"max",label:"勾选的最大数量",fieldProps:{controlsPosition:"right"}},{component:"input",field:"textColor",label:"激活文本颜色"},{component:"input",field:"fill",label:"激活填充色和边框色"},{component:"el-switch",field:"disabled",label:"禁用"}],ul={size:[{label:"large",value:"large"},{label:"default",value:"default"},{label:"small",value:"small"}]},Ln={checkbox:[],options:[{label:"标签1",value:"1",key:N()},{label:"标签2",value:"2",key:N()}],textColor:"#ffffff",fill:"#409Eff",disabled:!1,min:void 0,max:void 0,alias:{value:"value",label:"label",disabled:"disabled"}},cl=[{component:"el-switch",field:"request",label:"内置接口处理",tooltip:"表格数据等接口组件内部处理，否则需要手动处理调用"},{component:"el-switch",field:"action",label:"内置操作",tooltip:"增删改查操作内置处理，结合request使用风味更佳。否则建议手动配置操作列，自定义增删改查操作"},{component:"select",field:"background",label:"场景",tooltip:"代码生成会按照不同的场景生成适配的代码",fieldProps:{clearable:!1}},{component:"select",field:"size",label:"尺寸",fieldProps:{clearable:!1}},{component:"input",field:"rowKey",label:"rowKey"},{component:"input",field:"formDecorator",label:"表单容器"},{component:"input",field:"tableDecorator",label:"表格容器"},{component:"el-switch",field:"pagination",label:"分页"}],fl=[{component:"input",field:"labelWidth",label:"标签宽度"},{component:"el-switch",field:"collapsed",label:"表单默认展开"}],pl={background:[{label:"页面",value:"page"},{label:"弹窗",value:"dialog"}],size:[{label:"large",value:"large"},{label:"default",value:"default"},{label:"small",value:"small"}]},dl=[{component:"input",field:"placeholder",label:"占位内容"},{component:"input",field:"valueFormat",label:"日期格式"},{component:"el-switch",field:"disabled",label:"禁用"},{component:"el-switch",field:"clearable",label:"清空"}],hl={},_l={type:"date",clearable:!0,disabled:!1,placeholder:"",valueFormat:"YYYY-MM-DD"},ml=[{component:"input",field:"startPlaceholder",label:"占位内容",tooltip:"开始日期占位内容"},{component:"input",field:"endPlaceholder",label:"占位内容",tooltip:"结束日期占位内容"},{component:"input",field:"valueFormat",label:"日期格式"},{component:"el-switch",field:"disabled",label:"禁用"},{component:"el-switch",field:"clearable",label:"清空"}],gl={size:[{label:"large",value:"large"},{label:"default",value:"default"},{label:"small",value:"small"}]},zn=[{component:"input",field:"startPlaceholder",label:"占位内容",tooltip:"开始日期占位内容"},{component:"input",field:"endPlaceholder",label:"结束日期占位内容",tooltip:"结束日期占位内容"},{component:"input",field:"valueFormat",label:"value格式"}],Wt={startPlaceholder:"开始时间",endPlaceholder:"结束时间",valueFormat:"YYYY-MM-DD"},vl={type:"daterange",clearable:!0,disabled:!1,startPlaceholder:"开始日期",endPlaceholder:"结束日期",valueFormat:"YYYY-MM-DD"};function oe(e={defaultComponent:"input",defaultProps:{},required:!0}){const a=[{component:"input",field:"field",label:"字段名"},{component:e.defaultComponent,field:"default",label:"默认值",fieldProps:e.defaultProps}];return e.required?a.concat([{component:"el-switch",field:"required",label:"必填"}]):a}const bl=[{component:"select",field:"background",label:"使用场景",fieldProps:{clearable:!1}},{component:"select",field:"column",label:"列数",fieldProps:{clearable:!1}},{component:"select",field:"size",label:"尺寸",fieldProps:{clearable:!1}},{component:"select",field:"labelPosition",label:"标签位置",fieldProps:{clearable:!1}},{component:"input",field:"labelWidth",label:"标签宽度"},{component:"input",field:"labelSuffix",label:"标签后缀"},{component:"select",field:"requireAsteriskPosition",label:"必填星号位置",fieldProps:{clearable:!1}},{component:"el-switch",field:"hideRequiredAsterisk",label:"必填星号隐藏"},{component:"el-switch",field:"disabled",label:"禁用"},{component:"el-switch",field:"colon",label:"冒号"},{component:"el-switch",field:"showMessage",label:"错误信息显示"},{component:"el-switch",field:"inlineMessage",label:"行内表单"},{component:"el-switch",field:"statusIcon",label:"反馈图标显示"},{component:"el-switch",field:"validateOnRuleChange",label:"rule触发验证"},{component:"el-switch",field:"scrollToError",label:"校验失败滚动"}],yl={background:[{label:"页面",value:"page"},{label:"弹窗",value:"dialog"}],size:[{label:"large",value:"large"},{label:"default",value:"default"},{label:"small",value:"small"}],labelPosition:[{label:"left",value:"left"},{label:"right",value:"right"},{label:"top",value:"top"}],requireAsteriskPosition:[{label:"left",value:"left"},{label:"right",value:"right"}],column:[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3}]},ge=[{component:"input",field:"label",label:"标签"},{component:"input",field:"tooltip",label:"提示"},{component:"input",field:"extra",label:"额外信息"},{component:"input",field:"errorMessage",label:"错误信息"},{component:"el-switch",field:"showMessage",label:"错误信息显示"}],re={size:[{label:"large",value:"large"},{label:"default",value:"default"},{label:"small",value:"small"}]},_e={label:"",tooltip:"",extra:"",errorMessage:"",showMessage:!0,inlineMessage:!1,required:!1},wl=[{component:"el-input-number",field:"minlength",label:"最小长度",fieldProps:{controlsPosition:"right"}},{component:"el-input-number",field:"maxlength",label:"最大长度",fieldProps:{controlsPosition:"right"}},{component:"input",field:"placeholder",label:"占位文本"},{component:"input",field:"suffixIcon",label:"后缀图标"},{component:"input",field:"prefixIcon",label:"前缀图标"},{component:"el-switch",field:"clearable",label:"清空"},{component:"el-switch",field:"readonly",label:"只读"},{component:"el-switch",field:"disabled",label:"禁用"},{component:"el-switch",field:"showWordLimit",label:"字数统计"},{component:"el-switch",field:"showPassword",label:"密码切换"}],Cl={size:[{label:"large",value:"large"},{label:"default",value:"default"},{label:"small",value:"small"}]},Lt=[{component:"el-input-number",field:"minlength",label:"最小长度",fieldProps:{controlsPosition:"right"}},{component:"el-input-number",field:"maxlength",label:"最大长度",fieldProps:{controlsPosition:"right"}},{component:"input",field:"placeholder",label:"占位文本"},{component:"el-switch",field:"clearable",label:"清空"},{component:"el-switch",field:"showWordLimit",label:"字数统计"}],Qe={minlength:void 0,maxlength:void 0,placeholder:"",clearable:!0,showWordLimit:!1},Bn={minlength:void 0,maxlength:void 0,placeholder:"",suffixIcon:"",prefixIcon:"",clearable:!0,readonly:!1,disabled:!1,showWordLimit:!1,showPassword:!1},Tl=[{component:"select",field:"controlsPosition",label:"控制按钮位置"},{component:"el-input-number",field:"min",label:"最小值",fieldProps:{controlsPosition:"right"}},{component:"el-input-number",field:"max",label:"最大值",fieldProps:{controlsPosition:"right"}},{component:"el-input-number",field:"step",label:"计数器步长",fieldProps:{controlsPosition:"right"}},{component:"input",field:"placeholder",label:"占位文本"},{component:"input",field:"precision",label:"数值精度"},{component:"el-switch",field:"disabled",label:"禁用"},{component:"el-switch",field:"controls",label:"控制按钮"},{component:"el-switch",field:"stepStrictly",label:"Step倍数",tooltip:"是否只能输入 step 的倍数"}],kl={size:[{label:"large",value:"large"},{label:"default",value:"default"},{label:"small",value:"small"}],controlsPosition:[{label:"默认",value:""},{label:"right",value:"right"}]},$n={min:void 0,max:void 0,step:1,precision:1,placeholder:"",disabled:!1,controls:!0,stepStrictly:!1,controlsPosition:"right"},Sl=[{component:"option-item-widget",field:"options",label:"数据源",formItemProps:{class:"form-item-options__container"}},{component:"select",field:"size",label:"尺寸"},{component:"input",field:"alias.value",label:"value字段名",tooltip:"value自定义字段名"},{component:"input",field:"alias.label",label:"label字段名",tooltip:"label自定义字段名"},{component:"input",field:"alias.disabled",label:"禁用字段名",tooltip:"disabled自定义字段名"},{component:"el-input-number",field:"multipleLimit",label:"最多选择数",fieldProps:{controlsPosition:"right"}},{component:"input",field:"placeholder",label:"占位文本"},{component:"input",field:"popperClass",label:"下拉框类名"},{component:"el-switch",field:"clearable",label:"清空"},{component:"el-switch",field:"disabled",label:"禁用"},{component:"el-switch",field:"filterable",label:"搜索"},{component:"el-switch",field:"collapseTags",label:"值按文字展示"}],Dl={size:[{label:"large",value:"large"},{label:"default",value:"default"},{label:"small",value:"small"}]},Vn=[{component:"option-item-widget",field:"options",label:"数据源",formItemProps:{class:"form-item-options__container"}},{component:"input",field:"placeholder",label:"占位文本"}],zt={options:[{label:"标签1",value:"1",key:N()},{label:"标签2",value:"2",key:N()}],placeholder:""},Un={multipleSelect:[],options:[{label:"标签1",value:"1",key:N()},{label:"标签2",value:"2",key:N()}],multiple:!0,placeholder:"",popperClass:"",clearable:!0,disabled:!1,filterable:!0,collapseTags:!1,multipleLimit:0,alias:{value:"value",label:"label",disabled:"disabled"}},Ol=[{component:"option-item-widget",field:"options",label:"数据源",formItemProps:{class:"form-item-options__container"}},{component:"input",field:"alias.value",label:"value字段名",tooltip:"value自定义字段名"},{component:"input",field:"alias.label",label:"label字段名",tooltip:"label自定义字段名"},{component:"input",field:"alias.disabled",label:"禁用字段名",tooltip:"disabled自定义字段名"},{component:"input",field:"textColor",label:"激活文本颜色"},{component:"input",field:"fill",label:"激活填充色和边框色"},{component:"el-switch",field:"disabled",label:"禁用"}],xl={size:[{label:"large",value:"large"},{label:"default",value:"default"},{label:"small",value:"small"}]},Kn={radio:"",options:[{label:"标签1",value:"1",key:N()},{label:"标签2",value:"2",key:N()}],textColor:"#ffffff",fill:"#409Eff",disabled:!1,alias:{value:"value",label:"label",disabled:"disabled"}},El=[{component:"el-switch",field:"disabled",label:"只读"},{component:"el-input-number",field:"lowThreshold",label:"低中界限值",fieldProps:{controlsPosition:"right"}},{component:"el-input-number",field:"highThreshold",label:"高中界限值",fieldProps:{controlsPosition:"right"}},{component:"input",field:"voidColor",label:"未选中颜色"},{component:"input",field:"disabledVoidColor",label:"只读未选中颜色"},{component:"input",field:"voidIcon",label:"未选中图标"},{component:"input",field:"disabledVoidIcon",label:"只读未选中图标"},{component:"el-switch",field:"showScore",label:"显示分数"},{component:"el-switch",field:"clearable",label:"重置为0"}],Pl={},qn={disabled:!1,lowThreshold:2,highThreshold:4,voidColor:"#C6D1DE",disabledVoidColor:"#EFF2F7",voidIcon:"i-star",disabledVoidIcon:"i-star-filled",showScore:!1,clearable:!0},Il=[{component:"option-item-widget",field:"options",label:"数据源",formItemProps:{class:"form-item-options__container"}},{component:"input",field:"placeholder",label:"占位文本"},{component:"input",field:"alias.value",label:"value字段名",tooltip:"value自定义字段名"},{component:"input",field:"alias.label",label:"label字段名",tooltip:"label自定义字段名"},{component:"input",field:"alias.disabled",label:"禁用字段名",tooltip:"disabled自定义字段名"},{component:"input",field:"popperClass",label:"下拉框类名"},{component:"el-switch",field:"clearable",label:"清空"},{component:"el-switch",field:"disabled",label:"禁用"},{component:"el-switch",field:"filterable",label:"搜索"}],Fl={size:[{label:"large",value:"large"},{label:"default",value:"default"},{label:"small",value:"small"}]},jn=[{component:"option-item-widget",field:"options",label:"数据源",formItemProps:{class:"form-item-options__container"}},{component:"input",field:"placeholder",label:"占位文本"},{component:"input",field:"alias.value",label:"value字段名",tooltip:"value自定义字段名"},{component:"input",field:"alias.label",label:"label字段名",tooltip:"label自定义字段名"},{component:"input",field:"alias.disabled",label:"禁用字段名",tooltip:"disabled自定义字段名"},{component:"el-switch",field:"clearable",label:"清空"},{component:"el-switch",field:"disabled",label:"禁用"},{component:"el-switch",field:"filterable",label:"搜索"}],ct={options:[{label:"标签",value:"1",key:N()}],placeholder:"",clearable:!0,disabled:!1,filterable:!0,alias:{value:"value",label:"label",disabled:"disabled"}},Hn={options:[{label:"标签1",value:"1",key:N()},{label:"标签2",value:"2",key:N()}],alias:{value:"value",label:"label",disabled:"disabled"},select:"",placeholder:"",popperClass:"",clearable:!0,disabled:!1,filterable:!0},Al=[{component:"el-input-number",field:"min",label:"最小值",fieldProps:{controlsPosition:"right"}},{component:"el-input-number",field:"max",label:"最大值",fieldProps:{controlsPosition:"right"}},{component:"el-input-number",field:"step",label:"计数器步长",fieldProps:{controlsPosition:"right"}},{component:"el-switch",field:"showStops",label:"显示间断点"},{component:"el-switch",field:"showTooltip",label:"显示提示信息"},{component:"el-switch",field:"validateEvent",label:"输入触发校验"}],Rl={},Jn={min:0,max:100,step:1,showStops:!1,showTooltip:!0,validateEvent:!0},Nl=[{component:"el-input-number",field:"width",label:"宽度",fieldProps:{controlsPosition:"right"}},{component:"input",field:"activeText",label:"文字描述"},{component:"input",field:"inactiveText",label:"关闭时文字描述"},{component:"el-switch",field:"disabled",label:"禁用"}],Gn={width:40,activeText:void 0,inactiveText:void 0,disabled:!1};function He(e){return[{component:"select",field:"type",label:"类型",fieldProps:{clearable:!1}},{component:"input",field:"prop",label:"prop",fieldProps:{placeholder:"请输入列字段名"}},{component:"input",field:"label",label:"标题"},{component:"input",field:"width",label:"宽度"},{component:"el-switch",field:"showOverflowTooltip",label:"内容过长隐藏"},{component:"buttons-config",field:"buttons",hide:()=>e.type!=="button",label:"按钮",formItemProps:{class:"form-item-options__container"}}]}const rt={type:[{label:"默认",value:"default"},{label:"按钮",value:"button"},{label:"插槽",value:"slot"},{label:"多选框",value:"selection"},{label:"单选框",value:"radio"},{label:"索引",value:"index"},{label:"展开",value:"expand"},{label:"选择框",value:"select"},{label:"输入框",value:"input"}]},Je={type:"default",prop:"",label:"",width:void 0,showOverflowTooltip:!1,slot:""},Ml=[{component:"el-input-number",field:"rows",label:"行数",fieldProps:{controlsPosition:"right"}},{component:"el-input-number",field:"minlength",label:"最小长度",fieldProps:{controlsPosition:"right"}},{component:"el-input-number",field:"maxlength",label:"最大长度",fieldProps:{controlsPosition:"right"}},{component:"input",field:"placeholder",label:"占位文本"},{component:"input",field:"suffixIcon",label:"后缀图标"},{component:"input",field:"prefixIcon",label:"前缀图标"},{component:"el-switch",field:"clearable",label:"清空"},{component:"el-switch",field:"readonly",label:"只读"},{component:"el-switch",field:"disabled",label:"禁用"},{component:"el-switch",field:"showWordLimit",label:"字数统计"},{component:"el-switch",field:"autosize",label:"高度自适应"}],Xn={type:"textarea",rows:2,minlength:void 0,maxlength:void 0,placeholder:"",suffixIcon:"",prefixIcon:"",clearable:!0,readonly:!1,disabled:!1,showWordLimit:!1,autosize:!1},Wl=[{component:"input",field:"format",label:"输入框格式"},{component:"input",field:"valueFormat",label:"绑定值格式"},{component:"input",field:"placeholder",label:"占位内容"},{component:"input",field:"prefixIcon",label:"前缀图标"},{component:"input",field:"clearIcon",label:"清除图标"},{component:"el-switch",field:"arrowControl",label:"箭头选择"},{component:"el-switch",field:"editable",label:"可输入"},{component:"el-switch",field:"disabled",label:"禁用"},{component:"el-switch",field:"clearable",label:"清空"}],Ll={},Yn={clearable:!0,disabled:!1,placeholder:"",format:"HH:mm:ss",valueFormat:"HH:mm:ss",arrowControl:!1,editable:!0,prefixIcon:"i-clock",clearIcon:"i-circle-close"},zl=[{component:"input",field:"format",label:"输入框格式"},{component:"input",field:"valueFormat",label:"绑定值格式"},{component:"input",field:"startPlaceholder",label:"开始占位内容"},{component:"input",field:"endPlaceholder",label:"结束占位内容"},{component:"input",field:"prefixIcon",label:"前缀图标"},{component:"input",field:"clearIcon",label:"清除图标"},{component:"el-switch",field:"arrowControl",label:"箭头选择"},{component:"el-switch",field:"editable",label:"可输入"},{component:"el-switch",field:"disabled",label:"禁用"},{component:"el-switch",field:"clearable",label:"清空"}],Bl={},Qn={clearable:!0,disabled:!1,startPlaceholder:"开始时间",endPlaceholder:"结束时间",format:"HH:mm:ss",valueFormat:"HH:mm:ss",arrowControl:!1,editable:!0,prefixIcon:"i-clock",clearIcon:"i-circle-close"},$l=[{component:"input",field:"start",label:"开始时间"},{component:"input",field:"end",label:"结束时间"},{component:"input",field:"step",label:"间隔时间"},{component:"input",field:"minTime",label:"最早时间点"},{component:"input",field:"maxTime",label:"最晚时间点"},{component:"input",field:"format",label:"时间格式"},{component:"input",field:"placeholder",label:"占位内容"},{component:"input",field:"prefixIcon",label:"前缀图标"},{component:"input",field:"clearIcon",label:"清空图标"},{component:"el-switch",field:"editable",label:"可输入"},{component:"el-switch",field:"disabled",label:"禁用"},{component:"el-switch",field:"clearable",label:"清空"}],Vl={},Zn={clearable:!0,disabled:!1,placeholder:"",format:"HH:mm",start:"09:00",end:"18:00",step:"00:30",minTime:"",maxTime:"",editable:!1,prefixIcon:"i-clock",clearIcon:"i-circle-close"},Ul=[{component:"option-item-widget",field:"data",label:"数据源",formItemProps:{class:"form-item-options__container"}},{component:"input",field:"placeholder",label:"占位文本"},{component:"input",field:"props.label",label:"标签字段",tooltip:"指定节点标签为节点对象的某个属性值"},{component:"input",field:"props.children",label:"子树字段",tooltip:"指定子树为节点对象的某个属性值"},{component:"input",field:"props.disabled",label:"禁用字段",tooltip:"指定节点选择框是否禁用为节点对象的某个属性值"},{component:"el-switch",field:"multiple",label:"开启多选"},{component:"el-switch",field:"showCheckbox",label:"开启复选"},{component:"el-switch",field:"clearable",label:"清空"},{component:"el-switch",field:"disabled",label:"禁用"},{component:"el-switch",field:"filterable",label:"搜索"},{component:"el-switch",field:"highlightCurrent",label:"节点高亮"},{component:"el-switch",field:"defaultExpandAll",label:"默认展开节点"},{component:"el-switch",field:"expandOnClickNode",label:"点击节点展开",tooltip:"是否在点击节点的时候展开或者收缩节点， 默认值为 true，如果为 false，则只有点箭头图标的时候才会展开或者收缩节点。"}],Kl={};N();const ea={data:[{label:"标签1",value:"1",key:N()},{label:"标签2",value:"2",key:N()}],props:{label:"label",children:"children",disabled:"disabled"},multiple:!1,placeholder:"",clearable:!0,disabled:!1,filterable:!0,showCheckbox:!1,highlightCurrent:!1,defaultExpandAll:!1,expandOnClickNode:!1},ql=[{component:"option-item-widget",field:"options",label:"数据源",formItemProps:{class:"form-item-options__container"}},{component:"input",field:"props.value",label:"value字段名",tooltip:"value自定义字段名"},{component:"input",field:"props.label",label:"label字段名",tooltip:"label自定义字段名"},{component:"input",field:"props.disabled",label:"禁用字段名",tooltip:"disabled自定义字段名"},{component:"input",field:"placeholder",label:"占位文本"},{component:"input",field:"popperClass",label:"下拉框类名"},{component:"el-switch",field:"multiple",label:"开启多选"},{component:"el-switch",field:"collapseTags",label:"文字形式",hide:e=>e.multiple===!1,tooltip:"多选时是否将选中值按文字的形式展示"},{component:"el-input-number",field:"multipleLimit",label:"可选最大数",hide:e=>e.multiple===!1,tooltip:"多选时可被选择的最大数目。 当被设置为0时，可被选择的数目不设限。",fieldProps:{controlsPosition:"right"}},{component:"el-input-number",field:"maxCollapseTags",label:"Tag显示数",hide:e=>e.multiple===!1,tooltip:"需要显示的 Tag 的最大数量 只有当 collapse-tags 设置为 true 时才会生效。",fieldProps:{controlsPosition:"right"}},{component:"el-switch",field:"collapseTagsTooltip",label:"悬停显示",hide:e=>e.multiple===!1,tooltip:"当鼠标悬停于折叠标签的文本时，是否显示所有选中的标签。 只有当 collapse-tags 设置为 true 时才会生效。"},{component:"el-switch",field:"clearable",label:"清空"},{component:"el-switch",field:"disabled",label:"禁用"},{component:"el-switch",field:"filterable",label:"搜索"}],jl={size:[{label:"large",value:"large"},{label:"default",value:"default"},{label:"small",value:"small"}]};N();const ta={options:[{label:"标签1",value:"1",key:N()},{label:"标签2",value:"2",key:N()}],props:{value:"value",label:"label",disabled:"disabled"},select:"",placeholder:"",popperClass:"",clearable:!0,disabled:!1,filterable:!0,multiple:!1,collapseTags:!1,multipleLimit:0,collapseTagsTooltip:!1,maxCollapseTags:1},Hl=[{component:"el-input-number",field:"max",label:"最大表单项数量",fieldProps:{controlsPosition:"right"}},{component:"el-switch",field:"action",label:"操作项"}],Jl={action:!1,max:void 0};N(),Be(N()),aa(N()),la(N()),na(N()),oa(N());const Hi=[{label:"输入框",value:"input"},{label:"单选框",value:"select"},{label:"多选框",value:"multipleSelect"},{label:"日期选择",value:"el-date-picker"},{label:"插槽",value:"slot"}],wi={component:"select",field:"componentType",label:"组件类别",fieldProps:{clearable:!1}},Ci={labelWidth:"80px",collapsed:!0},ia={name:"tableCol",id:N(),title:"表格项",prop:"operation",label:"操作",icon:"icon-biaoge-lie",type:"button",buttons:[{key:N(),type:"primary",link:!0,label:"新增"},{key:N(),type:"primary",link:!0,label:"编辑"},{type:"danger",link:!0,label:"删除",key:N()}],componentSchema:He,componentOptionsConfig:rt,componentFormData:z({...Je,type:"button",prop:"operation",label:"操作",buttons:[{type:"primary",key:N(),link:!0,label:"新增"},{key:N(),type:"primary",link:!0,label:"编辑"},{type:"danger",link:!0,label:"删除",key:N()}]}),activeCollapseItems:["column"],allowCopy:!0,allowDelete:!0};function Gl(){const e=N(),a=N();return[{name:"tableCol",prop:"name",label:"姓名",title:"表格项",icon:"icon-biaoge-lie",id:N(),search:{id:e,name:"tableForm",formItemProps:{id:`schema-field${e}`,onClick:n=>{Xe.emit("form-item-click",{event:n,id:e})}},component:"input",title:"表单项",field:e,label:"表单项1",icon:"icon-biaodanxiang",componentFormData:z({...Qe,componentType:"input"}),componentSchema:[wi,...Lt],componentOptionsConfig:{componentType:Hi},fieldFormData:z({field:e,default:""}),fieldSchema:oe({defaultComponent:"el-input"}),formItemFormData:z({label:"表单项1",tooltip:"",extra:""}),formItemTemplateSchema:[{component:"input",field:"label",label:"标签"},{component:"input",field:"tooltip",label:"提示"},{component:"input",field:"extra",label:"额外信息"}],formItemOptionsConfig:re,activeCollapseItems:["field","component","formItem"],allowCopy:!0,allowDelete:!0},componentSchema:He,componentOptionsConfig:rt,componentFormData:z({...Je,prop:"name",label:"姓名",buttons:[{key:N(),type:"primary",link:!0,label:"编辑"},{type:"primary",label:"删除",link:!0,key:N()}]}),activeCollapseItems:["column"],allowCopy:!0,allowDelete:!0},{name:"tableCol",prop:"address",label:"地址",title:"表格项",icon:"icon-biaoge-lie",id:N(),search:{id:a,formItemProps:{id:`schema-field${a}`,onClick:n=>{Xe.emit("form-item-click",{event:n,id:a})}},component:"input",name:"tableForm",title:"表单项",field:a,label:"表单项2",icon:"icon-biaodanxiang",componentFormData:z({...Qe,componentType:"input"}),componentSchema:[wi,...Lt],componentOptionsConfig:{componentType:Hi},fieldFormData:z({field:a,default:""}),fieldSchema:oe({defaultComponent:"el-input"}),formItemFormData:z({label:"表单项2",tooltip:"",extra:""}),formItemTemplateSchema:[{component:"input",field:"label",label:"标签"},{component:"input",field:"tooltip",label:"提示"},{component:"input",field:"extra",label:"额外信息"}],formItemOptionsConfig:re,activeCollapseItems:["field","component","formItem"],allowCopy:!0,allowDelete:!0},componentSchema:He,componentOptionsConfig:rt,componentFormData:z({...Je,prop:"address",label:"地址",buttons:[{key:N(),type:"primary",link:!0,label:"编辑"},{type:"primary",label:"删除",link:!0,key:N()}]}),activeCollapseItems:["column"],allowCopy:!0,allowDelete:!0},{name:"tableCol",id:N(),title:"表格项",prop:"phone",icon:"icon-biaoge-lie",label:"手机号",componentSchema:He,componentOptionsConfig:rt,componentFormData:z({...Je,prop:"phone",label:"手机号",buttons:[{key:N(),type:"primary",label:"编辑",link:!0},{type:"primary",label:"删除",link:!0,key:N()}]}),activeCollapseItems:["column"],allowCopy:!0,allowDelete:!0},{...ia}]}function Xl(){const e=Gl();return{id:N(),name:"crud",icon:"icon-bushu",title:"增删改查",schema:{action:!1,headerRowClassName:"crudHeader",cellClassName:({columnIndex:a})=>{if(e[a])return`schema-field${e[a].id}`},draggable:{group:{name:"people",pull:!1}},collapsed:!0,size:"default",rowKey:"id",searchFormData:{name:"",address:""},search:{labelPosition:"right",labelWidth:"80px",draggable:{group:{name:"people",pull:!1}}},data:[{id:1,name:"姓名",address:"地址",phone:"手机号"}],pagination:{page:1,pageSize:10,total:0},columns:e},componentFormData:z({size:"default",rowKey:"id",formDecorator:"el-card",tableDecorator:"el-card",pagination:!0,background:"page",action:!1,request:!0}),componentSchema:cl,componentOptionsConfig:pl,fieldSchema:fl,fieldFormData:z(Ci),allowCopy:!1,allowDelete:!0,activeCollapseItems:["table","form"],children:[]}}function na(e=N()){return{id:N(),icon:"icon-duoxuan",title:"复选框",schema:{component:"checkbox",field:e,label:"复选框",fieldProps:{textColor:"#ffffff",fill:"#409Eff",disabled:!1,min:void 0,max:void 0,alias:{value:"value",label:"label",disabled:"disabled"}}},formItemFormData:z({..._e,label:"复选框"}),formItemTemplateSchema:ge,formItemOptionsConfig:re,componentFormData:z({...Ln}),componentSchema:rl,componentOptionsConfig:ul,fieldFormData:z({field:e,default:[],required:!1}),fieldSchema:oe({defaultComponent:"select",defaultProps:{multiple:!0},required:!0}),fieldOptionsConfig:{default:[{label:"标签1",value:"1",key:N()},{label:"标签2",value:"2",key:N()}]},allowCopy:!0,allowDelete:!0,activeCollapseItems:["field","component","formItem"],children:[]}}function Yl(){const e=N();return{id:N(),icon:"icon-riqi",title:"日期选择",schema:{component:"el-date-picker",field:e,label:"日期选择",fieldProps:{type:"date",clearable:!0,disabled:!1,placeholder:"",valueFormat:"YYYY-MM-DD"}},formItemFormData:z({..._e,label:"日期选择"}),formItemTemplateSchema:ge,formItemOptionsConfig:re,componentFormData:z({..._l}),componentSchema:dl,componentOptionsConfig:hl,fieldOptionsConfig:{},fieldFormData:z({field:e,default:""}),fieldSchema:oe({defaultComponent:"el-date-picker",defaultProps:{type:"date",valueFormat:"YYYY-MM-DD",placeholder:"请选择默认日期"}}),allowCopy:!0,allowDelete:!0,activeCollapseItems:["field","component","formItem"],children:[]}}function Ql(){const e=N();return{id:N(),icon:"icon-riqiqujian",title:"日期范围",schema:{component:"el-date-picker",field:e,label:"日期范围",fieldProps:{type:"daterange",clearable:!0,disabled:!1,startPlaceholder:"开始日期",endPlaceholder:"结束日期",valueFormat:"YYYY-MM-DD"}},formItemFormData:z({..._e,label:"日期范围"}),formItemTemplateSchema:ge,formItemOptionsConfig:re,componentFormData:z({...vl}),componentSchema:ml,componentOptionsConfig:gl,fieldOptionsConfig:{},fieldFormData:z({field:e,default:[]}),fieldSchema:oe({defaultComponent:"el-date-picker",defaultProps:{type:"daterange",valueFormat:"YYYY-MM-DD",startPlaceholder:"开始日期",endPlaceholder:"结束日期"}}),allowCopy:!0,allowDelete:!0,activeCollapseItems:["field","component","formItem"],children:[]}}function Be(e=N()){return{id:N(),icon:"icon-danhangshurukuang",title:"输入框",schema:{component:"input",field:e,label:"输入框",fieldProps:{minlength:void 0,maxlength:void 0,placeholder:"",suffixIcon:"",prefixIcon:"",clearable:!0,readonly:!1,disabled:!1,showWordLimit:!1,showPassword:!1}},formItemFormData:z({..._e,label:"输入框"}),formItemTemplateSchema:ge,formItemOptionsConfig:re,componentFormData:z({...Bn}),componentSchema:wl,componentOptionsConfig:Cl,fieldOptionsConfig:{},fieldFormData:z({field:e,default:""}),fieldSchema:oe(),allowCopy:!0,allowDelete:!0,activeCollapseItems:["field","component","formItem"]}}function Zl(){const e=N();return{id:N(),icon:"icon-fuhao-shuzishurukuang",title:"数字输入",schema:{component:"el-input-number",field:e,label:"数字输入",fieldProps:{min:void 0,max:void 0,step:1,precision:1,placeholder:"",disabled:!1,controls:!0,stepStrictly:!1,controlsPosition:"right"}},formItemFormData:z({..._e,label:"数字输入"}),formItemTemplateSchema:ge,formItemOptionsConfig:re,componentFormData:z({...$n}),componentSchema:Tl,componentOptionsConfig:kl,fieldOptionsConfig:{},fieldFormData:z({field:e,default:0}),fieldSchema:oe({defaultComponent:"el-input-number",defaultProps:{controlsPosition:"right"},required:!0}),allowCopy:!0,allowDelete:!0,activeCollapseItems:["field","component","formItem"],children:[]}}function eo(){const e=N();return{id:N(),formItemFormData:z({..._e,label:"多选框"}),formItemTemplateSchema:ge,formItemOptionsConfig:re,icon:"icon-duoxuanxialaliebiao",title:"多选框",schema:{component:"select",field:e,label:"多选框",fieldProps:{multiple:!0,placeholder:"",popperClass:"",clearable:!0,disabled:!1,filterable:!0,collapseTags:!1,multipleLimit:0,alias:{value:"value",label:"label",disabled:"disabled"}}},componentFormData:z({...Un}),componentSchema:Sl,componentOptionsConfig:Dl,fieldFormData:z({field:e,default:[]}),fieldSchema:oe({defaultComponent:"select",defaultProps:{multiple:!0},required:!0}),fieldOptionsConfig:{default:[{label:"标签1",value:"1",key:N()},{label:"标签2",value:"2",key:N()}]},allowCopy:!0,allowDelete:!0,activeCollapseItems:["field","component","formItem"],children:[]}}function to(){const e=N();return{id:N(),icon:"icon-danxuan",title:"单选框",schema:{component:"radio",field:e,label:"单选框",fieldProps:{textColor:"#ffffff",fill:"#409Eff",disabled:!1,alias:{value:"value",label:"label",disabled:"disabled"}}},formItemFormData:z({..._e,label:"单选框"}),formItemTemplateSchema:ge,formItemOptionsConfig:re,componentFormData:z({...Kn}),componentSchema:Ol,componentOptionsConfig:xl,fieldFormData:z({field:e,default:""}),fieldSchema:oe({defaultComponent:"select",required:!0}),fieldOptionsConfig:{default:[{label:"标签1",value:"1",key:N()},{label:"标签2",value:"2",key:N()}]},allowCopy:!0,allowDelete:!0,activeCollapseItems:["field","component","formItem"],children:[]}}function io(){const e=N();return{id:N(),icon:"icon-caozuo-pingxingline",title:"评分",schema:{component:"el-rate",field:e,label:"评分",fieldProps:{}},formItemFormData:z({..._e,label:"评分"}),formItemTemplateSchema:ge,formItemOptionsConfig:re,componentFormData:z({...qn}),componentSchema:El,componentOptionsConfig:Pl,fieldOptionsConfig:{},fieldFormData:z({field:e,default:0}),fieldSchema:oe({defaultComponent:"el-input-number",defaultProps:{controlsPosition:"right"}}),allowCopy:!0,allowDelete:!0,activeCollapseItems:["field","component","formItem"],children:[]}}function aa(e=N()){return{id:N(),icon:"icon-xialadanxuan",title:"选择框",schema:{component:"select",field:e,label:"选择框",fieldProps:{placeholder:"",popperClass:"",clearable:!0,disabled:!1,filterable:!0,alias:{value:"value",label:"label",disabled:"disabled"}}},formItemFormData:z({..._e,label:"选择框"}),formItemTemplateSchema:ge,formItemOptionsConfig:re,componentFormData:z({...Hn}),componentSchema:Il,componentOptionsConfig:Fl,fieldFormData:z({field:e,default:""}),fieldSchema:oe({defaultComponent:"select",required:!0}),fieldOptionsConfig:{default:[{label:"标签1",value:"1",key:N()},{label:"标签2",value:"2",key:N()}]},allowCopy:!0,allowDelete:!0,activeCollapseItems:["field","component","formItem"],children:[]}}function no(){const e=N();return{id:N(),icon:"icon-huakuai",title:"滑块",schema:{component:"el-slider",field:e,label:"滑块",fieldProps:{min:0,max:100,step:1,showStops:!1,showTooltip:!0,validateEvent:!0}},formItemFormData:z({..._e,label:"滑块"}),formItemTemplateSchema:ge,formItemOptionsConfig:re,componentFormData:z({...Jn}),componentSchema:Al,componentOptionsConfig:Rl,fieldOptionsConfig:{},fieldFormData:z({field:e,default:0}),fieldSchema:oe({defaultComponent:"el-input-number",defaultProps:{controlsPosition:"right"},required:!0}),allowCopy:!0,allowDelete:!0,activeCollapseItems:["field","component","formItem"],children:[]}}function ao(){return{id:N(),icon:"icon-rongqi",title:"插槽",schema:{component:"placeholder-block",label:"插槽",fieldProps:{}},formItemFormData:z({..._e,showMessage:!1,label:"插槽"}),formItemTemplateSchema:ge,formItemOptionsConfig:re,componentFormData:z({}),componentSchema:[],componentOptionsConfig:{},fieldOptionsConfig:{},fieldFormData:z({slot:"slot"}),fieldSchema:[{component:"input",field:"slot",label:"插槽名"}],allowCopy:!0,allowDelete:!0,activeCollapseItems:["field","component","formItem"],children:[]}}function la(e=N()){return{id:N(),icon:"icon-kaiguan",title:"开关",schema:{component:"el-switch",field:e,label:"开关",fieldProps:{width:40,activeText:void 0,inactiveText:void 0,disabled:!1}},formItemFormData:z({..._e,label:"开关"}),formItemTemplateSchema:ge,formItemOptionsConfig:re,componentFormData:z({...Gn}),componentSchema:Nl,componentOptionsConfig:{},fieldFormData:z({field:e,default:!1}),fieldSchema:oe({defaultComponent:"el-switch",required:!0}),fieldOptionsConfig:{},allowCopy:!0,allowDelete:!0,activeCollapseItems:["field","component","formItem"],children:[]}}function oa(e=N()){return{id:N(),icon:"icon-duohangshurukuang",title:"多行输入",schema:{component:"input",field:e,label:"多行输入",fieldProps:{type:"textarea",rows:2,minlength:void 0,maxlength:void 0,placeholder:"",suffixIcon:"",prefixIcon:"",clearable:!0,readonly:!1,disabled:!1,showWordLimit:!1,autosize:!1}},formItemFormData:z({..._e,label:"多行输入"}),formItemTemplateSchema:ge,formItemOptionsConfig:re,componentFormData:z({...Xn}),componentSchema:Ml,componentOptionsConfig:{},fieldFormData:z({field:e,default:""}),fieldSchema:oe(),fieldOptionsConfig:{},allowCopy:!0,allowDelete:!0,activeCollapseItems:["field","component","formItem"],children:[]}}function lo(){const e=N();return{id:N(),icon:"icon-shijianxuanze1",title:"时间选择器",schema:{component:"el-time-picker",field:e,label:"时间选择器",fieldProps:{clearable:!0,disabled:!1,placeholder:"",format:"HH:mm:ss",valueFormat:"HH:mm:ss",arrowControl:!1,editable:!1,prefixIcon:"i-clock",clearIcon:"i-circle-close"}},formItemFormData:z({..._e,label:"时间选择器"}),formItemTemplateSchema:ge,formItemOptionsConfig:re,componentFormData:z({...Yn}),componentSchema:Wl,componentOptionsConfig:Ll,fieldOptionsConfig:{},fieldFormData:z({field:e,default:""}),fieldSchema:oe({defaultComponent:"el-time-picker",defaultProps:{valueFormat:"HH:mm:ss",format:"HH:mm:ss",placeholder:"请选择默认时间"}}),allowCopy:!0,allowDelete:!0,activeCollapseItems:["field","component","formItem"],children:[]}}function oo(){const e=N();return{id:N(),icon:"icon-shijianxuanze",title:"时间范围选择器",schema:{component:"el-time-picker",field:e,label:"时间范围",fieldProps:{isRange:!0,clearable:!0,disabled:!1,startPlaceholder:"开始时间",endPlaceholder:"结束时间",format:"HH:mm:ss",valueFormat:"HH:mm:ss",arrowControl:!1,editable:!0,prefixIcon:"i-clock",clearIcon:"i-circle-close"}},formItemFormData:z({..._e,label:"时间范围选择器"}),formItemTemplateSchema:ge,formItemOptionsConfig:re,componentFormData:z({...Qn}),componentSchema:zl,componentOptionsConfig:Bl,fieldOptionsConfig:{},fieldFormData:z({field:e,default:[]}),fieldSchema:oe({defaultComponent:"el-time-picker",defaultProps:{isRange:!0,startPlaceholder:"开始时间",endPlaceholder:"结束时间",valueFormat:"HH:mm:ss"}}),allowCopy:!0,allowDelete:!0,activeCollapseItems:["field","component","formItem"],children:[]}}function so(){const e=N();return{id:N(),icon:"icon-shijianxuanze2",title:"时间选择",schema:{component:"el-time-select",field:e,label:"时间选择",fieldProps:{clearable:!0,disabled:!1,placeholder:"",format:"HH:mm",start:"09:00",end:"18:00",step:"00:30",minTime:"",maxTime:"",editable:!1,prefixIcon:"i-clock",clearIcon:"i-circle-close"}},formItemFormData:z({..._e,label:"时间选择"}),formItemTemplateSchema:ge,formItemOptionsConfig:re,componentFormData:z({...Zn}),componentSchema:$l,componentOptionsConfig:Vl,fieldOptionsConfig:{},fieldFormData:z({field:e,default:""}),fieldSchema:oe({defaultComponent:"el-time-select",defaultProps:{placeholder:"请选择默认时间"}}),allowCopy:!0,allowDelete:!0,activeCollapseItems:["field","component","formItem"],children:[]}}function ro(e=N()){return{id:N(),icon:"icon-shuxuanzeqi",title:"树形选择",schema:{component:"el-tree-select",field:e,label:"树形选择",fieldProps:{data:[{label:"标签1",value:"1",key:N()},{label:"标签2",value:"2",key:N()}],placeholder:"",clearable:!0,multiple:!1,disabled:!1,filterable:!0,showCheckbox:!1,highlightCurrent:!1,defaultExpandAll:!1,expandOnClickNode:!1}},formItemFormData:z({..._e,label:"树形选择"}),formItemTemplateSchema:ge,formItemOptionsConfig:re,componentFormData:z({...ea}),componentSchema:Ul,componentOptionsConfig:Kl,fieldFormData:z({field:e,default:""}),fieldSchema:oe({defaultComponent:"select",required:!0}),fieldOptionsConfig:{default:[{label:"标签1",value:"1",key:N()},{label:"标签2",value:"2",key:N()}]},allowCopy:!0,allowDelete:!0,activeCollapseItems:["field","component","formItem"],children:[]}}function uo(e=N()){return{id:N(),icon:"icon-shuxingkongjian",title:"虚拟化选择器",schema:{component:"el-select-v2",field:e,label:"虚拟化选择器",fieldProps:{placeholder:"",popperClass:"",clearable:!0,disabled:!1,filterable:!0,multiple:!1,collapseTags:!1,multipleLimit:0,collapseTagsTooltip:!1,maxCollapseTags:1,props:{value:"value",label:"label",disabled:"disabled"}}},formItemFormData:z({..._e,label:"虚拟化选择器"}),formItemTemplateSchema:ge,formItemOptionsConfig:re,componentFormData:z({...ta}),componentSchema:ql,componentOptionsConfig:jl,fieldFormData:z({field:e,default:""}),fieldSchema:oe({defaultComponent:"select",required:!0}),fieldOptionsConfig:{default:[{label:"标签1",value:"1",key:N()},{label:"标签2",value:"2",key:N()}]},allowCopy:!0,allowDelete:!0,activeCollapseItems:["field","component","formItem"],children:[]}}function co(e=N()){return{id:N(),icon:"icon-shuzubiaodan",title:"数组表单",schema:{component:"z-form",field:e,label:"数组表单",fieldProps:{action:!1,type:"array",max:void 0,draggable:!0,labelWidth:"100px",style:{width:"100%"},columns:[{...Be(),schema:{...Be().schema,label:"通知单1"},formItemFormData:{...Be().schema,label:"通知单1"}},{...Be(),schema:{...Be().schema,label:"通知单2"},formItemFormData:{...Be().schema,label:"通知单2"}}]}},formItemFormData:z({..._e,label:"数组表单"}),formItemTemplateSchema:ge,formItemOptionsConfig:re,componentFormData:z({...Jl,labelWidth:"100px"}),componentSchema:[...Hl,{component:"input",field:"labelWidth",label:"标签宽度"}],fieldFormData:z({field:e,default:[{}],required:!1}),fieldSchema:oe({defaultComponent:"select",defaultProps:{multiple:!0},required:!0}),fieldOptionsConfig:{default:[{label:"标签1",value:"1",key:N()},{label:"标签2",value:"2",key:N()}]},allowCopy:!0,allowDelete:!0,activeCollapseItems:["field","component","formItem"]}}const Le=[{label:"输入框",value:"input"},{label:"单选框",value:"select"},{label:"多选框",value:"multipleSelect"},{label:"日期选择",value:"el-date-picker"},{label:"插槽",value:"slot"}],fo=[{collapseTitle:"基础组件",components:[Be(),oa(),Zl(),aa(),uo(),to(),la(),eo(),na(),ro(),so(),Yl(),Ql(),lo(),oo(),io(),no(),ao()]},{collapseTitle:"高阶组件",components:[Xl(),co()]}],Zt={...Ln,...Bn,...$n,...Un,...Kn,...Hn,...Gn,...Xn,...qn,...Jn,...Zn,...Yn,...Qn,...ea,...ta},po={labelSuffix:"",colon:!1,disabled:!1,inline:!1,hideRequiredAsterisk:!1,showMessage:!0,inlineMessage:!1,statusIcon:!1,validateOnRuleChange:!0,scrollToError:!1,requireAsteriskPosition:"left",column:1},ho=[{key:"controlsPosition",value:"right"},{key:"type",value:["textarea","daterange","date"]},{key:"multiple",value:!0},{key:"startPlaceholder",value:"开始时间"},{key:"endPlaceholder",value:"结束时间"},{key:"data",component:"el-tree-select"},{key:"valueFormat",value:["HH:mm:ss","YYYY-MM-DD"]}];function wt(e){Et(e)&&Object.keys(e).forEach(a=>{qe(e[a])&&delete e[a]})}function he(e="code",a="form",n){var l,r,u,f,d;const{widgets:i}=ae(),{formConfig:s}=Ue(),t=me(s.value),o=n||i.value;if(a==="form"){const h={};let v={};return o.some(g=>{var m;return(m=g.fieldFormData)==null?void 0:m.required})&&(t.rules={}),o.forEach(g=>{var y,R,I,W,E,k,w;const m=(y=g.fieldFormData)==null?void 0:y.field,p=(R=g.schema.fieldProps)==null?void 0:R.columns;m&&(h[m]=me(g.fieldFormData.default),p&&(g.fieldFormData.default.forEach(({},x)=>{const c={};p.forEach(S=>{var O;c[(O=S.fieldFormData)==null?void 0:O.field]=S.fieldFormData.default}),h[m][x]=c}),((W=(I=g.schema)==null?void 0:I.fieldProps)==null?void 0:W.type)==="array"&&(t.type="array")),(E=g.componentOptionsConfig)!=null&&E[m]&&(v[m]=(k=g.componentOptionsConfig)==null?void 0:k[m].map(x=>{var c,S,O,$,U,q,H,Z;return{[((S=(c=g.componentFormData)==null?void 0:c.alias)==null?void 0:S.label)||(($=(O=g.componentFormData)==null?void 0:O.props)==null?void 0:$.label)||"label"]:x.label,[((q=(U=g.componentFormData)==null?void 0:U.alias)==null?void 0:q.value)||((Z=(H=g.componentFormData)==null?void 0:H.props)==null?void 0:Z.value)||"value"]:x.value}})),Object.hasOwnProperty.call(g.componentFormData,"options")&&(v[m]=(w=g.componentFormData)==null?void 0:w.options.map(x=>{var c,S,O,$,U,q,H,Z;return{[((S=(c=g.componentFormData)==null?void 0:c.alias)==null?void 0:S.label)||(($=(O=g.componentFormData)==null?void 0:O.props)==null?void 0:$.label)||"label"]:x.label,[((q=(U=g.componentFormData)==null?void 0:U.alias)==null?void 0:q.value)||((Z=(H=g.componentFormData)==null?void 0:H.props)==null?void 0:Z.value)||"value"]:x.value}})))}),Object.keys(t).forEach(g=>{po[g]===t[g]&&delete t[g]}),delete t.layout,delete t.background,wt(t),{columns:me(o).map(g=>{var y,R,I,W,E,k,w,x,c,S,O,$,U,q,H,Z,te,ne,ye,Ce,Te,ke,Ee,fe,K,Pe,le,Oe,Fe,xe,Me;if(g.schema.component==="placeholder-block"&&((y=g.fieldFormData)!=null&&y.slot)&&e!=="preview")return{slot:(R=g.fieldFormData)==null?void 0:R.slot,...Object.entries(g.formItemFormData).reduce((ee,[pe,We])=>(We&&(ee[pe]=We),ee),{})};const m=g.schema,p=g.schema.fieldProps;if(Et(m)&&Object.keys(m).forEach(ee=>{_e[ee]===m[ee]&&delete g.schema[ee]}),Object.keys(Zt).forEach(ee=>{var We,gt,vt,bt,it,_,C,D;const pe=ho.find(P=>P.key===ee);if(pe||(Zt[ee]===((We=g.schema.fieldProps)==null?void 0:We[ee])?(gt=g.schema.fieldProps)==null||delete gt[ee]:Array.isArray(Zt[ee])&&(vt=g.schema.fieldProps)!=null&&vt[ee]&&((bt=g.schema.fieldProps)==null?void 0:bt[ee].length)===0&&((it=g.schema.fieldProps)==null||delete it[ee])),pe){if(pe.key==="data"&&pe.component==="el-tree-select")return;(Array.isArray(pe.value)?pe.value.includes((_=g.schema.fieldProps)==null?void 0:_[ee]):pe.value===((C=g.schema.fieldProps)==null?void 0:C[ee]))||(D=g.schema.fieldProps)==null||delete D[ee]}}),((W=(I=g.schema.fieldProps)==null?void 0:I.props)==null?void 0:W.label)==="label"&&((E=g.schema.fieldProps)==null||delete E.props.label),((w=(k=g.schema.fieldProps)==null?void 0:k.props)==null?void 0:w.value)==="value"&&((x=g.schema.fieldProps)==null||delete x.props.value),((S=(c=g.schema.fieldProps)==null?void 0:c.props)==null?void 0:S.disabled)==="disabled"&&((O=g.schema.fieldProps)==null||delete O.props.disabled),((U=($=g.schema.fieldProps)==null?void 0:$.props)==null?void 0:U.children)==="children"&&((q=g.schema.fieldProps)==null||delete q.props.children),((Z=(H=g.schema.fieldProps)==null?void 0:H.alias)==null?void 0:Z.label)==="label"&&((te=g.schema.fieldProps)==null||delete te.alias.label),((ye=(ne=g.schema.fieldProps)==null?void 0:ne.alias)==null?void 0:ye.disabled)==="disabled"&&((Ce=g.schema.fieldProps)==null||delete Ce.alias.disabled),((ke=(Te=g.schema.fieldProps)==null?void 0:Te.alias)==null?void 0:ke.value)==="value"&&((Ee=g.schema.fieldProps)==null||delete Ee.alias.value),g.schema.component==="checkbox"&&((fe=g.schema.fieldProps)==null?void 0:fe.min)===void 0&&((K=g.schema.fieldProps)==null||delete K.min),g.schema.component==="checkbox"&&((Pe=g.schema.fieldProps)==null?void 0:Pe.max)===void 0&&((le=g.schema.fieldProps)==null||delete le.max),g.schema.component==="el-tree-select"&&(g.schema.fieldProps.data=(Oe=g.schema.fieldProps)==null?void 0:Oe.data.map(ee=>{var pe,We;return{[((We=(pe=g.schema.fieldProps)==null?void 0:pe.props)==null?void 0:We.label)||"label"]:ee.label,value:ee.value}})),wt(p),p==null||delete p.options,(Fe=g.schema.fieldProps)!=null&&Fe.columns&&((xe=g.schema.fieldProps)!=null&&xe.columns[0].schema)){const{columns:ee,options:pe}=he(e,"form",(Me=g.schema.fieldProps)==null?void 0:Me.columns);g.schema={label:g.schema.label,field:g.schema.field,...g.schema.fieldProps,columns:void 0,style:void 0,action:void 0,draggable:void 0},g.schema.children=ee,v={...v,...pe}}return Et(p)&&qe(p)&&delete g.schema.fieldProps,Et(p)&&(Object.keys(p).map(pe=>p[pe]).some(pe=>pe!==void 0)||delete g.schema.fieldProps),g.schema}),formData:h,formConfig:t,options:v}}if(a==="crud"){if(!i.value[0])return{config:{}};const h=i.value[0],v=h.schema,b={};let g=[];const m=["name","title","id","componentSchema","componentOptionsConfig","componentFormData","activeCollapseItems","allowCopy","allowDelete","fieldFormData","fieldSchema","formItemFormData","formItemTemplateSchema","formItemOptionsConfig","icon","__uid"],p={input:Qe,select:ct,datepicker:{},"placeholder-block":{}};e==="preview"?b.data=v.data:b.data=[];const y=h.componentFormData;y!=null&&y.rowKey&&y.rowKey!=="id"&&(b.rowKey=y==null?void 0:y.rowKey),y!=null&&y.pagination&&(b.pagination=v.pagination),(y==null?void 0:y.formDecorator)!=="el-card"&&(b.formDecorator=v.formDecorator),(y==null?void 0:y.tableDecorator)!=="el-card"&&(b.tableDecorator=v.tableDecorator),y!=null&&y.action||(b.action=!1),y!=null&&y.request&&(b.request={searchApi:"getTableData",deleteApi:"commonApi",submitApi:"commonApi"});const R=h.fieldFormData,I=(R==null?void 0:R.collapsed)!==Ci.collapsed,W=(R==null?void 0:R.labelWidth)!==Ci.labelWidth;return(W||I)&&!b.search&&(b.search={}),I&&(b.search.collapsed=R==null?void 0:R.collapsed),W&&(b.search.labelWidth=R==null?void 0:R.labelWidth),((l=v.columns)==null?void 0:l.some(k=>k.search))&&(((r=v.formConfig)==null?void 0:r.labelWidth)!=="80px"&&(b.formConfig={labelWidth:(u=v.formConfig)==null?void 0:u.labelWidth}),b.searchFormData={},b.options={},(f=v.columns)==null||f.forEach(k=>{var w,x,c;k.search&&(b.searchFormData[(w=k.search.fieldFormData)==null?void 0:w.field]=(x=k.search.fieldFormData)==null?void 0:x.default,k.search.fieldProps&&k.search.fieldProps.options&&k.search.component!=="placeholder-block"&&(b.options[(c=k.search.fieldFormData)==null?void 0:c.field]=k.search.fieldProps.options.map(S=>{var O,$,U,q,H,Z,te,ne,ye,Ce,Te,ke;return{[((U=($=(O=k.search)==null?void 0:O.fieldProps)==null?void 0:$.alias)==null?void 0:U.value)||((Z=(H=(q=k.search)==null?void 0:q.fieldProps)==null?void 0:H.props)==null?void 0:Z.value)||"value"]:S.value,[((ye=(ne=(te=k.search)==null?void 0:te.fieldProps)==null?void 0:ne.alias)==null?void 0:ye.label)||((ke=(Te=(Ce=k.search)==null?void 0:Ce.fieldProps)==null?void 0:Te.props)==null?void 0:ke.label)||"label"]:S.label}})))}),b.options&&qe(b.options)&&delete b.options),g=((d=v.columns)==null?void 0:d.map(k=>{var x,c,S,O,$,U,q,H,Z,te,ne,ye,Ce,Te,ke,Ee,fe;const w=me(k);if(w.search){const K=w.search,Pe=w.search.component;Object.keys(K.componentFormData).forEach(le=>{var Oe,Fe,xe,Me,ee;p[Pe][le]!==K.componentFormData[le]&&le!=="componentType"&&(K.fieldProps[le]=K.componentFormData[le]),p[Pe][le]===K.componentFormData[le]&&le!=="componentType"&&((Oe=K.fieldProps)==null||delete Oe[le]),le==="componentType"&&((Fe=K.componentFormData)==null?void 0:Fe.componentType)==="multipleSelect"&&(K.fieldProps.multiple=!0),le==="componentType"&&((xe=K.componentFormData)==null?void 0:xe.componentType)==="datepicker"&&(K.fieldProps.component="daterange"),le==="componentType"&&((Me=K.componentFormData)==null?void 0:Me.componentType)==="slot"&&e!=="preview"&&(w.searchFormItem={slot:(ee=K.fieldFormData)==null?void 0:ee.slot})}),((c=(x=K.fieldProps)==null?void 0:x.alias)==null?void 0:c.label)==="label"&&((S=K.fieldProps)==null||delete S.alias.label),(($=(O=K.fieldProps)==null?void 0:O.alias)==null?void 0:$.disabled)==="disabled"&&((U=K.fieldProps)==null||delete U.alias.disabled),((H=(q=K.fieldProps)==null?void 0:q.alias)==null?void 0:H.value)==="value"&&((Z=K.fieldProps)==null||delete Z.alias.value),(te=K.fieldProps)==null||delete te.options,(ne=K==null?void 0:K.fieldProps)==null||delete ne.componentType,(ye=K==null?void 0:K.fieldProps)==null||delete ye.component,(Ce=K.formItemProps)==null||delete Ce.class,(Te=K.formItemProps)==null||delete Te.id,(ke=K.formItemProps)==null||delete ke.onClick,(Ee=K.formItemProps)==null||delete Ee.label,delete K.schema,delete K.icon,K.formItemProps&&Object.keys(K.formItemProps).forEach(le=>{var Oe,Fe;(Oe=K.formItemProps)!=null&&Oe[le]||(Fe=K.formItemProps)==null||delete Fe[le]}),wt(K.fieldProps),wt(K.formItemProps),K.fieldProps&&qe(K.fieldProps)&&delete K.fieldProps,K.formItemProps&&qe(K.formItemProps)&&delete K.formItemProps,m.forEach(le=>{delete K[le]})}if(w.type==="slot"){const K={slot:w.slot,label:w.label};return w.search&&(K.search=w.search),K}return w.type==="button"?(delete w.prop,w.buttons=(fe=k.buttons)==null?void 0:fe.map(K=>K.link?{link:K.link,type:K.type,label:K.label}:{type:K.type,label:K.label})):delete w.buttons,w.type&&!["sort","expand","index","radio","button"].includes(w.type)&&(w.component=w.type,delete w.type),m.forEach(K=>{delete w[K]}),Object.keys(w).forEach(K=>{Je[K]===w[K]&&delete w[K],(qe(w[K])||w[K]===""||w[K]===void 0)&&delete w[K]}),w}))||[],{config:b,columns:g}}return{formData:{},formConfig:{},options:{},columns:[]}}const _o=e=>e===void 0,ft=e=>typeof e=="number",mo=e=>typeof Element>"u"?!1:e instanceof Element,go=e=>At(e)?!Number.isNaN(Number(e)):!1,Ji=e=>Object.keys(e);function vo(e,a="px"){if(!e)return"";if(ft(e)||go(e))return`${e}${a}`;if(At(e))return e}const sa="__epPropKey",Bt=e=>e,bo=e=>xn(e)&&!!e[sa],ra=(e,a)=>{if(!xn(e)||bo(e))return e;const{values:n,required:i,default:s,type:t,validator:o}=e,r={type:t,required:!!i,validator:n||o?u=>{let f=!1,d=[];if(n&&(d=Array.from(n),Ki(e,"default")&&d.push(s),f||(f=d.includes(u))),o&&(f||(f=o(u))),!f&&d.length>0){const h=[...new Set(d)].map(v=>JSON.stringify(v)).join(", ");Va(`Invalid prop: validation failed${a?` for prop "${a}"`:""}. Expected one of [${h}], got value ${JSON.stringify(u)}.`)}return f}:void 0,[sa]:!0};return Ki(e,"default")&&(r.default=s),r},xi=e=>$a(Object.entries(e).map(([a,n])=>[a,ra(n,a)])),yo=Bt([String,Object,Function]),wo={Close:Ua,SuccessFilled:En,InfoFilled:Fn,WarningFilled:Pn,CircleCloseFilled:In},Gi={success:En,warning:Pn,error:In,info:Fn},ua=(e,a)=>{if(e.install=n=>{for(const i of[e,...Object.values(a??{})])n.component(i.name,i)},a)for(const[n,i]of Object.entries(a))e[n]=i;return e},Co=(e,a)=>(e.install=n=>{e._context=n._context,n.config.globalProperties[a]=e},e),To={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},ko=["","default","small","large"],So=e=>e;var Do={name:"en",el:{colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color."},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"}}};const Oo=e=>(a,n)=>xo(a,n,G(e)),xo=(e,a,n)=>qa(n,e,e).replace(/\{(\w+)\}/g,(i,s)=>{var t;return`${(t=a==null?void 0:a[s])!=null?t:`{${s}}`}`}),Eo=e=>{const a=j(()=>G(e).name),n=Ka(e)?e:Q(e);return{lang:a,locale:n,t:Oo(e)}},ca=Symbol("localeContextKey"),Po=e=>{const a=e||Ut(ca,Q());return Eo(j(()=>a.value||Do))},Ft="el",Io="is-",Ve=(e,a,n,i,s)=>{let t=`${e}-${a}`;return n&&(t+=`-${n}`),i&&(t+=`__${i}`),s&&(t+=`--${s}`),t},fa=Symbol("namespaceContextKey"),Fo=e=>{const a=e||(pt()?Ut(fa,Q(Ft)):Q(Ft));return j(()=>G(a)||Ft)},Ei=(e,a)=>{const n=Fo(a);return{namespace:n,b:(g="")=>Ve(n.value,e,g,"",""),e:g=>g?Ve(n.value,e,"",g,""):"",m:g=>g?Ve(n.value,e,"","",g):"",be:(g,m)=>g&&m?Ve(n.value,e,g,m,""):"",em:(g,m)=>g&&m?Ve(n.value,e,"",g,m):"",bm:(g,m)=>g&&m?Ve(n.value,e,g,"",m):"",bem:(g,m,p)=>g&&m&&p?Ve(n.value,e,g,m,p):"",is:(g,...m)=>{const p=m.length>=1?m[0]:!0;return g&&p?`${Io}${g}`:""},cssVar:g=>{const m={};for(const p in g)g[p]&&(m[`--${n.value}-${p}`]=g[p]);return m},cssVarName:g=>`--${n.value}-${g}`,cssVarBlock:g=>{const m={};for(const p in g)g[p]&&(m[`--${n.value}-${e}-${p}`]=g[p]);return m},cssVarBlockName:g=>`--${n.value}-${e}-${g}`}},Xi=Q(0),pa=2e3,da=Symbol("zIndexContextKey"),Ao=e=>{const a=e||(pt()?Ut(da,void 0):void 0),n=j(()=>{const t=G(a);return ft(t)?t:pa}),i=j(()=>n.value+Xi.value);return{initialZIndex:n,currentZIndex:i,nextZIndex:()=>(Xi.value++,i.value)}};ra({type:String,values:ko,required:!1});const Ro=Symbol("size"),ha=Symbol(),$t=Q();function _a(e,a=void 0){const n=pt()?Ut(ha,$t):$t;return e?j(()=>{var i,s;return(s=(i=n.value)==null?void 0:i[e])!=null?s:a}):n}function No(e,a){const n=_a(),i=Ei(e,j(()=>{var l;return((l=n.value)==null?void 0:l.namespace)||Ft})),s=Po(j(()=>{var l;return(l=n.value)==null?void 0:l.locale})),t=Ao(j(()=>{var l;return((l=n.value)==null?void 0:l.zIndex)||pa})),o=j(()=>{var l;return G(a)||((l=n.value)==null?void 0:l.size)||""});return Mo(j(()=>G(n)||{})),{ns:i,locale:s,zIndex:t,size:o}}const Mo=(e,a,n=!1)=>{var i;const s=!!pt(),t=s?_a():void 0,o=(i=a==null?void 0:a.provide)!=null?i:s?ja:void 0;if(!o)return;const l=j(()=>{const r=G(e);return t!=null&&t.value?Wo(t.value,r):r});return o(ha,l),o(ca,j(()=>l.value.locale)),o(fa,j(()=>l.value.namespace)),o(da,j(()=>l.value.zIndex)),o(Ro,{size:j(()=>l.value.size||"")}),(n||!$t.value)&&($t.value=l.value),l},Wo=(e,a)=>{var n;const i=[...new Set([...Ji(e),...Ji(a)])],s={};for(const t of i)s[t]=(n=a[t])!=null?n:e[t];return s},Yi={};var Pi=(e,a)=>{const n=e.__vccOpts||e;for(const[i,s]of a)n[i]=s;return n};const Lo=xi({size:{type:Bt([Number,String])},color:{type:String}}),zo=J({name:"ElIcon",inheritAttrs:!1}),Bo=J({...zo,props:Lo,setup(e){const a=e,n=Ei("icon"),i=j(()=>{const{size:s,color:t}=a;return!s&&!t?{}:{fontSize:_o(s)?void 0:vo(s),"--color":t}});return(s,t)=>(De(),$e("i",be({class:G(n).b(),style:G(i)},s.$attrs),[ki(s.$slots,"default")],16))}});var $o=Pi(Bo,[["__file","icon.vue"]]);const Qi=ua($o),Vo=xi({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),Uo=["textContent"],Ko=J({name:"ElBadge"}),qo=J({...Ko,props:Vo,setup(e,{expose:a}){const n=e,i=Ei("badge"),s=j(()=>n.isDot?"":ft(n.value)&&ft(n.max)?n.max<n.value?`${n.max}+`:`${n.value}`:`${n.value}`);return a({content:s}),(t,o)=>(De(),$e("div",{class:ze(G(i).b())},[ki(t.$slots,"default"),T(Rn,{name:`${G(i).namespace.value}-zoom-in-center`,persisted:""},{default:Pt(()=>[qt(gi("sup",{class:ze([G(i).e("content"),G(i).em("content",t.type),G(i).is("fixed",!!t.$slots.default),G(i).is("dot",t.isDot)]),textContent:An(G(s))},null,10,Uo),[[Kt,!t.hidden&&(G(s)||t.isDot)]])]),_:1},8,["name"])],2))}});var jo=Pi(qo,[["__file","badge.vue"]]);const Ho=ua(jo),ma=["success","info","warning","error"],Se=So({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:Nn?document.body:void 0}),Jo=xi({customClass:{type:String,default:Se.customClass},center:{type:Boolean,default:Se.center},dangerouslyUseHTMLString:{type:Boolean,default:Se.dangerouslyUseHTMLString},duration:{type:Number,default:Se.duration},icon:{type:yo,default:Se.icon},id:{type:String,default:Se.id},message:{type:Bt([String,Object,Function]),default:Se.message},onClose:{type:Bt(Function),required:!1},showClose:{type:Boolean,default:Se.showClose},type:{type:String,values:ma,default:Se.type},offset:{type:Number,default:Se.offset},zIndex:{type:Number,default:Se.zIndex},grouping:{type:Boolean,default:Se.grouping},repeatNum:{type:Number,default:Se.repeatNum}}),Go={destroy:()=>!0},Ne=Ha([]),Xo=e=>{const a=Ne.findIndex(s=>s.id===e),n=Ne[a];let i;return a>0&&(i=Ne[a-1]),{current:n,prev:i}},Yo=e=>{const{prev:a}=Xo(e);return a?a.vm.exposed.bottom.value:0},Qo=(e,a)=>Ne.findIndex(i=>i.id===e)>0?20:a,Zo=["id"],es=["innerHTML"],ts=J({name:"ElMessage"}),is=J({...ts,props:Jo,emits:Go,setup(e,{expose:a}){const n=e,{Close:i}=wo,{ns:s,zIndex:t}=No("message"),{currentZIndex:o,nextZIndex:l}=t,r=Q(),u=Q(!1),f=Q(0);let d;const h=j(()=>n.type?n.type==="error"?"danger":n.type:"info"),v=j(()=>{const k=n.type;return{[s.bm("icon",k)]:k&&Gi[k]}}),b=j(()=>n.icon||Gi[n.type]||""),g=j(()=>Yo(n.id)),m=j(()=>Qo(n.id,n.offset)+g.value),p=j(()=>f.value+m.value),y=j(()=>({top:`${m.value}px`,zIndex:o.value}));function R(){n.duration!==0&&({stop:d}=Ya(()=>{W()},n.duration))}function I(){d==null||d()}function W(){u.value=!1}function E({code:k}){k===To.esc&&W()}return Ie(()=>{R(),l(),u.value=!0}),Re(()=>n.repeatNum,()=>{I(),R()}),Ja(document,"keydown",E),Ga(r,()=>{f.value=r.value.getBoundingClientRect().height}),a({visible:u,bottom:p,close:W}),(k,w)=>(De(),je(Rn,{name:G(s).b("fade"),onBeforeLeave:k.onClose,onAfterLeave:w[0]||(w[0]=x=>k.$emit("destroy")),persisted:""},{default:Pt(()=>[qt(gi("div",{id:k.id,ref_key:"messageRef",ref:r,class:ze([G(s).b(),{[G(s).m(k.type)]:k.type&&!k.icon},G(s).is("center",k.center),G(s).is("closable",k.showClose),k.customClass]),style:Mn(G(y)),role:"alert",onMouseenter:I,onMouseleave:R},[k.repeatNum>1?(De(),je(G(Ho),{key:0,value:k.repeatNum,type:G(h),class:ze(G(s).e("badge"))},null,8,["value","type","class"])):yt("v-if",!0),G(b)?(De(),je(G(Qi),{key:1,class:ze([G(s).e("icon"),G(v)])},{default:Pt(()=>[(De(),je(Wn(G(b))))]),_:1},8,["class"])):yt("v-if",!0),ki(k.$slots,"default",{},()=>[k.dangerouslyUseHTMLString?(De(),$e(dt,{key:1},[yt(" Caution here, message could've been compromised, never use user's input as message "),gi("p",{class:ze(G(s).e("content")),innerHTML:k.message},null,10,es)],2112)):(De(),$e("p",{key:0,class:ze(G(s).e("content"))},An(k.message),3))]),k.showClose?(De(),je(G(Qi),{key:2,class:ze(G(s).e("closeBtn")),onClick:Xa(W,["stop"])},{default:Pt(()=>[T(G(i))]),_:1},8,["class","onClick"])):yt("v-if",!0)],46,Zo),[[Kt,u.value]])]),_:3},8,["name","onBeforeLeave"]))}});var ns=Pi(is,[["__file","message.vue"]]);let as=1;const ga=e=>{const a=!e||At(e)||ht(e)||vi(e)?{message:e}:e,n={...Se,...a};if(!n.appendTo)n.appendTo=document.body;else if(At(n.appendTo)){let i=document.querySelector(n.appendTo);mo(i)||(i=document.body),n.appendTo=i}return n},ls=e=>{const a=Ne.indexOf(e);if(a===-1)return;Ne.splice(a,1);const{handler:n}=e;n.close()},os=({appendTo:e,...a},n)=>{const i=`message_${as++}`,s=a.onClose,t=document.createElement("div"),o={...a,id:i,onClose:()=>{s==null||s(),ls(f)},onDestroy:()=>{qi(null,t)}},l=T(ns,o,vi(o.message)||ht(o.message)?{default:vi(o.message)?o.message:()=>o.message}:null);l.appContext=n||Ze._context,qi(l,t),e.appendChild(t.firstElementChild);const r=l.component,f={id:i,vnode:l,vm:r,handler:{close:()=>{r.exposed.visible.value=!1}},props:l.component.props};return f},Ze=(e={},a)=>{if(!Nn)return{close:()=>{}};if(ft(Yi.max)&&Ne.length>=Yi.max)return{close:()=>{}};const n=ga(e);if(n.grouping&&Ne.length){const s=Ne.find(({vnode:t})=>{var o;return((o=t.props)==null?void 0:o.message)===n.message});if(s)return s.props.repeatNum+=1,s.props.type=n.type,s.handler}const i=os(n,a);return Ne.push(i),i.handler};ma.forEach(e=>{Ze[e]=(a={},n)=>{const i=ga(a);return Ze({...i,type:e},n)}});function ss(e){for(const a of Ne)(!e||e===a.props.type)&&a.handler.close()}Ze.closeAll=ss;Ze._context=null;const _t=Co(Ze,"$message");function va(){const e=N(),a=N();return{newFormItem:{id:a,name:"tableForm",component:"input",title:"表单项",field:e,icon:"icon-biaodanxiang",label:"标签",formItemProps:{id:`schema-field${a}`,onClick:i=>{Xe.emit("form-item-click",{event:i,id:a})}},componentFormData:z({...Qe,componentType:"input"}),componentSchema:[wi,...Lt],componentOptionsConfig:{componentType:Le},fieldFormData:z({field:e,default:""}),fieldSchema:oe({defaultComponent:"el-input"}),formItemFormData:z({label:"标签",tooltip:"",extra:""}),formItemTemplateSchema:[{component:"input",field:"label",label:"标签"},{component:"input",field:"tooltip",label:"提示"},{component:"input",field:"extra",label:"额外信息"}],formItemOptionsConfig:re,activeCollapseItems:["field","component","formItem"],allowCopy:!0,allowDelete:!0},prop:e}}function rs(){const e=N();return{newFormItem:{id:N(),name:"tableForm",component:"select",title:"表单项",field:e,icon:"",schema:{},label:"标签",fieldProps:{...zt,multiple:!0},componentFormData:z({...zt,componentType:"multipleSelect"}),componentSchema:[{component:"select",field:"componentType",label:"组件类别"},...Vn],componentOptionsConfig:{componentType:Le},fieldFormData:z({field:e,default:[]}),fieldSchema:oe({defaultComponent:"select",defaultProps:{multiple:!0},required:!0}),fieldOptionsConfig:{default:[{label:"标签1",value:"1",key:N()},{label:"标签2",value:"2",key:N()}]},formItemFormData:z({label:"标签",tooltip:"",extra:""}),formItemTemplateSchema:[{component:"input",field:"label",label:"标签"},{component:"input",field:"tooltip",label:"提示"},{component:"input",field:"extra",label:"额外信息"}],formItemOptionsConfig:re,activeCollapseItems:["field","component","formItem"],allowCopy:!0,allowDelete:!0},prop:e}}function us(){const e=N(),a=N();return{newFormItem:{id:N(),name:"tableForm",component:"el-date-picker",title:"表单项",field:e,icon:"icon-riqiqujian",label:"标签",formItemProps:{id:`schema-field${a}`,onClick:i=>{Xe.emit("form-item-click",{event:i,id:a})}},componentFormData:z({...Wt,componentType:"el-date-picker"}),componentSchema:[{component:"select",field:"componentType",label:"组件类别"},...zn],componentOptionsConfig:{componentType:Le},fieldProps:{...Wt,type:"daterange"},fieldFormData:z({field:e,default:[]}),fieldSchema:oe({defaultComponent:"input"}),formItemFormData:z({label:"标签",tooltip:"",extra:""}),formItemTemplateSchema:[{component:"input",field:"label",label:"标签"},{component:"input",field:"tooltip",label:"提示"},{component:"input",field:"extra",label:"额外信息"}],formItemOptionsConfig:re,activeCollapseItems:["field","component","formItem"],allowCopy:!0,allowDelete:!0},prop:e}}function cs(){const e=N();return{newFormItem:{id:N(),name:"tableForm",type:"placeholder-block",title:"插槽",field:e,icon:"",schema:{},label:"插槽",componentFormData:z({componentType:"slot"}),componentSchema:[{component:"select",field:"componentType",label:"组件类别"}],componentOptionsConfig:{componentType:Le},fieldFormData:z({field:"slot",slot:"slot"}),fieldSchema:[{component:"input",field:"prop",label:"字段名"},{component:"input",field:"slot",label:"插槽名"}],formItemFormData:{},formItemTemplateSchema:[],formItemOptionsConfig:{},activeCollapseItems:["field","component","formItem"],allowCopy:!0,allowDelete:!0},prop:e}}function fs(){const e=N();return{newFormItem:{id:N(),name:"tableForm",component:"select",title:"表单项",field:e,icon:"",schema:{},label:"标签",componentFormData:z({...ct,componentType:"select"}),componentSchema:[{component:"select",field:"componentType",label:"组件类别"},...jn],componentOptionsConfig:{componentType:Le},fieldProps:{...ct},fieldFormData:z({field:e,default:""}),fieldSchema:oe({defaultComponent:"input"}),formItemFormData:z({label:"标签",tooltip:"",extra:""}),formItemTemplateSchema:[{component:"input",field:"label",label:"标签"},{component:"input",field:"tooltip",label:"提示"},{component:"input",field:"extra",label:"额外信息"}],formItemOptionsConfig:re,activeCollapseItems:["field","component","formItem"],allowCopy:!0,allowDelete:!0},prop:e}}const ps=J({name:"TableActionsWidget",setup(e,{slots:a}){const{widgets:n,updateWidgets:i,updateActiveWidget:s}=ae(),t=[{icon:"i-plus",label:"添加表格项",click:()=>{const o=N(),l={name:"tableCol",prop:o,label:"title",title:"表格项",id:N(),componentSchema:He,componentOptionsConfig:rt,componentFormData:z({...Je,prop:o,field:o,label:"title"}),icon:"icon-biaoge-lie",activeCollapseItems:["column"],allowCopy:!0,allowDelete:!0};let r=0;const u=n.value[0].schema.columns;u.forEach((f,d)=>{f.id&&r<d&&(r=d)}),u[r+1]?u[r+1]={...u[r+1],...l}:u[r+1]=l,i([{...n.value[0],schema:{...n.value[0].schema,cellClassName:({columnIndex:f})=>u[f]?`schema-field${u[f].id}`:"",columns:u}}],"添加组件")}},{icon:"i-plus",label:"添加表单项",click:()=>{let o=0;const{newFormItem:l}=va(),r=n.value[0].schema.columns;r.forEach((f,d)=>{f.search&&o<d&&(o=d)}),r[o+1]?r[o+1].search=l:r[o+1]={search:l};const u={...n.value[0],schema:{...n.value[0].schema}};i([u],"添加组件"),s(u)}}];return()=>T("div",null,[a.default&&a.default(),T("div",{class:"table-pro-actions__container"},[T(L("el-divider"),{"border-style":"dashed"},{default:()=>[T("div",{class:"flex"},[t.map((o,l)=>T(dt,null,[T("span",{class:"table-pro-actions__text",onClick:()=>o.click()},[T(L("el-icon"),{size:10},{default:()=>[T(L("i-plus"),null,null)]}),o.label]),l!==t.length-1&&T(L("el-divider"),{direction:"vertical"},null)]))])]})])])}});function ds(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ht(e)}const Zi=J({name:"WorkspaceComponent",emits:["on-add-item","on-update-cur-operate"],props:{widgets:{type:Array,default:()=>[]},activeWidget:{type:Object,default:()=>({})},formData:{type:Object,default:()=>({})},needFlex:{type:Boolean,default:!1},needVueDraggable:{type:Boolean,default:!0}},setup(e,{emit:a}){const{activeWidget:n,widgets:i,updateActiveWidget:s,updateWidgets:t,simulatorType:o}=ae(),{workspaceWidgetType:l}=ve(),{formConfig:r}=Ue();let u=null,f=!0;const d=Q(new Date().valueOf());Ie(()=>{Xe.on("form-item-click",({event:x,id:c})=>{var O,$,U;if(x==null||x.stopPropagation(),x==null||x.preventDefault(),e.activeWidget.id===c)return;let S={};(U=($=(O=i.value[0])==null?void 0:O.schema)==null?void 0:$.columns)==null||U.forEach(q=>{var H,Z;((Z=(H=q.search)==null?void 0:H.formItemProps)==null?void 0:Z.id)===`schema-field${c}`&&(S={...q.search})}),a("on-update-cur-operate",S)})}),et(()=>{Xe.off("form-item-click")}),Re(()=>n.value,()=>{f&&(d.value=new Date().valueOf()),f=!0});const h=x=>{o.value==="pad"&&x.stopPropagation()},v=(x,c)=>{x.preventDefault(),x.stopPropagation(),e.activeWidget.id!==c.id&&a("on-update-cur-operate",c)},b=x=>{u=e.widgets[x.oldIndex]},g=x=>{var S;const c=[...i.value];if(!Array.from(x.from.classList).includes("array-form")&&Array.from(x.to.classList).includes("array-form")){const O=k(Array.from(x.to.classList));((S=E(O).schema.fieldProps)==null?void 0:S.columns).splice(x.newIndex,0,u),t(c,"排序更改"),d.value=new Date().valueOf()}l.value==="form"&&a("on-update-cur-operate",u)},m=({columnIndex:x})=>{var S;const c=((S=e.widgets[0].schema.columns)==null?void 0:S.filter(O=>O.prop))||[];if(c[x])return`schema-field${c[x].id}`},p=(x,c)=>{var U;if(c.preventDefault(),c.stopPropagation(),x.className==="inline-column-operation"){_t.warning("内置操作列暂无法被拖拽排序，如想自定义操作列，请将配置项内置操作关闭");return}const S=x.getColumnIndex(),$=(((U=i.value[0].schema.columns)==null?void 0:U.filter(q=>q.prop))||[])[S];s($)},y=({columns:x,dragEvent:c})=>{const S=c.oldIndex,O=c.newIndex,$=x[O],q=i.value[0].schema;if(q.columns&&q.columns.length){const H=[...q.columns],Z={...q.columns[S].search},te={...q.columns[O].search};H[O].search=Z,H[S].search=te,s($)}},R=(x,c,S)=>{const O=i.value[0],$=O.schema;if($.columns&&$.columns.length){const U=me($.columns.filter(te=>te.prop)),q=$.columns.filter(te=>te.search),H={...U[S]},Z={...U[c]};U[c]=H,U[S]=Z,U.length>=q.length?U.forEach((te,ne)=>{delete te.search,q[ne]&&(te.search=q[ne].search)}):q.forEach((te,ne)=>{U[ne]||(U[ne]={}),U[ne].search=q[ne].search}),t([{...O,schema:{...O.schema,columns:[...U],cellClassName:({columnIndex:te})=>`schema-field${U[te].id}`}}],"排序更改"),s(x),d.value=new Date().valueOf()}},I=x=>{s(x)},W=async x=>{f=!1,s(x)};function E(x){let c={};return i.value.forEach(S=>{var O,$,U;S.id===x&&(c=S),($=(O=S.schema.fieldProps)==null?void 0:O.columns)!=null&&$.length&&!c&&((U=S.schema.fieldProps)==null||U.columns.forEach(q=>{q.id===x&&(c=q)}))}),c}function k(x){return(x.find(S=>S.includes("schema-field"))||"").split("-")[2]}const w=(x,c)=>{var O,$,U;const S=[...i.value];if(Array.from(c.from.classList).includes("array-form")&&Array.from(c.to.classList).includes("array-form")){const q=k(Array.from(c.to.classList)),H=k(Array.from(c.from.classList)),{data:Z,parentData:te}=yi(q,i.value),{data:ne,parentData:ye}=yi(H,i.value),Ce=te||Z,Te=ye||ne,ke=[...(O=Ce.schema.fieldProps)==null?void 0:O.columns],Ee=[...($=Te.schema.fieldProps)==null?void 0:$.columns],fe=Ee[c.oldIndex];if(Ee.splice(c.oldIndex,1),H===q)Ee.splice(c.newIndex,0,fe);else{ke.splice(c.newIndex,0,fe);const Pe=S.findIndex(le=>le.id===Ce.id);S.splice(Pe,1,Qt(Ce,"schema.fieldProps.columns",ke))}const K=S.findIndex(Pe=>Pe.id===Te.id);S.splice(K,1,Qt(Te,"schema.fieldProps.columns",Ee)),t(S,"排序更改")}if(Array.from(c.from.classList).includes("array-form")&&!Array.from(c.to.classList).includes("array-form")){const q=k(Array.from(c.item.classList)),H=S.findIndex(ne=>ne.id===x.id),Z=[...(U=x.schema.fieldProps)==null?void 0:U.columns],te=Z.findIndex(ne=>ne.id===q);Z.splice(te,1),S.splice(H,1,Qt(x,"schema.fieldProps.columns",Z)),t(S,"排序更改")}d.value=new Date().valueOf()};return()=>{let x;const{formData:c,options:S}=he();return T(bi,{modelValue:e.widgets,class:["dragArea list-group h-full w-full",r.value.column>1&&"multiple-layout"],animation:200,group:"people",filter:".not-drag",ghostClass:l.value!=="crud"&&"ghost","item-key":"id","onUpdate:modelValue":O=>t(O,"排序更改"),onStart:b,onEnd:g,key:d.value},ds(x=e.widgets.map(O=>{const{colKls:$,colStyle:U}=Qa(r.value,O.schema);return T("div",{id:`schema-field${O.id}`,key:O.id,class:["w-full",$.value,"form-item-schema-container"],style:{...U.value,marginBottom:"22px"},onClick:q=>v(q,O),onMousedown:h,onMouseup:h},[l.value==="crud"?T(ps,null,{default:()=>[T(L("z-crud"),be({id:O.id,key:d.value,class:"tablePro"},{...O.schema,cellClassName:m},{style:{zIndex:1},pid:O.children?O.id:"","onUpdate:columns":y,"onDrag-column-end":R,"onOn-form-item-click":(q,H)=>v(q,H),"onCell-click":({},q,{},H)=>p(q,H),"onHeader-click":(q,H)=>p(q,H)}),null)]}):T(L("z-form-item"),{formConfig:{...r.value,draggable:!1},id:O.id,key:O.schema.id,modelValue:c,draggableId:O.id,options:S,style:{zIndex:1},col:O.schema,class:O.schema.title==="Col"?["not-drag"]:"","onForm-item-click":I,"onForm-item-mousedown":W,"onArray-form-draggable-end":q=>w(O,q),"onUpdate:columns":y},null)])}))?x:{default:()=>[x]})}}}),hs=J({name:"TableProFormItemSettingForm",setup(){const{activeWidget:e,widgets:a,updateWidgets:n,updateActiveWidget:i}=ae(),s=z({labelPosition:"left",labelWidth:"120px",colon:!1}),t=(u,f,d)=>{const h=a.value[0];let v=[];f.columns&&f.columns.length&&(v=f.columns.map((g,m)=>g.search&&g.search.id===u.id?{...g,search:u}:g),Za(()=>{n([{...h,schema:{...f,formData:{...f.formData,[d.formData.field]:d.formData.default},columns:v}}])},50)()),i(u)},o=u=>{const f={...e.value,field:u.formData.field,fieldFormData:u.formData},h=a.value[0].schema;t(f,h,u)},l=u=>{var f,d,h;if(u.field==="componentType"&&e.value.type!==u.value){if(u.value==="select"){const v={...e.value,component:"select",fieldProps:{...ct},componentSchema:[{component:"select",field:"componentType",label:"组件类别"},...me(jn)],componentFormData:z({...ct,componentType:"select"}),componentOptionsConfig:{componentType:Le}},b=a.value[0],g={...b.schema,searchFormData:{...b.schema.searchFormData,[u.field]:u.value},options:{...b.schema.options,[u.field]:[{label:"标签",value:"1",key:N()}]}};t(v,g,u)}if(u.value==="multipleSelect"){const v={...e.value,component:"select",fieldProps:{...zt,multiple:!0},fieldOptionsConfig:{default:[{label:"标签1",value:"1",key:N()},{label:"标签2",value:"2",key:N()}]},componentSchema:[{component:"select",field:"componentType",label:"组件类别"},...me(Vn)],componentFormData:z({...zt,componentType:"multipleSelect"}),fieldFormData:z({...e.value.fieldFormData,default:[]}),componentOptionsConfig:{componentType:Le}},b=a.value[0],g={...b.schema,searchFormData:{...b.schema.searchFormData,[u.field]:u.value},options:{...b.schema.options,[u.field]:[{label:"标签",value:"1",key:N()}]}};t(v,g,u)}if(u.value==="input"){const v={...e.value,component:"input",fieldProps:z({...Qe}),componentSchema:[{component:"select",field:"componentType",label:"组件类别"},...me(Lt)],componentFormData:z({...Qe,componentType:"input"}),componentOptionsConfig:{componentType:Le}},g=a.value[0].schema;t(v,g,u)}if(u.value==="el-date-picker"){const v={...e.value,component:"el-date-picker",fieldProps:z({...Wt,type:"daterange"}),componentSchema:[{component:"select",field:"componentType",label:"组件类别"},...me(zn)],componentFormData:z({...Wt,componentType:"el-date-picker"}),fieldFormData:z({...e.value.fieldFormData,default:[]}),componentOptionsConfig:{componentType:Le}},b=a.value[0],g={...b.schema,searchFormData:{...b.schema.searchFormData,[u.field]:u.value}};t(v,g,u)}if(u.value==="slot"){const v={...e.value,component:"placeholder-block",componentSchema:[{component:"select",field:"componentType",label:"组件类别"}],componentFormData:z({componentType:"slot"}),componentOptionsConfig:{componentType:Le},formItemFormData:{},formItemTemplateSchema:[],formItemOptionsConfig:{},fieldFormData:z({field:"slot",slot:"slot"}),fieldSchema:[{component:"input",field:"field",label:"字段名"},{component:"input",field:"slot",label:"插槽名"}]},b=a.value[0],g={...b.schema,searchFormData:{...b.schema.searchFormData,[u.field]:u.value}};t(v,g,u)}}else{const v={...e.value,fieldOptionsConfig:{default:u.field==="options"?u.formData.options:((f=e.value.fieldOptionsConfig)==null?void 0:f.default)||[]},fieldProps:{...e.value.fieldProps,...u.formData}};if(u.field==="alias.value"){const m=(d=v.componentFormData)==null?void 0:d.options.map(p=>({...p,[u.value]:p.value}));v.componentFormData.options=[...m],v.fieldProps.options=[...m]}if(u.field==="alias.label"){const m=(h=v.componentFormData)==null?void 0:h.options.map(p=>({...p,[u.value]:p.label}));v.componentFormData.options=[...m],v.fieldProps.options=[...m]}const g=a.value[0].schema;t(v,g,u)}},r=u=>{const f={...e.value,...u.formData},h=a.value[0].schema;t(f,h,u)};return()=>T("div",{class:"form-content"},[T(L("el-collapse"),{modelValue:e.value.activeCollapseItems,"onUpdate:modelValue":u=>e.value.activeCollapseItems=u},{default:()=>[T(L("el-collapse-item"),{title:"字段属性",name:"field"},{default:()=>[T(L("z-form"),be({modelValue:e.value.fieldFormData,"onUpdate:modelValue":u=>e.value.fieldFormData=u},s,{key:e.value.id,columns:e.value.fieldSchema,options:e.value.fieldOptionsConfig,onChange:o}),null)]}),e.value.componentSchema&&e.value.componentSchema.length?T(L("el-collapse-item"),{title:"组件属性",name:"component"},{default:()=>[T(L("z-form"),be({modelValue:e.value.componentFormData,"onUpdate:modelValue":u=>e.value.componentFormData=u},s,{key:e.value.id,columns:e.value.componentSchema,options:e.value.componentOptionsConfig,onChange:l}),null)]}):null,e.value.formItemTemplateSchema&&Array.isArray(e.value.formItemTemplateSchema)?T(L("el-collapse-item"),{title:"容器属性",name:"formItem"},{default:()=>[T(L("z-form"),be({modelValue:e.value.formItemFormData,"onUpdate:modelValue":u=>e.value.formItemFormData=u},s,{key:e.value.id,columns:e.value.formItemTemplateSchema,options:e.value.formItemOptionsConfig,onChange:r}),null)]}):null]})])}}),_s=J({name:"CrudSettingForm",setup(){const{activeWidget:e,widgets:a,updateActiveWidget:n,updateWidgets:i}=ae(),s=z({labelPosition:"left",labelWidth:"120px",colon:!1}),t=l=>{const r=a.value[0],u={...r.schema,search:{...r.schema.search,...l.formData}};l.formData.collapsed?u.collapsed=!0:u.collapsed=!1;const f={...r,fieldFormData:z({...e.value.fieldFormData,...l.formData}),schema:u};n(f),i([f])},o=l=>{var v,b;const r=a.value[0],u=me(r.schema);let f=[];l.formData.pagination===!1?delete u.pagination:u.pagination={page:1,pageSize:10,total:0},l.formData.action?u.action=!0:(u.action=!1,l.field==="action"&&l.value===!1&&((v=u.columns)!=null&&v.some(m=>m.type==="button")||(f=[ia]))),l.formData.tableDecorator!=="el-card"?u.tableDecorator={name:l.value}:delete u.tableDecorator,l.formData.formDecorator!=="el-card"?u.formDecorator={name:l.value}:delete u.formDecorator,l.formData.rowKey!=="id"&&(u.rowKey=l.formData.rowKey),u.size=l.formData.size;const d=(b=u.columns)==null?void 0:b.concat(f),h={...r,componentFormData:{...r.componentFormData,...l.formData},schema:{...u,columns:d}};n(h),i([h])};return()=>T("div",{class:"form-content"},[T(L("el-collapse"),{modelValue:e.value.activeCollapseItems,"onUpdate:modelValue":l=>e.value.activeCollapseItems=l},{default:()=>[T(L("el-collapse-item"),{title:"表单属性",name:"form"},{default:()=>[T(L("z-form"),be({modelValue:e.value.fieldFormData,"onUpdate:modelValue":l=>e.value.fieldFormData=l},s,{key:e.value.id,columns:e.value.fieldSchema,onChange:t}),null)]}),T(L("el-collapse-item"),{title:"表格属性",name:"table"},{default:()=>[T(L("z-form"),be({modelValue:e.value.componentFormData,"onUpdate:modelValue":l=>e.value.componentFormData=l},s,{key:e.value.id,columns:e.value.componentSchema,options:e.value.componentOptionsConfig,onChange:o}),null)]})]})])}}),ms=J({name:"CrudTableColumnSettingForm",setup(){const{activeWidget:e,widgets:a,updateWidgets:n,updateActiveWidget:i}=ae(),s=z({labelPosition:"left",labelWidth:"120px",colon:!1}),t=o=>{var d;const l=a.value[0],r=l.schema;let u=[];const f={...e.value,componentFormData:{...e.value.componentFormData,...o.formData},...o.formData};o.formData.type==="slot"?(f.type="slot",f.componentSchema=h=>[...He(h),{component:"input",field:"slot",label:"插槽名",hide:()=>h.type!=="slot"}]):f.componentFormData.slot="",o.formData.type==="default"&&(delete f.type,delete f.buttons),o.formData.type==="button"&&!f.buttons&&(f.buttons=[{key:N(),type:"primary",link:!0,label:"编辑"},{type:"primary",link:!0,label:"删除",key:N()}],f.componentFormData.buttons=f.buttons),u=((d=r.columns)==null?void 0:d.map(h=>h.id===e.value.id?f:h))||[],n([{...l,schema:{...r,columns:u}}]),i(f)};return()=>T("div",{class:"form-content"},[T(L("el-collapse"),{modelValue:e.value.activeCollapseItems,"onUpdate:modelValue":o=>e.value.activeCollapseItems=o},{default:()=>[T(L("el-collapse-item"),{title:"列属性",name:"column"},{default:()=>[T(L("z-form"),be({modelValue:e.value.componentFormData,"onUpdate:modelValue":o=>e.value.componentFormData=o},s,{key:e.value.id,columns:el(e.value.componentSchema)?e.value.componentSchema(e.value.componentFormData):e.value.componentSchema,options:e.value.componentOptionsConfig,onChange:t}),null)]})]})])}}),gs=J({name:"FormItemSettingForm",setup(){const{activeWidget:e,updateActiveWidget:a,updateWidget:n}=ae(),i=z({labelPosition:"left",labelWidth:"120px",colon:!1}),s=l=>{var f,d,h,v,b,g;const r=me(l);let u={};if(e.value&&e.value.id){if(u={...e.value,componentFormData:r.formData,fieldOptionsConfig:{default:r.field==="options"?l.formData.options:((f=e.value.fieldOptionsConfig)==null?void 0:f.default)||[]},schema:{...e.value.schema,fieldProps:{...(d=e.value.schema)==null?void 0:d.fieldProps,...r.formData}}},l.field==="alias.value"){const m=(h=u.componentFormData)==null?void 0:h.options.map(p=>({...p,[l.value]:p.value}));u.componentFormData.options=[...m],u.schema.fieldProps.options=[...m]}if(l.field==="alias.label"){const m=(v=u.componentFormData)==null?void 0:v.options.map(p=>({...p,[l.value]:p.label}));u.componentFormData.options=[...m],u.schema.fieldProps.options=[...m]}if(l.field==="multiple"&&l.value){const m=(b=u.componentFormData)==null?void 0:b.options.map(p=>{var y,R,I,W,E,k,w,x;return{[((R=(y=p.fieldProps)==null?void 0:y.alias)==null?void 0:R.label)||((W=(I=p.fieldsProps)==null?void 0:I.props)==null?void 0:W.label)||"label"]:p.label,[((k=(E=p.fieldProps)==null?void 0:E.alias)==null?void 0:k.value)||((x=(w=p.fieldsProps)==null?void 0:w.props)==null?void 0:x.value)||"value"]:p.value}});u.fieldSchema=oe({defaultComponent:"select",required:!0,defaultProps:{multiple:!0}}),u.fieldFormData=z({...u.fieldFormData,default:[]}),u.componentFormData.options=[...m],u.schema.fieldProps.options=[...m]}if(l.field==="multiple"&&!l.value){const m=(g=u.componentFormData)==null?void 0:g.options.map(p=>{var y,R,I,W,E,k,w,x;return{[((R=(y=p.fieldProps)==null?void 0:y.alias)==null?void 0:R.label)||((W=(I=p.fieldsProps)==null?void 0:I.props)==null?void 0:W.label)||"label"]:p.label,[((k=(E=p.fieldProps)==null?void 0:E.alias)==null?void 0:k.value)||((x=(w=p.fieldsProps)==null?void 0:w.props)==null?void 0:x.value)||"value"]:p.value}});u.fieldSchema=oe({defaultComponent:"select",required:!0}),u.fieldFormData=z({...u.fieldFormData,default:""}),u.componentFormData.options=[...m],u.schema.fieldProps.options=[...m]}}a(u),n(u)},t=l=>{const r=me(l);let u={};e.value&&e.value.id&&(u={...e.value,formItemFormData:r.formData,schema:{...e.value.schema,...r.formData}}),a(u),n(u)},o=l=>{const r=me(l);let u={};e.value&&e.value.id&&(u={...e.value,fieldFormData:z({...e.value.fieldFormData}),componentFormData:z({...e.value.componentFormData}),schema:{...e.value.schema,required:!!r.formData.required,field:r.formData.field}}),a(me(u)),n(me(u))};return()=>T("div",{class:"form-content"},[T(L("el-collapse"),{modelValue:e.value.activeCollapseItems,"onUpdate:modelValue":l=>e.value.activeCollapseItems=l},{default:()=>{var l;return[T(L("el-collapse-item"),{title:"字段属性",name:"field"},{default:()=>[T(L("z-form"),be({modelValue:e.value.fieldFormData,"onUpdate:modelValue":r=>e.value.fieldFormData=r},i,{key:e.value.id,columns:e.value.fieldSchema,options:e.value.fieldOptionsConfig,onChange:o}),null)]}),e.value.componentSchema&&((l=e.value.componentSchema)!=null&&l.length)?T(L("el-collapse-item"),{title:"组件属性",name:"component"},{default:()=>[T(L("z-form"),be({key:e.value.id,modelValue:e.value.componentFormData,"onUpdate:modelValue":r=>e.value.componentFormData=r},i,{columns:e.value.componentSchema,options:e.value.componentOptionsConfig,onChange:s}),null)]}):null,e.value.formItemTemplateSchema&&Array.isArray(e.value.formItemTemplateSchema)&&T(L("el-collapse-item"),{title:"容器属性",name:"formItem"},{default:()=>[T(L("z-form"),be({modelValue:e.value.formItemFormData,"onUpdate:modelValue":r=>e.value.formItemFormData=r},i,{key:e.value.id,columns:e.value.formItemTemplateSchema,options:e.value.formItemOptionsConfig,onChange:t}),null)]})]}})])}}),vs=J({name:"SettingForm",setup(){const{activeWidget:e,widgets:a}=ae(),{formConfig:n,setFormConfig:i}=Ue(),s=z({labelPosition:"left",labelWidth:"120px",colon:!1}),t=Q({background:"page",labelPosition:"right",labelWidth:"100px",size:"default",colon:!1,labelSuffix:"",disabled:!1,hideRequiredAsterisk:!1,showMessage:!0,inlineMessage:!1,statusIcon:!1,validateOnRuleChange:!0,scrollToError:!1,requireAsteriskPosition:"left",column:1}),o=l=>{i({...n.value,[l.field]:l.value})};return()=>{var l,r;return!e.value.id&&((r=(l=a.value)==null?void 0:l[0])==null?void 0:r.name)==="crud"?null:e.value.id?e.value.name==="tableCol"?T(ms,null,null):e.value.name==="crud"?T(_s,null,null):a.value&&a.value.length&&a.value[0].name==="crud"?T(hs,null,null):T(gs,null,null):T("div",{class:"form-content"},[T(L("z-form"),be({options:yl,modelValue:t.value,"onUpdate:modelValue":u=>t.value=u},s,{columns:bl,onChange:o}),null)])}}}),bs=J({name:"ViewPort",setup(){const{formData:e,formConfig:a}=Ue(),{pushWidget:n,updateActiveWidget:i,widgets:s,activeWidget:t}=ae(),{workspaceWidgetType:o}=ve(),l=(u,f,d)=>{n(u,f,d)},r=()=>{o.value!=="crud"?i({}):i(s.value[0])};return()=>T("div",{id:"view-port",class:"view-port",onClick:r},[t.value.name==="crud"?T(Zi,{widgets:s.value,activeWidget:t.value,formData:e.value,"onOn-update-cur-operate":u=>i(u),"onOn-add-item":l},null):T(L("z-form"),be({class:"h-full",modelValue:e.value},a.value),{default:()=>[T(Zi,{widgets:s.value,activeWidget:t.value,formData:e.value,"onOn-update-cur-operate":u=>i(u),"onOn-add-item":l},null)]})])}});function ei(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ht(e)}const ys=J({name:"ComponentList",components:{VueDraggable:bi},props:{componentList:{type:Array,default:()=>[]}},emits:["click-component-item"],setup(e,{emit:a}){const{widgets:n,updateActiveWidget:i}=ae(),{workspaceWidgetType:s}=ve();let t=null;const o=Q(["基础组件","高阶组件"]),l=h=>{e.componentList.forEach(v=>{v.components.forEach(b=>{b.title===h.item.innerText&&(t={...me(b),id:N()})})})},r=h=>{var v;if(h.to!==h.from)if(Array.from(h.to.classList).includes("array-form")){const b=f(Array.from(h.to.classList)),m=(v=u(b).schema.fieldProps)==null?void 0:v.columns,p={...t,id:N()};m.splice(h.newIndex,0,p),i(p)}else a("click-component-item",t,h.newIndex,h.to.id)};function u(h){let v=null;return n.value.forEach(b=>{var g,m,p;b.id===h&&(v=b),(m=(g=b.schema.fieldProps)==null?void 0:g.columns)!=null&&m.length&&!v&&((p=b.schema.fieldProps)==null||p.columns.forEach(y=>{y.id===h&&(v=y)}))}),v}function f(h){return h.find(b=>b.includes("schema-field")).split("-")[2]}const d=()=>{};return()=>{let h;return T(L("el-collapse"),{modelValue:o.value,"onUpdate:modelValue":v=>o.value=v},ei(h=e.componentList.map(v=>{let b;return T(dt,null,[T(L("el-collapse-item"),{title:v.collapseTitle,name:v.collapseTitle},{default:()=>[v.collapseTitle==="基础组件"&&s.value==="crud"&&T(L("el-alert"),{title:"表单筛选暂时只支持输入框、单选框、多选框、日期范围和插槽拖拽",type:"warning"},null),T("div",{class:"content-wrapper"},[T(bi,{class:"dragArea","ghost-class":"nihao","chosen-class":"chosen",modelValue:v.components,"onUpdate:modelValue":g=>v.components=g,group:{name:"people",pull:"clone",put:!1},clone:d,sort:!1,"item-key":"icon",onChoose:l,onEnd:r},ei(b=v.components.map(g=>{let m;return T("div",{class:"list-item"},[T("span",{class:"list-item-icon"},[g.icon.startsWith("i-")?T(L("el-icon"),{size:"20"},ei(m=Rt(L(g.icon)))?m:{default:()=>[m]}):T(L("el-icon"),{size:"20"},{default:()=>[T("i",{class:[g.icon,"iconfont"]},null)]})]),T("span",{class:"list-item-text"},[g.title])])}))?b:{default:()=>[b]})])]})])}))?h:{default:()=>[h]})}}}),ws=J({name:"ComponentWidget",setup(){const{updateWidgets:e,pushWidget:a,updateActiveWidget:n,widgets:i}=ae(),{workspaceWidgetType:s,updateWorkspaceComponentType:t}=ve(),o={输入框:va,选择框:fs,多选框:rs,日期范围:us,插槽:cs},l=(r,u,f)=>{var d,h,v;if(s.value==="crud"&&f){if(r.title==="输入框"||r.title==="选择框"||r.title==="多选框"||r.title==="日期范围"||r.title==="插槽"){const b=i.value[0],g=b.schema;let m=[];const p=[],{newFormItem:y,prop:R}=o[r.title]();if(g.columns&&g.columns.length){const I=me(g.columns);I.forEach(k=>{k.search&&p.push(k.search)}),p.splice(u,0,y),m=I.map((k,w)=>(p[w]&&(k.search=p[w]),k));const W={...b.schema.options};r.title==="选择框"&&(W[R]=[{label:"标签",value:"1",key:N()}]);const E={...b,schema:{...b.schema,formData:{...i.value[0].schema.formData,[R]:r.title==="日期范围"?[]:""},columns:m,options:W}};e([E]),n(y)}}else _t.warning("暂不支持的表单项类型");return}if(r.name==="crud"){const b={...r,id:N(),pid:f,schema:{...r.schema}};e([],"清空组件"),a(b,u,f),n(b),t("crud");return}else s.value==="crud"&&(e([],"清空组件"),n({})),t("form");if(!r.templates||!Array.isArray(r.templates)){const b=(h=(d=r.schema)==null?void 0:d.fieldProps)==null?void 0:h.columns,g={...r,id:N(),pid:f,schema:{...r.schema,fieldProps:{...(v=r.schema)==null?void 0:v.fieldProps,columns:b?b.map(m=>({...m,id:N()})):void 0}}};a(g,u,f),n(g)}else Array.isArray(r.templates)&&(e(me(r.templates),"添加组件"),n({}))};return()=>T("div",{class:"h-full w-full"},[T(ys,{"component-list":fo,"onClick-component-item":l},null)])}});var ba={exports:{}},ot={},Ct={exports:{}},ti={},ii={},en;function Ii(){if(en)return ii;en=1;function e(i){this.__parent=i,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}e.prototype.clone_empty=function(){var i=new e(this.__parent);return i.set_indent(this.__indent_count,this.__alignment_count),i},e.prototype.item=function(i){return i<0?this.__items[this.__items.length+i]:this.__items[i]},e.prototype.has_match=function(i){for(var s=this.__items.length-1;s>=0;s--)if(this.__items[s].match(i))return!0;return!1},e.prototype.set_indent=function(i,s){this.is_empty()&&(this.__indent_count=i||0,this.__alignment_count=s||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},e.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},e.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},e.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var i=this.__parent.current_line;return i.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),i.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),i.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count,i.__items[0]===" "&&(i.__items.splice(0,1),i.__character_count-=1),!0}return!1},e.prototype.is_empty=function(){return this.__items.length===0},e.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},e.prototype.push=function(i){this.__items.push(i);var s=i.lastIndexOf(`
`);s!==-1?this.__character_count=i.length-s:this.__character_count+=i.length},e.prototype.pop=function(){var i=null;return this.is_empty()||(i=this.__items.pop(),this.__character_count-=i.length),i},e.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},e.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},e.prototype.trim=function(){for(;this.last()===" ";)this.__items.pop(),this.__character_count-=1},e.prototype.toString=function(){var i="";return this.is_empty()?this.__parent.indent_empty_lines&&(i=this.__parent.get_indent_string(this.__indent_count)):(i=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),i+=this.__items.join("")),i};function a(i,s){this.__cache=[""],this.__indent_size=i.indent_size,this.__indent_string=i.indent_char,i.indent_with_tabs||(this.__indent_string=new Array(i.indent_size+1).join(i.indent_char)),s=s||"",i.indent_level>0&&(s=new Array(i.indent_level+1).join(this.__indent_string)),this.__base_string=s,this.__base_string_length=s.length}a.prototype.get_indent_size=function(i,s){var t=this.__base_string_length;return s=s||0,i<0&&(t=0),t+=i*this.__indent_size,t+=s,t},a.prototype.get_indent_string=function(i,s){var t=this.__base_string;return s=s||0,i<0&&(i=0,t=""),s+=i*this.__indent_size,this.__ensure_cache(s),t+=this.__cache[s],t},a.prototype.__ensure_cache=function(i){for(;i>=this.__cache.length;)this.__add_column()},a.prototype.__add_column=function(){var i=this.__cache.length,s=0,t="";this.__indent_size&&i>=this.__indent_size&&(s=Math.floor(i/this.__indent_size),i-=s*this.__indent_size,t=new Array(s+1).join(this.__indent_string)),i&&(t+=new Array(i+1).join(" ")),this.__cache.push(t)};function n(i,s){this.__indent_cache=new a(i,s),this.raw=!1,this._end_with_newline=i.end_with_newline,this.indent_size=i.indent_size,this.wrap_line_length=i.wrap_line_length,this.indent_empty_lines=i.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new e(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}return n.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},n.prototype.get_line_number=function(){return this.__lines.length},n.prototype.get_indent_string=function(i,s){return this.__indent_cache.get_indent_string(i,s)},n.prototype.get_indent_size=function(i,s){return this.__indent_cache.get_indent_size(i,s)},n.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},n.prototype.add_new_line=function(i){return this.is_empty()||!i&&this.just_added_newline()?!1:(this.raw||this.__add_outputline(),!0)},n.prototype.get_code=function(i){this.trim(!0);var s=this.current_line.pop();s&&(s[s.length-1]===`
`&&(s=s.replace(/\n+$/g,"")),this.current_line.push(s)),this._end_with_newline&&this.__add_outputline();var t=this.__lines.join(`
`);return i!==`
`&&(t=t.replace(/[\n]/g,i)),t},n.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},n.prototype.set_indent=function(i,s){return i=i||0,s=s||0,this.next_line.set_indent(i,s),this.__lines.length>1?(this.current_line.set_indent(i,s),!0):(this.current_line.set_indent(),!1)},n.prototype.add_raw_token=function(i){for(var s=0;s<i.newlines;s++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(i.whitespace_before),this.current_line.push(i.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},n.prototype.add_token=function(i){this.__add_space_before_token(),this.current_line.push(i),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},n.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},n.prototype.remove_indent=function(i){for(var s=this.__lines.length;i<s;)this.__lines[i]._remove_indent(),i++;this.current_line._remove_wrap_indent()},n.prototype.trim=function(i){for(i=i===void 0?!1:i,this.current_line.trim();i&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},n.prototype.just_added_newline=function(){return this.current_line.is_empty()},n.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},n.prototype.ensure_empty_line_above=function(i,s){for(var t=this.__lines.length-2;t>=0;){var o=this.__lines[t];if(o.is_empty())break;if(o.item(0).indexOf(i)!==0&&o.item(-1)!==s){this.__lines.splice(t+1,0,new e(this)),this.previous_line=this.__lines[this.__lines.length-2];break}t--}},ii.Output=n,ii}var ni={},tn;function ya(){if(tn)return ni;tn=1;function e(a,n,i,s){this.type=a,this.text=n,this.comments_before=null,this.newlines=i||0,this.whitespace_before=s||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}return ni.Token=e,ni}var ai={},nn;function wa(){return nn||(nn=1,function(e){var a="\\x23\\x24\\x40\\x41-\\x5a\\x5f\\x61-\\x7a",n="\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a",i="\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc",s="\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f",t="(?:\\\\u[0-9a-fA-F]{4}|["+a+i+"])",o="(?:\\\\u[0-9a-fA-F]{4}|["+n+i+s+"])*";e.identifier=new RegExp(t+o,"g"),e.identifierStart=new RegExp(t),e.identifierMatch=new RegExp("(?:\\\\u[0-9a-fA-F]{4}|["+n+i+s+"])+"),e.newline=/[\n\r\u2028\u2029]/,e.lineBreak=new RegExp(`\r
|`+e.newline.source),e.allLineBreaks=new RegExp(e.lineBreak.source,"g")}(ai)),ai}var li={},st={},an;function Fi(){if(an)return st;an=1;function e(i,s){this.raw_options=a(i,s),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs",this.indent_char==="	"),this.indent_with_tabs&&(this.indent_char="	",this.indent_size===1&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php","smarty"],["auto"])}e.prototype._get_array=function(i,s){var t=this.raw_options[i],o=s||[];return typeof t=="object"?t!==null&&typeof t.concat=="function"&&(o=t.concat()):typeof t=="string"&&(o=t.split(/[^a-zA-Z0-9_\/\-]+/)),o},e.prototype._get_boolean=function(i,s){var t=this.raw_options[i],o=t===void 0?!!s:!!t;return o},e.prototype._get_characters=function(i,s){var t=this.raw_options[i],o=s||"";return typeof t=="string"&&(o=t.replace(/\\r/,"\r").replace(/\\n/,`
`).replace(/\\t/,"	")),o},e.prototype._get_number=function(i,s){var t=this.raw_options[i];s=parseInt(s,10),isNaN(s)&&(s=0);var o=parseInt(t,10);return isNaN(o)&&(o=s),o},e.prototype._get_selection=function(i,s,t){var o=this._get_selection_list(i,s,t);if(o.length!==1)throw new Error("Invalid Option Value: The option '"+i+`' can only be one of the following values:
`+s+`
You passed in: '`+this.raw_options[i]+"'");return o[0]},e.prototype._get_selection_list=function(i,s,t){if(!s||s.length===0)throw new Error("Selection list cannot be empty.");if(t=t||[s[0]],!this._is_valid_selection(t,s))throw new Error("Invalid Default Value!");var o=this._get_array(i,t);if(!this._is_valid_selection(o,s))throw new Error("Invalid Option Value: The option '"+i+`' can contain only the following values:
`+s+`
You passed in: '`+this.raw_options[i]+"'");return o},e.prototype._is_valid_selection=function(i,s){return i.length&&s.length&&!i.some(function(t){return s.indexOf(t)===-1})};function a(i,s){var t={};i=n(i);var o;for(o in i)o!==s&&(t[o]=i[o]);if(s&&i[s])for(o in i[s])t[o]=i[s][o];return t}function n(i){var s={},t;for(t in i){var o=t.replace(/-/g,"_");s[o]=i[t]}return s}return st.Options=e,st.normalizeOpts=n,st.mergeOpts=a,st}var ln;function Ca(){if(ln)return li;ln=1;var e=Fi().Options,a=["before-newline","after-newline","preserve-newline"];function n(i){e.call(this,i,"js");var s=this.raw_options.brace_style||null;s==="expand-strict"?this.raw_options.brace_style="expand":s==="collapse-preserve-inline"?this.raw_options.brace_style="collapse,preserve-inline":this.raw_options.braces_on_own_line!==void 0&&(this.raw_options.brace_style=this.raw_options.braces_on_own_line?"expand":"collapse");var t=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_preserve_inline=!1,this.brace_style="collapse";for(var o=0;o<t.length;o++)t[o]==="preserve-inline"?this.brace_preserve_inline=!0:this.brace_style=t[o];this.unindent_chained_methods=this._get_boolean("unindent_chained_methods"),this.break_chained_methods=this._get_boolean("break_chained_methods"),this.space_in_paren=this._get_boolean("space_in_paren"),this.space_in_empty_paren=this._get_boolean("space_in_empty_paren"),this.jslint_happy=this._get_boolean("jslint_happy"),this.space_after_anon_function=this._get_boolean("space_after_anon_function"),this.space_after_named_function=this._get_boolean("space_after_named_function"),this.keep_array_indentation=this._get_boolean("keep_array_indentation"),this.space_before_conditional=this._get_boolean("space_before_conditional",!0),this.unescape_strings=this._get_boolean("unescape_strings"),this.e4x=this._get_boolean("e4x"),this.comma_first=this._get_boolean("comma_first"),this.operator_position=this._get_selection("operator_position",a),this.test_output_raw=this._get_boolean("test_output_raw"),this.jslint_happy&&(this.space_after_anon_function=!0)}return n.prototype=new e,li.Options=n,li}var Ke={},oi={},on;function Ai(){if(on)return oi;on=1;var e=RegExp.prototype.hasOwnProperty("sticky");function a(n){this.__input=n||"",this.__input_length=this.__input.length,this.__position=0}return a.prototype.restart=function(){this.__position=0},a.prototype.back=function(){this.__position>0&&(this.__position-=1)},a.prototype.hasNext=function(){return this.__position<this.__input_length},a.prototype.next=function(){var n=null;return this.hasNext()&&(n=this.__input.charAt(this.__position),this.__position+=1),n},a.prototype.peek=function(n){var i=null;return n=n||0,n+=this.__position,n>=0&&n<this.__input_length&&(i=this.__input.charAt(n)),i},a.prototype.__match=function(n,i){n.lastIndex=i;var s=n.exec(this.__input);return s&&!(e&&n.sticky)&&s.index!==i&&(s=null),s},a.prototype.test=function(n,i){return i=i||0,i+=this.__position,i>=0&&i<this.__input_length?!!this.__match(n,i):!1},a.prototype.testChar=function(n,i){var s=this.peek(i);return n.lastIndex=0,s!==null&&n.test(s)},a.prototype.match=function(n){var i=this.__match(n,this.__position);return i?this.__position+=i[0].length:i=null,i},a.prototype.read=function(n,i,s){var t="",o;return n&&(o=this.match(n),o&&(t+=o[0])),i&&(o||!n)&&(t+=this.readUntil(i,s)),t},a.prototype.readUntil=function(n,i){var s="",t=this.__position;n.lastIndex=this.__position;var o=n.exec(this.__input);return o?(t=o.index,i&&(t+=o[0].length)):t=this.__input_length,s=this.__input.substring(this.__position,t),this.__position=t,s},a.prototype.readUntilAfter=function(n){return this.readUntil(n,!0)},a.prototype.get_regexp=function(n,i){var s=null,t="g";return i&&e&&(t="y"),typeof n=="string"&&n!==""?s=new RegExp(n,t):n&&(s=new RegExp(n.source,t)),s},a.prototype.get_literal_regexp=function(n){return RegExp(n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},a.prototype.peekUntilAfter=function(n){var i=this.__position,s=this.readUntilAfter(n);return this.__position=i,s},a.prototype.lookBack=function(n){var i=this.__position-1;return i>=n.length&&this.__input.substring(i-n.length,i).toLowerCase()===n},oi.InputScanner=a,oi}var Tt={},si={},sn;function Cs(){if(sn)return si;sn=1;function e(a){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=a}return e.prototype.restart=function(){this.__position=0},e.prototype.isEmpty=function(){return this.__tokens_length===0},e.prototype.hasNext=function(){return this.__position<this.__tokens_length},e.prototype.next=function(){var a=null;return this.hasNext()&&(a=this.__tokens[this.__position],this.__position+=1),a},e.prototype.peek=function(a){var n=null;return a=a||0,a+=this.__position,a>=0&&a<this.__tokens_length&&(n=this.__tokens[a]),n},e.prototype.add=function(a){this.__parent_token&&(a.parent=this.__parent_token),this.__tokens.push(a),this.__tokens_length+=1},si.TokenStream=e,si}var ri={},ui={},rn;function Jt(){if(rn)return ui;rn=1;function e(a,n){this._input=a,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,n&&(this._starting_pattern=this._input.get_regexp(n._starting_pattern,!0),this._match_pattern=this._input.get_regexp(n._match_pattern,!0),this._until_pattern=this._input.get_regexp(n._until_pattern),this._until_after=n._until_after)}return e.prototype.read=function(){var a=this._input.read(this._starting_pattern);return(!this._starting_pattern||a)&&(a+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),a},e.prototype.read_match=function(){return this._input.match(this._match_pattern)},e.prototype.until_after=function(a){var n=this._create();return n._until_after=!0,n._until_pattern=this._input.get_regexp(a),n._update(),n},e.prototype.until=function(a){var n=this._create();return n._until_after=!1,n._until_pattern=this._input.get_regexp(a),n._update(),n},e.prototype.starting_with=function(a){var n=this._create();return n._starting_pattern=this._input.get_regexp(a,!0),n._update(),n},e.prototype.matching=function(a){var n=this._create();return n._match_pattern=this._input.get_regexp(a,!0),n._update(),n},e.prototype._create=function(){return new e(this._input,this)},e.prototype._update=function(){},ui.Pattern=e,ui}var un;function Ts(){if(un)return ri;un=1;var e=Jt().Pattern;function a(n,i){e.call(this,n,i),i?this._line_regexp=this._input.get_regexp(i._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}return a.prototype=new e,a.prototype.__set_whitespace_patterns=function(n,i){n+="\\t ",i+="\\n\\r",this._match_pattern=this._input.get_regexp("["+n+i+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+i+"]")},a.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var n=this._input.read(this._match_pattern);if(n===" ")this.whitespace_before_token=" ";else if(n){var i=this.__split(this._newline_regexp,n);this.newline_count=i.length-1,this.whitespace_before_token=i[this.newline_count]}return n},a.prototype.matching=function(n,i){var s=this._create();return s.__set_whitespace_patterns(n,i),s._update(),s},a.prototype._create=function(){return new a(this._input,this)},a.prototype.__split=function(n,i){n.lastIndex=0;for(var s=0,t=[],o=n.exec(i);o;)t.push(i.substring(s,o.index)),s=o.index+o[0].length,o=n.exec(i);return s<i.length?t.push(i.substring(s,i.length)):t.push(""),t},ri.WhitespacePattern=a,ri}var cn;function Vt(){if(cn)return Tt;cn=1;var e=Ai().InputScanner,a=ya().Token,n=Cs().TokenStream,i=Ts().WhitespacePattern,s={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},t=function(o,l){this._input=new e(o),this._options=l||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new i(this._input)};return t.prototype.tokenize=function(){this._input.restart(),this.__tokens=new n,this._reset();for(var o,l=new a(s.START,""),r=null,u=[],f=new n;l.type!==s.EOF;){for(o=this._get_next_token(l,r);this._is_comment(o);)f.add(o),o=this._get_next_token(l,r);f.isEmpty()||(o.comments_before=f,f=new n),o.parent=r,this._is_opening(o)?(u.push(r),r=o):r&&this._is_closing(o,r)&&(o.opened=r,r.closed=o,r=u.pop(),o.parent=r),o.previous=l,l.next=o,this.__tokens.add(o),l=o}return this.__tokens},t.prototype._is_first_token=function(){return this.__tokens.isEmpty()},t.prototype._reset=function(){},t.prototype._get_next_token=function(o,l){this._readWhitespace();var r=this._input.read(/.+/g);return r?this._create_token(s.RAW,r):this._create_token(s.EOF,"")},t.prototype._is_comment=function(o){return!1},t.prototype._is_opening=function(o){return!1},t.prototype._is_closing=function(o,l){return!1},t.prototype._create_token=function(o,l){var r=new a(o,l,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token);return r},t.prototype._readWhitespace=function(){return this._patterns.whitespace.read()},Tt.Tokenizer=t,Tt.TOKEN=s,Tt}var ci={},fn;function Ri(){if(fn)return ci;fn=1;function e(a,n){a=typeof a=="string"?a:a.source,n=typeof n=="string"?n:n.source,this.__directives_block_pattern=new RegExp(a+/ beautify( \w+[:]\w+)+ /.source+n,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(a+/\sbeautify\signore:end\s/.source+n,"g")}return e.prototype.get_directives=function(a){if(!a.match(this.__directives_block_pattern))return null;var n={};this.__directive_pattern.lastIndex=0;for(var i=this.__directive_pattern.exec(a);i;)n[i[1]]=i[2],i=this.__directive_pattern.exec(a);return n},e.prototype.readIgnored=function(a){return a.readUntilAfter(this.__directives_end_ignore_pattern)},ci.Directives=e,ci}var fi={},pn;function Ta(){if(pn)return fi;pn=1;var e=Jt().Pattern,a={django:!1,erb:!1,handlebars:!1,php:!1,smarty:!1};function n(i,s){e.call(this,i,s),this.__template_pattern=null,this._disabled=Object.assign({},a),this._excluded=Object.assign({},a),s&&(this.__template_pattern=this._input.get_regexp(s.__template_pattern),this._excluded=Object.assign(this._excluded,s._excluded),this._disabled=Object.assign(this._disabled,s._disabled));var t=new e(i);this.__patterns={handlebars_comment:t.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:t.starting_with(/{{{/).until_after(/}}}/),handlebars:t.starting_with(/{{/).until_after(/}}/),php:t.starting_with(/<\?(?:[= ]|php)/).until_after(/\?>/),erb:t.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:t.starting_with(/{%/).until_after(/%}/),django_value:t.starting_with(/{{/).until_after(/}}/),django_comment:t.starting_with(/{#/).until_after(/#}/),smarty:t.starting_with(/{(?=[^}{\s\n])/).until_after(/[^\s\n]}/),smarty_comment:t.starting_with(/{\*/).until_after(/\*}/),smarty_literal:t.starting_with(/{literal}/).until_after(/{\/literal}/)}}return n.prototype=new e,n.prototype._create=function(){return new n(this._input,this)},n.prototype._update=function(){this.__set_templated_pattern()},n.prototype.disable=function(i){var s=this._create();return s._disabled[i]=!0,s._update(),s},n.prototype.read_options=function(i){var s=this._create();for(var t in a)s._disabled[t]=i.templating.indexOf(t)===-1;return s._update(),s},n.prototype.exclude=function(i){var s=this._create();return s._excluded[i]=!0,s._update(),s},n.prototype.read=function(){var i="";this._match_pattern?i=this._input.read(this._starting_pattern):i=this._input.read(this._starting_pattern,this.__template_pattern);for(var s=this._read_template();s;)this._match_pattern?s+=this._input.read(this._match_pattern):s+=this._input.readUntil(this.__template_pattern),i+=s,s=this._read_template();return this._until_after&&(i+=this._input.readUntilAfter(this._until_pattern)),i},n.prototype.__set_templated_pattern=function(){var i=[];this._disabled.php||i.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||i.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||i.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(i.push(this.__patterns.django._starting_pattern.source),i.push(this.__patterns.django_value._starting_pattern.source),i.push(this.__patterns.django_comment._starting_pattern.source)),this._disabled.smarty||i.push(this.__patterns.smarty._starting_pattern.source),this._until_pattern&&i.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+i.join("|")+")")},n.prototype._read_template=function(){var i="",s=this._input.peek();if(s==="<"){var t=this._input.peek(1);!this._disabled.php&&!this._excluded.php&&t==="?"&&(i=i||this.__patterns.php.read()),!this._disabled.erb&&!this._excluded.erb&&t==="%"&&(i=i||this.__patterns.erb.read())}else s==="{"&&(!this._disabled.handlebars&&!this._excluded.handlebars&&(i=i||this.__patterns.handlebars_comment.read(),i=i||this.__patterns.handlebars_unescaped.read(),i=i||this.__patterns.handlebars.read()),this._disabled.django||(!this._excluded.django&&!this._excluded.handlebars&&(i=i||this.__patterns.django_value.read()),this._excluded.django||(i=i||this.__patterns.django_comment.read(),i=i||this.__patterns.django.read())),this._disabled.smarty||this._disabled.django&&this._disabled.handlebars&&(i=i||this.__patterns.smarty_comment.read(),i=i||this.__patterns.smarty_literal.read(),i=i||this.__patterns.smarty.read()));return i},fi.TemplatablePattern=n,fi}var dn;function kt(){if(dn)return Ke;dn=1;var e=Ai().InputScanner,a=Vt().Tokenizer,n=Vt().TOKEN,i=Ri().Directives,s=wa(),t=Jt().Pattern,o=Ta().TemplatablePattern;function l(E,k){return k.indexOf(E)!==-1}var r={START_EXPR:"TK_START_EXPR",END_EXPR:"TK_END_EXPR",START_BLOCK:"TK_START_BLOCK",END_BLOCK:"TK_END_BLOCK",WORD:"TK_WORD",RESERVED:"TK_RESERVED",SEMICOLON:"TK_SEMICOLON",STRING:"TK_STRING",EQUALS:"TK_EQUALS",OPERATOR:"TK_OPERATOR",COMMA:"TK_COMMA",BLOCK_COMMENT:"TK_BLOCK_COMMENT",COMMENT:"TK_COMMENT",DOT:"TK_DOT",UNKNOWN:"TK_UNKNOWN",START:n.START,RAW:n.RAW,EOF:n.EOF},u=new i(/\/\*/,/\*\//),f=/0[xX][0123456789abcdefABCDEF_]*n?|0[oO][01234567_]*n?|0[bB][01_]*n?|\d[\d_]*n|(?:\.\d[\d_]*|\d[\d_]*\.?[\d_]*)(?:[eE][+-]?[\d_]+)?/,d=/[0-9]/,h=/[^\d\.]/,v=">>> === !== << && >= ** != == <= >> || ?? |> < / - + > : & % ? ^ | *".split(" "),b=">>>= ... >>= <<= === >>> !== **= => ^= :: /= << <= == && -= >= >> != -- += ** || ?? ++ %= &= *= |= |> = ! ? > < : / ^ - + * & % ~ |";b=b.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"),b="\\?\\.(?!\\d) "+b,b=b.replace(/ /g,"|");var g=new RegExp(b),m="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(","),p=m.concat(["do","in","of","else","get","set","new","catch","finally","typeof","yield","async","await","from","as"]),y=new RegExp("^(?:"+p.join("|")+")$"),R,I=function(E,k){a.call(this,E,k),this._patterns.whitespace=this._patterns.whitespace.matching(/\u00A0\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff/.source,/\u2028\u2029/.source);var w=new t(this._input),x=new o(this._input).read_options(this._options);this.__patterns={template:x,identifier:x.starting_with(s.identifier).matching(s.identifierMatch),number:w.matching(f),punct:w.matching(g),comment:w.starting_with(/\/\//).until(/[\n\r\u2028\u2029]/),block_comment:w.starting_with(/\/\*/).until_after(/\*\//),html_comment_start:w.matching(/<!--/),html_comment_end:w.matching(/-->/),include:w.starting_with(/#include/).until_after(s.lineBreak),shebang:w.starting_with(/#!/).until_after(s.lineBreak),xml:w.matching(/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[\s\S]+?}|!\[CDATA\[[\s\S]*?\]\]|)(\s+{[\s\S]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{[\s\S]+?}))*\s*(\/?)\s*>/),single_quote:x.until(/['\\\n\r\u2028\u2029]/),double_quote:x.until(/["\\\n\r\u2028\u2029]/),template_text:x.until(/[`\\$]/),template_expression:x.until(/[`}\\]/)}};I.prototype=new a,I.prototype._is_comment=function(E){return E.type===r.COMMENT||E.type===r.BLOCK_COMMENT||E.type===r.UNKNOWN},I.prototype._is_opening=function(E){return E.type===r.START_BLOCK||E.type===r.START_EXPR},I.prototype._is_closing=function(E,k){return(E.type===r.END_BLOCK||E.type===r.END_EXPR)&&k&&(E.text==="]"&&k.text==="["||E.text===")"&&k.text==="("||E.text==="}"&&k.text==="{")},I.prototype._reset=function(){R=!1},I.prototype._get_next_token=function(E,k){var w=null;this._readWhitespace();var x=this._input.peek();return x===null?this._create_token(r.EOF,""):(w=w||this._read_non_javascript(x),w=w||this._read_string(x),w=w||this._read_word(E),w=w||this._read_singles(x),w=w||this._read_comment(x),w=w||this._read_regexp(x,E),w=w||this._read_xml(x,E),w=w||this._read_punctuation(),w=w||this._create_token(r.UNKNOWN,this._input.next()),w)},I.prototype._read_word=function(E){var k;if(k=this.__patterns.identifier.read(),k!=="")return k=k.replace(s.allLineBreaks,`
`),!(E.type===r.DOT||E.type===r.RESERVED&&(E.text==="set"||E.text==="get"))&&y.test(k)?k==="in"||k==="of"?this._create_token(r.OPERATOR,k):this._create_token(r.RESERVED,k):this._create_token(r.WORD,k);if(k=this.__patterns.number.read(),k!=="")return this._create_token(r.WORD,k)},I.prototype._read_singles=function(E){var k=null;return E==="("||E==="["?k=this._create_token(r.START_EXPR,E):E===")"||E==="]"?k=this._create_token(r.END_EXPR,E):E==="{"?k=this._create_token(r.START_BLOCK,E):E==="}"?k=this._create_token(r.END_BLOCK,E):E===";"?k=this._create_token(r.SEMICOLON,E):E==="."&&h.test(this._input.peek(1))?k=this._create_token(r.DOT,E):E===","&&(k=this._create_token(r.COMMA,E)),k&&this._input.next(),k},I.prototype._read_punctuation=function(){var E=this.__patterns.punct.read();if(E!=="")return E==="="?this._create_token(r.EQUALS,E):E==="?."?this._create_token(r.DOT,E):this._create_token(r.OPERATOR,E)},I.prototype._read_non_javascript=function(E){var k="";if(E==="#"){if(this._is_first_token()&&(k=this.__patterns.shebang.read(),k))return this._create_token(r.UNKNOWN,k.trim()+`
`);if(k=this.__patterns.include.read(),k)return this._create_token(r.UNKNOWN,k.trim()+`
`);E=this._input.next();var w="#";if(this._input.hasNext()&&this._input.testChar(d)){do E=this._input.next(),w+=E;while(this._input.hasNext()&&E!=="#"&&E!=="=");return E==="#"||(this._input.peek()==="["&&this._input.peek(1)==="]"?(w+="[]",this._input.next(),this._input.next()):this._input.peek()==="{"&&this._input.peek(1)==="}"&&(w+="{}",this._input.next(),this._input.next())),this._create_token(r.WORD,w)}this._input.back()}else if(E==="<"&&this._is_first_token()){if(k=this.__patterns.html_comment_start.read(),k){for(;this._input.hasNext()&&!this._input.testChar(s.newline);)k+=this._input.next();return R=!0,this._create_token(r.COMMENT,k)}}else if(R&&E==="-"&&(k=this.__patterns.html_comment_end.read(),k))return R=!1,this._create_token(r.COMMENT,k);return null},I.prototype._read_comment=function(E){var k=null;if(E==="/"){var w="";if(this._input.peek(1)==="*"){w=this.__patterns.block_comment.read();var x=u.get_directives(w);x&&x.ignore==="start"&&(w+=u.readIgnored(this._input)),w=w.replace(s.allLineBreaks,`
`),k=this._create_token(r.BLOCK_COMMENT,w),k.directives=x}else this._input.peek(1)==="/"&&(w=this.__patterns.comment.read(),k=this._create_token(r.COMMENT,w))}return k},I.prototype._read_string=function(E){if(E==="`"||E==="'"||E==='"'){var k=this._input.next();return this.has_char_escapes=!1,E==="`"?k+=this._read_string_recursive("`",!0,"${"):k+=this._read_string_recursive(E),this.has_char_escapes&&this._options.unescape_strings&&(k=W(k)),this._input.peek()===E&&(k+=this._input.next()),k=k.replace(s.allLineBreaks,`
`),this._create_token(r.STRING,k)}return null},I.prototype._allow_regexp_or_xml=function(E){return E.type===r.RESERVED&&l(E.text,["return","case","throw","else","do","typeof","yield"])||E.type===r.END_EXPR&&E.text===")"&&E.opened.previous.type===r.RESERVED&&l(E.opened.previous.text,["if","while","for"])||l(E.type,[r.COMMENT,r.START_EXPR,r.START_BLOCK,r.START,r.END_BLOCK,r.OPERATOR,r.EQUALS,r.EOF,r.SEMICOLON,r.COMMA])},I.prototype._read_regexp=function(E,k){if(E==="/"&&this._allow_regexp_or_xml(k)){for(var w=this._input.next(),x=!1,c=!1;this._input.hasNext()&&(x||c||this._input.peek()!==E)&&!this._input.testChar(s.newline);)w+=this._input.peek(),x?x=!1:(x=this._input.peek()==="\\",this._input.peek()==="["?c=!0:this._input.peek()==="]"&&(c=!1)),this._input.next();return this._input.peek()===E&&(w+=this._input.next(),w+=this._input.read(s.identifier)),this._create_token(r.STRING,w)}return null},I.prototype._read_xml=function(E,k){if(this._options.e4x&&E==="<"&&this._allow_regexp_or_xml(k)){var w="",x=this.__patterns.xml.read_match();if(x){for(var c=x[2].replace(/^{\s+/,"{").replace(/\s+}$/,"}"),S=c.indexOf("{")===0,O=0;x;){var $=!!x[1],U=x[2],q=!!x[x.length-1]||U.slice(0,8)==="![CDATA[";if(!q&&(U===c||S&&U.replace(/^{\s+/,"{").replace(/\s+}$/,"}"))&&($?--O:++O),w+=x[0],O<=0)break;x=this.__patterns.xml.read_match()}return x||(w+=this._input.match(/[\s\S]*/g)[0]),w=w.replace(s.allLineBreaks,`
`),this._create_token(r.STRING,w)}}return null};function W(E){for(var k="",w=0,x=new e(E),c=null;x.hasNext();)if(c=x.match(/([\s]|[^\\]|\\\\)+/g),c&&(k+=c[0]),x.peek()==="\\"){if(x.next(),x.peek()==="x")c=x.match(/x([0-9A-Fa-f]{2})/g);else if(x.peek()==="u")c=x.match(/u([0-9A-Fa-f]{4})/g);else{k+="\\",x.hasNext()&&(k+=x.next());continue}if(!c||(w=parseInt(c[1],16),w>126&&w<=255&&c[0].indexOf("x")===0))return E;if(w>=0&&w<32){k+="\\"+c[0];continue}else w===34||w===39||w===92?k+="\\"+String.fromCharCode(w):k+=String.fromCharCode(w)}return k}return I.prototype._read_string_recursive=function(E,k,w){var x,c;E==="'"?c=this.__patterns.single_quote:E==='"'?c=this.__patterns.double_quote:E==="`"?c=this.__patterns.template_text:E==="}"&&(c=this.__patterns.template_expression);for(var S=c.read(),O="";this._input.hasNext();){if(O=this._input.next(),O===E||!k&&s.newline.test(O)){this._input.back();break}else O==="\\"&&this._input.hasNext()?(x=this._input.peek(),x==="x"||x==="u"?this.has_char_escapes=!0:x==="\r"&&this._input.peek(1)===`
`&&this._input.next(),O+=this._input.next()):w&&(w==="${"&&O==="$"&&this._input.peek()==="{"&&(O+=this._input.next()),w===O&&(E==="`"?O+=this._read_string_recursive("}",k,"`"):O+=this._read_string_recursive("`",k,"${"),this._input.hasNext()&&(O+=this._input.next())));O+=c.read(),S+=O}return S},Ke.Tokenizer=I,Ke.TOKEN=r,Ke.positionable_operators=v.slice(),Ke.line_starters=m.slice(),Ke}var hn;function ks(){if(hn)return ti;hn=1;var e=Ii().Output,a=ya().Token,n=wa(),i=Ca().Options,s=kt().Tokenizer,t=kt().line_starters,o=kt().positionable_operators,l=kt().TOKEN;function r(c,S){return S.indexOf(c)!==-1}function u(c){return c.replace(/^\s+/g,"")}function f(c){for(var S={},O=0;O<c.length;O++)S[c[O].replace(/-/g,"_")]=c[O];return S}function d(c,S){return c&&c.type===l.RESERVED&&c.text===S}function h(c,S){return c&&c.type===l.RESERVED&&r(c.text,S)}var v=["case","return","do","if","throw","else","await","break","continue","async"],b=["before-newline","after-newline","preserve-newline"],g=f(b),m=[g.before_newline,g.preserve_newline],p={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"};function y(c,S){S.multiline_frame||S.mode===p.ForInitializer||S.mode===p.Conditional||c.remove_indent(S.start_line_index)}function R(c){c=c.replace(n.allLineBreaks,`
`);for(var S=[],O=c.indexOf(`
`);O!==-1;)S.push(c.substring(0,O)),c=c.substring(O+1),O=c.indexOf(`
`);return c.length&&S.push(c),S}function I(c){return c===p.ArrayLiteral}function W(c){return r(c,[p.Expression,p.ForInitializer,p.Conditional])}function E(c,S){for(var O=0;O<c.length;O++){var $=c[O].trim();if($.charAt(0)!==S)return!1}return!0}function k(c,S){for(var O=0,$=c.length,U;O<$;O++)if(U=c[O],U&&U.indexOf(S)!==0)return!1;return!0}function w(c,S){S=S||{},this._source_text=c||"",this._output=null,this._tokens=null,this._last_last_text=null,this._flags=null,this._previous_flags=null,this._flag_store=null,this._options=new i(S)}w.prototype.create_flags=function(c,S){var O=0;c&&(O=c.indentation_level,!this._output.just_added_newline()&&c.line_indent_level>O&&(O=c.line_indent_level));var $={mode:S,parent:c,last_token:c?c.last_token:new a(l.START_BLOCK,""),last_word:c?c.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:O,alignment:0,line_indent_level:c?c.line_indent_level:O,start_line_index:this._output.get_line_number(),ternary_depth:0};return $},w.prototype._reset=function(c){var S=c.match(/^[\t ]*/)[0];this._last_last_text="",this._output=new e(this._options,S),this._output.raw=this._options.test_output_raw,this._flag_store=[],this.set_mode(p.BlockStatement);var O=new s(c,this._options);return this._tokens=O.tokenize(),c},w.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var c,S=this._reset(this._source_text),O=this._options.eol;this._options.eol==="auto"&&(O=`
`,S&&n.lineBreak.test(S||"")&&(O=S.match(n.lineBreak)[0]));for(var $=this._tokens.next();$;)this.handle_token($),this._last_last_text=this._flags.last_token.text,this._flags.last_token=$,$=this._tokens.next();return c=this._output.get_code(O),c},w.prototype.handle_token=function(c,S){c.type===l.START_EXPR?this.handle_start_expr(c):c.type===l.END_EXPR?this.handle_end_expr(c):c.type===l.START_BLOCK?this.handle_start_block(c):c.type===l.END_BLOCK?this.handle_end_block(c):c.type===l.WORD?this.handle_word(c):c.type===l.RESERVED?this.handle_word(c):c.type===l.SEMICOLON?this.handle_semicolon(c):c.type===l.STRING?this.handle_string(c):c.type===l.EQUALS?this.handle_equals(c):c.type===l.OPERATOR?this.handle_operator(c):c.type===l.COMMA?this.handle_comma(c):c.type===l.BLOCK_COMMENT?this.handle_block_comment(c,S):c.type===l.COMMENT?this.handle_comment(c,S):c.type===l.DOT?this.handle_dot(c):c.type===l.EOF?this.handle_eof(c):c.type===l.UNKNOWN?this.handle_unknown(c,S):this.handle_unknown(c,S)},w.prototype.handle_whitespace_and_comments=function(c,S){var O=c.newlines,$=this._options.keep_array_indentation&&I(this._flags.mode);if(c.comments_before)for(var U=c.comments_before.next();U;)this.handle_whitespace_and_comments(U,S),this.handle_token(U,S),U=c.comments_before.next();if($)for(var q=0;q<O;q+=1)this.print_newline(q>0,S);else if(this._options.max_preserve_newlines&&O>this._options.max_preserve_newlines&&(O=this._options.max_preserve_newlines),this._options.preserve_newlines&&O>1){this.print_newline(!1,S);for(var H=1;H<O;H+=1)this.print_newline(!0,S)}};var x=["async","break","continue","return","throw","yield"];return w.prototype.allow_wrap_or_preserved_newline=function(c,S){if(S=S===void 0?!1:S,!this._output.just_added_newline()){var O=this._options.preserve_newlines&&c.newlines||S,$=r(this._flags.last_token.text,o)||r(c.text,o);if($){var U=r(this._flags.last_token.text,o)&&r(this._options.operator_position,m)||r(c.text,o);O=O&&U}if(O)this.print_newline(!1,!0);else if(this._options.wrap_line_length){if(h(this._flags.last_token,x))return;this._output.set_wrap_point()}}},w.prototype.print_newline=function(c,S){if(!S&&this._flags.last_token.text!==";"&&this._flags.last_token.text!==","&&this._flags.last_token.text!=="="&&(this._flags.last_token.type!==l.OPERATOR||this._flags.last_token.text==="--"||this._flags.last_token.text==="++"))for(var O=this._tokens.peek();this._flags.mode===p.Statement&&!(this._flags.if_block&&d(O,"else"))&&!this._flags.do_block;)this.restore_mode();this._output.add_new_line(c)&&(this._flags.multiline_frame=!0)},w.prototype.print_token_line_indentation=function(c){this._output.just_added_newline()&&(this._options.keep_array_indentation&&c.newlines&&(c.text==="["||I(this._flags.mode))?(this._output.current_line.set_indent(-1),this._output.current_line.push(c.whitespace_before),this._output.space_before_token=!1):this._output.set_indent(this._flags.indentation_level,this._flags.alignment)&&(this._flags.line_indent_level=this._flags.indentation_level))},w.prototype.print_token=function(c){if(this._output.raw){this._output.add_raw_token(c);return}if(this._options.comma_first&&c.previous&&c.previous.type===l.COMMA&&this._output.just_added_newline()&&this._output.previous_line.last()===","){var S=this._output.previous_line.pop();this._output.previous_line.is_empty()&&(this._output.previous_line.push(S),this._output.trim(!0),this._output.current_line.pop(),this._output.trim()),this.print_token_line_indentation(c),this._output.add_token(","),this._output.space_before_token=!0}this.print_token_line_indentation(c),this._output.non_breaking_space=!0,this._output.add_token(c.text),this._output.previous_token_wrapped&&(this._flags.multiline_frame=!0)},w.prototype.indent=function(){this._flags.indentation_level+=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},w.prototype.deindent=function(){this._flags.indentation_level>0&&(!this._flags.parent||this._flags.indentation_level>this._flags.parent.indentation_level)&&(this._flags.indentation_level-=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},w.prototype.set_mode=function(c){this._flags?(this._flag_store.push(this._flags),this._previous_flags=this._flags):this._previous_flags=this.create_flags(null,c),this._flags=this.create_flags(this._previous_flags,c),this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},w.prototype.restore_mode=function(){this._flag_store.length>0&&(this._previous_flags=this._flags,this._flags=this._flag_store.pop(),this._previous_flags.mode===p.Statement&&y(this._output,this._previous_flags),this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},w.prototype.start_of_object_property=function(){return this._flags.parent.mode===p.ObjectLiteral&&this._flags.mode===p.Statement&&(this._flags.last_token.text===":"&&this._flags.ternary_depth===0||h(this._flags.last_token,["get","set"]))},w.prototype.start_of_statement=function(c){var S=!1;return S=S||h(this._flags.last_token,["var","let","const"])&&c.type===l.WORD,S=S||d(this._flags.last_token,"do"),S=S||!(this._flags.parent.mode===p.ObjectLiteral&&this._flags.mode===p.Statement)&&h(this._flags.last_token,x)&&!c.newlines,S=S||d(this._flags.last_token,"else")&&!(d(c,"if")&&!c.comments_before),S=S||this._flags.last_token.type===l.END_EXPR&&(this._previous_flags.mode===p.ForInitializer||this._previous_flags.mode===p.Conditional),S=S||this._flags.last_token.type===l.WORD&&this._flags.mode===p.BlockStatement&&!this._flags.in_case&&!(c.text==="--"||c.text==="++")&&this._last_last_text!=="function"&&c.type!==l.WORD&&c.type!==l.RESERVED,S=S||this._flags.mode===p.ObjectLiteral&&(this._flags.last_token.text===":"&&this._flags.ternary_depth===0||h(this._flags.last_token,["get","set"])),S?(this.set_mode(p.Statement),this.indent(),this.handle_whitespace_and_comments(c,!0),this.start_of_object_property()||this.allow_wrap_or_preserved_newline(c,h(c,["do","for","if","while"])),!0):!1},w.prototype.handle_start_expr=function(c){this.start_of_statement(c)||this.handle_whitespace_and_comments(c);var S=p.Expression;if(c.text==="["){if(this._flags.last_token.type===l.WORD||this._flags.last_token.text===")"){h(this._flags.last_token,t)&&(this._output.space_before_token=!0),this.print_token(c),this.set_mode(S),this.indent(),this._options.space_in_paren&&(this._output.space_before_token=!0);return}S=p.ArrayLiteral,I(this._flags.mode)&&(this._flags.last_token.text==="["||this._flags.last_token.text===","&&(this._last_last_text==="]"||this._last_last_text==="}"))&&(this._options.keep_array_indentation||this.print_newline()),r(this._flags.last_token.type,[l.START_EXPR,l.END_EXPR,l.WORD,l.OPERATOR,l.DOT])||(this._output.space_before_token=!0)}else{if(this._flags.last_token.type===l.RESERVED)this._flags.last_token.text==="for"?(this._output.space_before_token=this._options.space_before_conditional,S=p.ForInitializer):r(this._flags.last_token.text,["if","while","switch"])?(this._output.space_before_token=this._options.space_before_conditional,S=p.Conditional):r(this._flags.last_word,["await","async"])?this._output.space_before_token=!0:this._flags.last_token.text==="import"&&c.whitespace_before===""?this._output.space_before_token=!1:(r(this._flags.last_token.text,t)||this._flags.last_token.text==="catch")&&(this._output.space_before_token=!0);else if(this._flags.last_token.type===l.EQUALS||this._flags.last_token.type===l.OPERATOR)this.start_of_object_property()||this.allow_wrap_or_preserved_newline(c);else if(this._flags.last_token.type===l.WORD){this._output.space_before_token=!1;var O=this._tokens.peek(-3);if(this._options.space_after_named_function&&O){var $=this._tokens.peek(-4);h(O,["async","function"])||O.text==="*"&&h($,["async","function"])?this._output.space_before_token=!0:this._flags.mode===p.ObjectLiteral&&(O.text==="{"||O.text===","||O.text==="*"&&($.text==="{"||$.text===","))&&(this._output.space_before_token=!0)}}else this.allow_wrap_or_preserved_newline(c);(this._flags.last_token.type===l.RESERVED&&(this._flags.last_word==="function"||this._flags.last_word==="typeof")||this._flags.last_token.text==="*"&&(r(this._last_last_text,["function","yield"])||this._flags.mode===p.ObjectLiteral&&r(this._last_last_text,["{",","])))&&(this._output.space_before_token=this._options.space_after_anon_function)}this._flags.last_token.text===";"||this._flags.last_token.type===l.START_BLOCK?this.print_newline():(this._flags.last_token.type===l.END_EXPR||this._flags.last_token.type===l.START_EXPR||this._flags.last_token.type===l.END_BLOCK||this._flags.last_token.text==="."||this._flags.last_token.type===l.COMMA)&&this.allow_wrap_or_preserved_newline(c,c.newlines),this.print_token(c),this.set_mode(S),this._options.space_in_paren&&(this._output.space_before_token=!0),this.indent()},w.prototype.handle_end_expr=function(c){for(;this._flags.mode===p.Statement;)this.restore_mode();this.handle_whitespace_and_comments(c),this._flags.multiline_frame&&this.allow_wrap_or_preserved_newline(c,c.text==="]"&&I(this._flags.mode)&&!this._options.keep_array_indentation),this._options.space_in_paren&&(this._flags.last_token.type===l.START_EXPR&&!this._options.space_in_empty_paren?(this._output.trim(),this._output.space_before_token=!1):this._output.space_before_token=!0),this.deindent(),this.print_token(c),this.restore_mode(),y(this._output,this._previous_flags),this._flags.do_while&&this._previous_flags.mode===p.Conditional&&(this._previous_flags.mode=p.Expression,this._flags.do_block=!1,this._flags.do_while=!1)},w.prototype.handle_start_block=function(c){this.handle_whitespace_and_comments(c);var S=this._tokens.peek(),O=this._tokens.peek(1);this._flags.last_word==="switch"&&this._flags.last_token.type===l.END_EXPR?(this.set_mode(p.BlockStatement),this._flags.in_case_statement=!0):this._flags.case_body?this.set_mode(p.BlockStatement):O&&(r(O.text,[":",","])&&r(S.type,[l.STRING,l.WORD,l.RESERVED])||r(S.text,["get","set","..."])&&r(O.type,[l.WORD,l.RESERVED]))?r(this._last_last_text,["class","interface"])?this.set_mode(p.BlockStatement):this.set_mode(p.ObjectLiteral):this._flags.last_token.type===l.OPERATOR&&this._flags.last_token.text==="=>"?this.set_mode(p.BlockStatement):r(this._flags.last_token.type,[l.EQUALS,l.START_EXPR,l.COMMA,l.OPERATOR])||h(this._flags.last_token,["return","throw","import","default"])?this.set_mode(p.ObjectLiteral):this.set_mode(p.BlockStatement);var $=!S.comments_before&&S.text==="}",U=$&&this._flags.last_word==="function"&&this._flags.last_token.type===l.END_EXPR;if(this._options.brace_preserve_inline){var q=0,H=null;this._flags.inline_frame=!0;do if(q+=1,H=this._tokens.peek(q-1),H.newlines){this._flags.inline_frame=!1;break}while(H.type!==l.EOF&&!(H.type===l.END_BLOCK&&H.opened===c))}(this._options.brace_style==="expand"||this._options.brace_style==="none"&&c.newlines)&&!this._flags.inline_frame?this._flags.last_token.type!==l.OPERATOR&&(U||this._flags.last_token.type===l.EQUALS||h(this._flags.last_token,v)&&this._flags.last_token.text!=="else")?this._output.space_before_token=!0:this.print_newline(!1,!0):(I(this._previous_flags.mode)&&(this._flags.last_token.type===l.START_EXPR||this._flags.last_token.type===l.COMMA)&&((this._flags.last_token.type===l.COMMA||this._options.space_in_paren)&&(this._output.space_before_token=!0),(this._flags.last_token.type===l.COMMA||this._flags.last_token.type===l.START_EXPR&&this._flags.inline_frame)&&(this.allow_wrap_or_preserved_newline(c),this._previous_flags.multiline_frame=this._previous_flags.multiline_frame||this._flags.multiline_frame,this._flags.multiline_frame=!1)),this._flags.last_token.type!==l.OPERATOR&&this._flags.last_token.type!==l.START_EXPR&&(this._flags.last_token.type===l.START_BLOCK&&!this._flags.inline_frame?this.print_newline():this._output.space_before_token=!0)),this.print_token(c),this.indent(),!$&&!(this._options.brace_preserve_inline&&this._flags.inline_frame)&&this.print_newline()},w.prototype.handle_end_block=function(c){for(this.handle_whitespace_and_comments(c);this._flags.mode===p.Statement;)this.restore_mode();var S=this._flags.last_token.type===l.START_BLOCK;this._flags.inline_frame&&!S?this._output.space_before_token=!0:this._options.brace_style==="expand"?S||this.print_newline():S||(I(this._flags.mode)&&this._options.keep_array_indentation?(this._options.keep_array_indentation=!1,this.print_newline(),this._options.keep_array_indentation=!0):this.print_newline()),this.restore_mode(),this.print_token(c)},w.prototype.handle_word=function(c){if(c.type===l.RESERVED){if(r(c.text,["set","get"])&&this._flags.mode!==p.ObjectLiteral)c.type=l.WORD;else if(c.text==="import"&&this._tokens.peek().text==="(")c.type=l.WORD;else if(r(c.text,["as","from"])&&!this._flags.import_block)c.type=l.WORD;else if(this._flags.mode===p.ObjectLiteral){var S=this._tokens.peek();S.text===":"&&(c.type=l.WORD)}}if(this.start_of_statement(c)?h(this._flags.last_token,["var","let","const"])&&c.type===l.WORD&&(this._flags.declaration_statement=!0):c.newlines&&!W(this._flags.mode)&&(this._flags.last_token.type!==l.OPERATOR||this._flags.last_token.text==="--"||this._flags.last_token.text==="++")&&this._flags.last_token.type!==l.EQUALS&&(this._options.preserve_newlines||!h(this._flags.last_token,["var","let","const","set","get"]))?(this.handle_whitespace_and_comments(c),this.print_newline()):this.handle_whitespace_and_comments(c),this._flags.do_block&&!this._flags.do_while)if(d(c,"while")){this._output.space_before_token=!0,this.print_token(c),this._output.space_before_token=!0,this._flags.do_while=!0;return}else this.print_newline(),this._flags.do_block=!1;if(this._flags.if_block)if(!this._flags.else_block&&d(c,"else"))this._flags.else_block=!0;else{for(;this._flags.mode===p.Statement;)this.restore_mode();this._flags.if_block=!1,this._flags.else_block=!1}if(this._flags.in_case_statement&&h(c,["case","default"])){this.print_newline(),this._flags.last_token.type!==l.END_BLOCK&&(this._flags.case_body||this._options.jslint_happy)&&this.deindent(),this._flags.case_body=!1,this.print_token(c),this._flags.in_case=!0;return}if((this._flags.last_token.type===l.COMMA||this._flags.last_token.type===l.START_EXPR||this._flags.last_token.type===l.EQUALS||this._flags.last_token.type===l.OPERATOR)&&(this.start_of_object_property()||this.allow_wrap_or_preserved_newline(c)),d(c,"function")){(r(this._flags.last_token.text,["}",";"])||this._output.just_added_newline()&&!(r(this._flags.last_token.text,["(","[","{",":","=",","])||this._flags.last_token.type===l.OPERATOR))&&!this._output.just_added_blankline()&&!c.comments_before&&(this.print_newline(),this.print_newline(!0)),this._flags.last_token.type===l.RESERVED||this._flags.last_token.type===l.WORD?h(this._flags.last_token,["get","set","new","export"])||h(this._flags.last_token,x)?this._output.space_before_token=!0:d(this._flags.last_token,"default")&&this._last_last_text==="export"?this._output.space_before_token=!0:this._flags.last_token.text==="declare"?this._output.space_before_token=!0:this.print_newline():this._flags.last_token.type===l.OPERATOR||this._flags.last_token.text==="="?this._output.space_before_token=!0:!this._flags.multiline_frame&&(W(this._flags.mode)||I(this._flags.mode))||this.print_newline(),this.print_token(c),this._flags.last_word=c.text;return}var O="NONE";if(this._flags.last_token.type===l.END_BLOCK?this._previous_flags.inline_frame?O="SPACE":h(c,["else","catch","finally","from"])?this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&c.newlines?O="NEWLINE":(O="SPACE",this._output.space_before_token=!0):O="NEWLINE":this._flags.last_token.type===l.SEMICOLON&&this._flags.mode===p.BlockStatement?O="NEWLINE":this._flags.last_token.type===l.SEMICOLON&&W(this._flags.mode)?O="SPACE":this._flags.last_token.type===l.STRING?O="NEWLINE":this._flags.last_token.type===l.RESERVED||this._flags.last_token.type===l.WORD||this._flags.last_token.text==="*"&&(r(this._last_last_text,["function","yield"])||this._flags.mode===p.ObjectLiteral&&r(this._last_last_text,["{",","]))?O="SPACE":this._flags.last_token.type===l.START_BLOCK?this._flags.inline_frame?O="SPACE":O="NEWLINE":this._flags.last_token.type===l.END_EXPR&&(this._output.space_before_token=!0,O="NEWLINE"),h(c,t)&&this._flags.last_token.text!==")"&&(this._flags.inline_frame||this._flags.last_token.text==="else"||this._flags.last_token.text==="export"?O="SPACE":O="NEWLINE"),h(c,["else","catch","finally"]))if((!(this._flags.last_token.type===l.END_BLOCK&&this._previous_flags.mode===p.BlockStatement)||this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&c.newlines)&&!this._flags.inline_frame)this.print_newline();else{this._output.trim(!0);var $=this._output.current_line;$.last()!=="}"&&this.print_newline(),this._output.space_before_token=!0}else O==="NEWLINE"?h(this._flags.last_token,v)?this._output.space_before_token=!0:this._flags.last_token.text==="declare"&&h(c,["var","let","const"])?this._output.space_before_token=!0:this._flags.last_token.type!==l.END_EXPR?(this._flags.last_token.type!==l.START_EXPR||!h(c,["var","let","const"]))&&this._flags.last_token.text!==":"&&(d(c,"if")&&d(c.previous,"else")?this._output.space_before_token=!0:this.print_newline()):h(c,t)&&this._flags.last_token.text!==")"&&this.print_newline():this._flags.multiline_frame&&I(this._flags.mode)&&this._flags.last_token.text===","&&this._last_last_text==="}"?this.print_newline():O==="SPACE"&&(this._output.space_before_token=!0);c.previous&&(c.previous.type===l.WORD||c.previous.type===l.RESERVED)&&(this._output.space_before_token=!0),this.print_token(c),this._flags.last_word=c.text,c.type===l.RESERVED&&(c.text==="do"?this._flags.do_block=!0:c.text==="if"?this._flags.if_block=!0:c.text==="import"?this._flags.import_block=!0:this._flags.import_block&&d(c,"from")&&(this._flags.import_block=!1))},w.prototype.handle_semicolon=function(c){this.start_of_statement(c)?this._output.space_before_token=!1:this.handle_whitespace_and_comments(c);for(var S=this._tokens.peek();this._flags.mode===p.Statement&&!(this._flags.if_block&&d(S,"else"))&&!this._flags.do_block;)this.restore_mode();this._flags.import_block&&(this._flags.import_block=!1),this.print_token(c)},w.prototype.handle_string=function(c){c.text.startsWith("`")&&c.newlines===0&&c.whitespace_before===""&&(c.previous.text===")"||this._flags.last_token.type===l.WORD)||(this.start_of_statement(c)?this._output.space_before_token=!0:(this.handle_whitespace_and_comments(c),this._flags.last_token.type===l.RESERVED||this._flags.last_token.type===l.WORD||this._flags.inline_frame?this._output.space_before_token=!0:this._flags.last_token.type===l.COMMA||this._flags.last_token.type===l.START_EXPR||this._flags.last_token.type===l.EQUALS||this._flags.last_token.type===l.OPERATOR?this.start_of_object_property()||this.allow_wrap_or_preserved_newline(c):c.text.startsWith("`")&&this._flags.last_token.type===l.END_EXPR&&(c.previous.text==="]"||c.previous.text===")")&&c.newlines===0?this._output.space_before_token=!0:this.print_newline())),this.print_token(c)},w.prototype.handle_equals=function(c){this.start_of_statement(c)||this.handle_whitespace_and_comments(c),this._flags.declaration_statement&&(this._flags.declaration_assignment=!0),this._output.space_before_token=!0,this.print_token(c),this._output.space_before_token=!0},w.prototype.handle_comma=function(c){this.handle_whitespace_and_comments(c,!0),this.print_token(c),this._output.space_before_token=!0,this._flags.declaration_statement?(W(this._flags.parent.mode)&&(this._flags.declaration_assignment=!1),this._flags.declaration_assignment?(this._flags.declaration_assignment=!1,this.print_newline(!1,!0)):this._options.comma_first&&this.allow_wrap_or_preserved_newline(c)):this._flags.mode===p.ObjectLiteral||this._flags.mode===p.Statement&&this._flags.parent.mode===p.ObjectLiteral?(this._flags.mode===p.Statement&&this.restore_mode(),this._flags.inline_frame||this.print_newline()):this._options.comma_first&&this.allow_wrap_or_preserved_newline(c)},w.prototype.handle_operator=function(c){var S=c.text==="*"&&(h(this._flags.last_token,["function","yield"])||r(this._flags.last_token.type,[l.START_BLOCK,l.COMMA,l.END_BLOCK,l.SEMICOLON])),O=r(c.text,["-","+"])&&(r(this._flags.last_token.type,[l.START_BLOCK,l.START_EXPR,l.EQUALS,l.OPERATOR])||r(this._flags.last_token.text,t)||this._flags.last_token.text===",");if(!this.start_of_statement(c)){var $=!S;this.handle_whitespace_and_comments(c,$)}if(h(this._flags.last_token,v)){this._output.space_before_token=!0,this.print_token(c);return}if(c.text==="*"&&this._flags.last_token.type===l.DOT){this.print_token(c);return}if(c.text==="::"){this.print_token(c);return}if(this._flags.last_token.type===l.OPERATOR&&r(this._options.operator_position,m)&&this.allow_wrap_or_preserved_newline(c),c.text===":"&&this._flags.in_case){this.print_token(c),this._flags.in_case=!1,this._flags.case_body=!0,this._tokens.peek().type!==l.START_BLOCK?(this.indent(),this.print_newline()):this._output.space_before_token=!0;return}var U=!0,q=!0,H=!1;if(c.text===":"?this._flags.ternary_depth===0?U=!1:(this._flags.ternary_depth-=1,H=!0):c.text==="?"&&(this._flags.ternary_depth+=1),!O&&!S&&this._options.preserve_newlines&&r(c.text,o)){var Z=c.text===":",te=Z&&H,ne=Z&&!H;switch(this._options.operator_position){case g.before_newline:this._output.space_before_token=!ne,this.print_token(c),(!Z||te)&&this.allow_wrap_or_preserved_newline(c),this._output.space_before_token=!0;return;case g.after_newline:this._output.space_before_token=!0,!Z||te?this._tokens.peek().newlines?this.print_newline(!1,!0):this.allow_wrap_or_preserved_newline(c):this._output.space_before_token=!1,this.print_token(c),this._output.space_before_token=!0;return;case g.preserve_newline:ne||this.allow_wrap_or_preserved_newline(c),U=!(this._output.just_added_newline()||ne),this._output.space_before_token=U,this.print_token(c),this._output.space_before_token=!0;return}}if(S){this.allow_wrap_or_preserved_newline(c),U=!1;var ye=this._tokens.peek();q=ye&&r(ye.type,[l.WORD,l.RESERVED])}else c.text==="..."?(this.allow_wrap_or_preserved_newline(c),U=this._flags.last_token.type===l.START_BLOCK,q=!1):(r(c.text,["--","++","!","~"])||O)&&((this._flags.last_token.type===l.COMMA||this._flags.last_token.type===l.START_EXPR)&&this.allow_wrap_or_preserved_newline(c),U=!1,q=!1,c.newlines&&(c.text==="--"||c.text==="++")&&this.print_newline(!1,!0),this._flags.last_token.text===";"&&W(this._flags.mode)&&(U=!0),this._flags.last_token.type===l.RESERVED?U=!0:this._flags.last_token.type===l.END_EXPR?U=!(this._flags.last_token.text==="]"&&(c.text==="--"||c.text==="++")):this._flags.last_token.type===l.OPERATOR&&(U=r(c.text,["--","-","++","+"])&&r(this._flags.last_token.text,["--","-","++","+"]),r(c.text,["+","-"])&&r(this._flags.last_token.text,["--","++"])&&(q=!0)),(this._flags.mode===p.BlockStatement&&!this._flags.inline_frame||this._flags.mode===p.Statement)&&(this._flags.last_token.text==="{"||this._flags.last_token.text===";")&&this.print_newline());this._output.space_before_token=this._output.space_before_token||U,this.print_token(c),this._output.space_before_token=q},w.prototype.handle_block_comment=function(c,S){if(this._output.raw){this._output.add_raw_token(c),c.directives&&c.directives.preserve==="end"&&(this._output.raw=this._options.test_output_raw);return}if(c.directives){this.print_newline(!1,S),this.print_token(c),c.directives.preserve==="start"&&(this._output.raw=!0),this.print_newline(!1,!0);return}if(!n.newline.test(c.text)&&!c.newlines){this._output.space_before_token=!0,this.print_token(c),this._output.space_before_token=!0;return}else this.print_block_commment(c,S)},w.prototype.print_block_commment=function(c,S){var O=R(c.text),$,U=!1,q=!1,H=c.whitespace_before,Z=H.length;if(this.print_newline(!1,S),this.print_token_line_indentation(c),this._output.add_token(O[0]),this.print_newline(!1,S),O.length>1){for(O=O.slice(1),U=E(O,"*"),q=k(O,H),U&&(this._flags.alignment=1),$=0;$<O.length;$++)U?(this.print_token_line_indentation(c),this._output.add_token(u(O[$]))):q&&O[$]?(this.print_token_line_indentation(c),this._output.add_token(O[$].substring(Z))):(this._output.current_line.set_indent(-1),this._output.add_token(O[$])),this.print_newline(!1,S);this._flags.alignment=0}},w.prototype.handle_comment=function(c,S){c.newlines?this.print_newline(!1,S):this._output.trim(!0),this._output.space_before_token=!0,this.print_token(c),this.print_newline(!1,S)},w.prototype.handle_dot=function(c){this.start_of_statement(c)||this.handle_whitespace_and_comments(c,!0),h(this._flags.last_token,v)?this._output.space_before_token=!1:this.allow_wrap_or_preserved_newline(c,this._flags.last_token.text===")"&&this._options.break_chained_methods),this._options.unindent_chained_methods&&this._output.just_added_newline()&&this.deindent(),this.print_token(c)},w.prototype.handle_unknown=function(c,S){this.print_token(c),c.text[c.text.length-1]===`
`&&this.print_newline(!1,S)},w.prototype.handle_eof=function(c){for(;this._flags.mode===p.Statement;)this.restore_mode();this.handle_whitespace_and_comments(c)},ti.Beautifier=w,ti}var _n;function Ss(){if(_n)return Ct.exports;_n=1;var e=ks().Beautifier,a=Ca().Options;function n(i,s){var t=new e(i,s);return t.beautify()}return Ct.exports=n,Ct.exports.defaultOptions=function(){return new a},Ct.exports}var St={exports:{}},pi={},di={},mn;function ka(){if(mn)return di;mn=1;var e=Fi().Options;function a(n){e.call(this,n,"css"),this.selector_separator_newline=this._get_boolean("selector_separator_newline",!0),this.newline_between_rules=this._get_boolean("newline_between_rules",!0);var i=this._get_boolean("space_around_selector_separator");this.space_around_combinator=this._get_boolean("space_around_combinator")||i;var s=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_style="collapse";for(var t=0;t<s.length;t++)s[t]!=="expand"?this.brace_style="collapse":this.brace_style=s[t]}return a.prototype=new e,di.Options=a,di}var gn;function Ds(){if(gn)return pi;gn=1;var e=ka().Options,a=Ii().Output,n=Ai().InputScanner,i=Ri().Directives,s=new i(/\/\*/,/\*\//),t=/\r\n|[\r\n]/,o=/\r\n|[\r\n]/g,l=/\s/,r=/(?:\s|\n)+/g,u=/\/\*(?:[\s\S]*?)((?:\*\/)|$)/g,f=/\/\/(?:[^\n\r\u2028\u2029]*)/g;function d(h,v){this._source_text=h||"",this._options=new e(v),this._ch=null,this._input=null,this.NESTED_AT_RULE={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},this.CONDITIONAL_GROUP_RULE={"@media":!0,"@supports":!0,"@document":!0}}return d.prototype.eatString=function(h){var v="";for(this._ch=this._input.next();this._ch;){if(v+=this._ch,this._ch==="\\")v+=this._input.next();else if(h.indexOf(this._ch)!==-1||this._ch===`
`)break;this._ch=this._input.next()}return v},d.prototype.eatWhitespace=function(h){for(var v=l.test(this._input.peek()),b=0;l.test(this._input.peek());)this._ch=this._input.next(),h&&this._ch===`
`&&(b===0||b<this._options.max_preserve_newlines)&&(b++,this._output.add_new_line(!0));return v},d.prototype.foundNestedPseudoClass=function(){for(var h=0,v=1,b=this._input.peek(v);b;){if(b==="{")return!0;if(b==="(")h+=1;else if(b===")"){if(h===0)return!1;h-=1}else if(b===";"||b==="}")return!1;v++,b=this._input.peek(v)}return!1},d.prototype.print_string=function(h){this._output.set_indent(this._indentLevel),this._output.non_breaking_space=!0,this._output.add_token(h)},d.prototype.preserveSingleSpace=function(h){h&&(this._output.space_before_token=!0)},d.prototype.indent=function(){this._indentLevel++},d.prototype.outdent=function(){this._indentLevel>0&&this._indentLevel--},d.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var h=this._source_text,v=this._options.eol;v==="auto"&&(v=`
`,h&&t.test(h||"")&&(v=h.match(t)[0])),h=h.replace(o,`
`);var b=h.match(/^[\t ]*/)[0];this._output=new a(this._options,b),this._input=new n(h),this._indentLevel=0,this._nestedLevel=0,this._ch=null;for(var g=0,m=!1,p=!1,y=!1,R=!1,I=!1,W=this._ch,E,k,w;E=this._input.read(r),k=E!=="",w=W,this._ch=this._input.next(),this._ch==="\\"&&this._input.hasNext()&&(this._ch+=this._input.next()),W=this._ch,this._ch;)if(this._ch==="/"&&this._input.peek()==="*"){this._output.add_new_line(),this._input.back();var x=this._input.read(u),c=s.get_directives(x);c&&c.ignore==="start"&&(x+=s.readIgnored(this._input)),this.print_string(x),this.eatWhitespace(!0),this._output.add_new_line()}else if(this._ch==="/"&&this._input.peek()==="/")this._output.space_before_token=!0,this._input.back(),this.print_string(this._input.read(f)),this.eatWhitespace(!0);else if(this._ch==="@")if(this.preserveSingleSpace(k),this._input.peek()==="{")this.print_string(this._ch+this.eatString("}"));else{this.print_string(this._ch);var S=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);S.match(/[ :]$/)&&(S=this.eatString(": ").replace(/\s$/,""),this.print_string(S),this._output.space_before_token=!0),S=S.replace(/\s$/,""),S==="extend"?R=!0:S==="import"&&(I=!0),S in this.NESTED_AT_RULE?(this._nestedLevel+=1,S in this.CONDITIONAL_GROUP_RULE&&(y=!0)):!m&&g===0&&S.indexOf(":")!==-1&&(p=!0,this.indent())}else this._ch==="#"&&this._input.peek()==="{"?(this.preserveSingleSpace(k),this.print_string(this._ch+this.eatString("}"))):this._ch==="{"?(p&&(p=!1,this.outdent()),y?(y=!1,m=this._indentLevel>=this._nestedLevel):m=this._indentLevel>=this._nestedLevel-1,this._options.newline_between_rules&&m&&this._output.previous_line&&this._output.previous_line.item(-1)!=="{"&&this._output.ensure_empty_line_above("/",","),this._output.space_before_token=!0,this._options.brace_style==="expand"?(this._output.add_new_line(),this.print_string(this._ch),this.indent(),this._output.set_indent(this._indentLevel)):(this.indent(),this.print_string(this._ch)),this.eatWhitespace(!0),this._output.add_new_line()):this._ch==="}"?(this.outdent(),this._output.add_new_line(),w==="{"&&this._output.trim(!0),I=!1,R=!1,p&&(this.outdent(),p=!1),this.print_string(this._ch),m=!1,this._nestedLevel&&this._nestedLevel--,this.eatWhitespace(!0),this._output.add_new_line(),this._options.newline_between_rules&&!this._output.just_added_blankline()&&this._input.peek()!=="}"&&this._output.add_new_line(!0)):this._ch===":"?(m||y)&&!(this._input.lookBack("&")||this.foundNestedPseudoClass())&&!this._input.lookBack("(")&&!R&&g===0?(this.print_string(":"),p||(p=!0,this._output.space_before_token=!0,this.eatWhitespace(!0),this.indent())):(this._input.lookBack(" ")&&(this._output.space_before_token=!0),this._input.peek()===":"?(this._ch=this._input.next(),this.print_string("::")):this.print_string(":")):this._ch==='"'||this._ch==="'"?(this.preserveSingleSpace(k),this.print_string(this._ch+this.eatString(this._ch)),this.eatWhitespace(!0)):this._ch===";"?g===0?(p&&(this.outdent(),p=!1),R=!1,I=!1,this.print_string(this._ch),this.eatWhitespace(!0),this._input.peek()!=="/"&&this._output.add_new_line()):(this.print_string(this._ch),this.eatWhitespace(!0),this._output.space_before_token=!0):this._ch==="("?this._input.lookBack("url")?(this.print_string(this._ch),this.eatWhitespace(),g++,this.indent(),this._ch=this._input.next(),this._ch===")"||this._ch==='"'||this._ch==="'"?this._input.back():this._ch&&(this.print_string(this._ch+this.eatString(")")),g&&(g--,this.outdent()))):(this.preserveSingleSpace(k),this.print_string(this._ch),this.eatWhitespace(),g++,this.indent()):this._ch===")"?(g&&(g--,this.outdent()),this.print_string(this._ch)):this._ch===","?(this.print_string(this._ch),this.eatWhitespace(!0),this._options.selector_separator_newline&&!p&&g===0&&!I&&!R?this._output.add_new_line():this._output.space_before_token=!0):(this._ch===">"||this._ch==="+"||this._ch==="~")&&!p&&g===0?this._options.space_around_combinator?(this._output.space_before_token=!0,this.print_string(this._ch),this._output.space_before_token=!0):(this.print_string(this._ch),this.eatWhitespace(),this._ch&&l.test(this._ch)&&(this._ch="")):this._ch==="]"?this.print_string(this._ch):this._ch==="["?(this.preserveSingleSpace(k),this.print_string(this._ch)):this._ch==="="?(this.eatWhitespace(),this.print_string("="),l.test(this._ch)&&(this._ch="")):this._ch==="!"&&!this._input.lookBack("\\")?(this.print_string(" "),this.print_string(this._ch)):(this.preserveSingleSpace(k),this.print_string(this._ch));var O=this._output.get_code(v);return O},pi.Beautifier=d,pi}var vn;function Os(){if(vn)return St.exports;vn=1;var e=Ds().Beautifier,a=ka().Options;function n(i,s){var t=new e(i,s);return t.beautify()}return St.exports=n,St.exports.defaultOptions=function(){return new a},St.exports}var Dt={exports:{}},hi={},_i={},bn;function Sa(){if(bn)return _i;bn=1;var e=Fi().Options;function a(n){e.call(this,n,"html"),this.templating.length===1&&this.templating[0]==="auto"&&(this.templating=["django","erb","handlebars","php"]),this.indent_inner_html=this._get_boolean("indent_inner_html"),this.indent_body_inner_html=this._get_boolean("indent_body_inner_html",!0),this.indent_head_inner_html=this._get_boolean("indent_head_inner_html",!0),this.indent_handlebars=this._get_boolean("indent_handlebars",!0),this.wrap_attributes=this._get_selection("wrap_attributes",["auto","force","force-aligned","force-expand-multiline","aligned-multiple","preserve","preserve-aligned"]),this.wrap_attributes_indent_size=this._get_number("wrap_attributes_indent_size",this.indent_size),this.extra_liners=this._get_array("extra_liners",["head","body","/html"]),this.inline=this._get_array("inline",["a","abbr","area","audio","b","bdi","bdo","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","svg","template","textarea","time","u","var","video","wbr","text","acronym","big","strike","tt"]),this.void_elements=this._get_array("void_elements",["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","!doctype","?xml","basefont","isindex"]),this.unformatted=this._get_array("unformatted",[]),this.content_unformatted=this._get_array("content_unformatted",["pre","textarea"]),this.unformatted_content_delimiter=this._get_characters("unformatted_content_delimiter"),this.indent_scripts=this._get_selection("indent_scripts",["normal","keep","separate"])}return a.prototype=new e,_i.Options=a,_i}var Ot={},yn;function wn(){if(yn)return Ot;yn=1;var e=Vt().Tokenizer,a=Vt().TOKEN,n=Ri().Directives,i=Ta().TemplatablePattern,s=Jt().Pattern,t={TAG_OPEN:"TK_TAG_OPEN",TAG_CLOSE:"TK_TAG_CLOSE",ATTRIBUTE:"TK_ATTRIBUTE",EQUALS:"TK_EQUALS",VALUE:"TK_VALUE",COMMENT:"TK_COMMENT",TEXT:"TK_TEXT",UNKNOWN:"TK_UNKNOWN",START:a.START,RAW:a.RAW,EOF:a.EOF},o=new n(/<\!--/,/-->/),l=function(r,u){e.call(this,r,u),this._current_tag_name="";var f=new i(this._input).read_options(this._options),d=new s(this._input);if(this.__patterns={word:f.until(/[\n\r\t <]/),single_quote:f.until_after(/'/),double_quote:f.until_after(/"/),attribute:f.until(/[\n\r\t =>]|\/>/),element_name:f.until(/[\n\r\t >\/]/),handlebars_comment:d.starting_with(/{{!--/).until_after(/--}}/),handlebars:d.starting_with(/{{/).until_after(/}}/),handlebars_open:d.until(/[\n\r\t }]/),handlebars_raw_close:d.until(/}}/),comment:d.starting_with(/<!--/).until_after(/-->/),cdata:d.starting_with(/<!\[CDATA\[/).until_after(/]]>/),conditional_comment:d.starting_with(/<!\[/).until_after(/]>/),processing:d.starting_with(/<\?/).until_after(/\?>/)},this._options.indent_handlebars&&(this.__patterns.word=this.__patterns.word.exclude("handlebars")),this._unformatted_content_delimiter=null,this._options.unformatted_content_delimiter){var h=this._input.get_literal_regexp(this._options.unformatted_content_delimiter);this.__patterns.unformatted_content_delimiter=d.matching(h).until_after(h)}};return l.prototype=new e,l.prototype._is_comment=function(r){return!1},l.prototype._is_opening=function(r){return r.type===t.TAG_OPEN},l.prototype._is_closing=function(r,u){return r.type===t.TAG_CLOSE&&u&&((r.text===">"||r.text==="/>")&&u.text[0]==="<"||r.text==="}}"&&u.text[0]==="{"&&u.text[1]==="{")},l.prototype._reset=function(){this._current_tag_name=""},l.prototype._get_next_token=function(r,u){var f=null;this._readWhitespace();var d=this._input.peek();return d===null?this._create_token(t.EOF,""):(f=f||this._read_open_handlebars(d,u),f=f||this._read_attribute(d,r,u),f=f||this._read_close(d,u),f=f||this._read_raw_content(d,r,u),f=f||this._read_content_word(d),f=f||this._read_comment_or_cdata(d),f=f||this._read_processing(d),f=f||this._read_open(d,u),f=f||this._create_token(t.UNKNOWN,this._input.next()),f)},l.prototype._read_comment_or_cdata=function(r){var u=null,f=null,d=null;if(r==="<"){var h=this._input.peek(1);h==="!"&&(f=this.__patterns.comment.read(),f?(d=o.get_directives(f),d&&d.ignore==="start"&&(f+=o.readIgnored(this._input))):f=this.__patterns.cdata.read()),f&&(u=this._create_token(t.COMMENT,f),u.directives=d)}return u},l.prototype._read_processing=function(r){var u=null,f=null,d=null;if(r==="<"){var h=this._input.peek(1);(h==="!"||h==="?")&&(f=this.__patterns.conditional_comment.read(),f=f||this.__patterns.processing.read()),f&&(u=this._create_token(t.COMMENT,f),u.directives=d)}return u},l.prototype._read_open=function(r,u){var f=null,d=null;return u||r==="<"&&(f=this._input.next(),this._input.peek()==="/"&&(f+=this._input.next()),f+=this.__patterns.element_name.read(),d=this._create_token(t.TAG_OPEN,f)),d},l.prototype._read_open_handlebars=function(r,u){var f=null,d=null;return u||this._options.indent_handlebars&&r==="{"&&this._input.peek(1)==="{"&&(this._input.peek(2)==="!"?(f=this.__patterns.handlebars_comment.read(),f=f||this.__patterns.handlebars.read(),d=this._create_token(t.COMMENT,f)):(f=this.__patterns.handlebars_open.read(),d=this._create_token(t.TAG_OPEN,f))),d},l.prototype._read_close=function(r,u){var f=null,d=null;return u&&(u.text[0]==="<"&&(r===">"||r==="/"&&this._input.peek(1)===">")?(f=this._input.next(),r==="/"&&(f+=this._input.next()),d=this._create_token(t.TAG_CLOSE,f)):u.text[0]==="{"&&r==="}"&&this._input.peek(1)==="}"&&(this._input.next(),this._input.next(),d=this._create_token(t.TAG_CLOSE,"}}"))),d},l.prototype._read_attribute=function(r,u,f){var d=null,h="";if(f&&f.text[0]==="<")if(r==="=")d=this._create_token(t.EQUALS,this._input.next());else if(r==='"'||r==="'"){var v=this._input.next();r==='"'?v+=this.__patterns.double_quote.read():v+=this.__patterns.single_quote.read(),d=this._create_token(t.VALUE,v)}else h=this.__patterns.attribute.read(),h&&(u.type===t.EQUALS?d=this._create_token(t.VALUE,h):d=this._create_token(t.ATTRIBUTE,h));return d},l.prototype._is_content_unformatted=function(r){return this._options.void_elements.indexOf(r)===-1&&(this._options.content_unformatted.indexOf(r)!==-1||this._options.unformatted.indexOf(r)!==-1)},l.prototype._read_raw_content=function(r,u,f){var d="";if(f&&f.text[0]==="{")d=this.__patterns.handlebars_raw_close.read();else if(u.type===t.TAG_CLOSE&&u.opened.text[0]==="<"&&u.text[0]!=="/"){var h=u.opened.text.substr(1).toLowerCase();if(h==="script"||h==="style"){var v=this._read_comment_or_cdata(r);if(v)return v.type=t.TEXT,v;d=this._input.readUntil(new RegExp("</"+h+"[\\n\\r\\t ]*?>","ig"))}else this._is_content_unformatted(h)&&(d=this._input.readUntil(new RegExp("</"+h+"[\\n\\r\\t ]*?>","ig")))}return d?this._create_token(t.TEXT,d):null},l.prototype._read_content_word=function(r){var u="";if(this._options.unformatted_content_delimiter&&r===this._options.unformatted_content_delimiter[0]&&(u=this.__patterns.unformatted_content_delimiter.read()),u||(u=this.__patterns.word.read()),u)return this._create_token(t.TEXT,u)},Ot.Tokenizer=l,Ot.TOKEN=t,Ot}var Cn;function xs(){if(Cn)return hi;Cn=1;var e=Sa().Options,a=Ii().Output,n=wn().Tokenizer,i=wn().TOKEN,s=/\r\n|[\r\n]/,t=/\r\n|[\r\n]/g,o=function(m,p){this.indent_level=0,this.alignment_size=0,this.max_preserve_newlines=m.max_preserve_newlines,this.preserve_newlines=m.preserve_newlines,this._output=new a(m,p)};o.prototype.current_line_has_match=function(m){return this._output.current_line.has_match(m)},o.prototype.set_space_before_token=function(m,p){this._output.space_before_token=m,this._output.non_breaking_space=p},o.prototype.set_wrap_point=function(){this._output.set_indent(this.indent_level,this.alignment_size),this._output.set_wrap_point()},o.prototype.add_raw_token=function(m){this._output.add_raw_token(m)},o.prototype.print_preserved_newlines=function(m){var p=0;m.type!==i.TEXT&&m.previous.type!==i.TEXT&&(p=m.newlines?1:0),this.preserve_newlines&&(p=m.newlines<this.max_preserve_newlines+1?m.newlines:this.max_preserve_newlines+1);for(var y=0;y<p;y++)this.print_newline(y>0);return p!==0},o.prototype.traverse_whitespace=function(m){return m.whitespace_before||m.newlines?(this.print_preserved_newlines(m)||(this._output.space_before_token=!0),!0):!1},o.prototype.previous_token_wrapped=function(){return this._output.previous_token_wrapped},o.prototype.print_newline=function(m){this._output.add_new_line(m)},o.prototype.print_token=function(m){m.text&&(this._output.set_indent(this.indent_level,this.alignment_size),this._output.add_token(m.text))},o.prototype.indent=function(){this.indent_level++},o.prototype.get_full_indent=function(m){return m=this.indent_level+(m||0),m<1?"":this._output.get_indent_string(m)};var l=function(m){for(var p=null,y=m.next;y.type!==i.EOF&&m.closed!==y;){if(y.type===i.ATTRIBUTE&&y.text==="type"){y.next&&y.next.type===i.EQUALS&&y.next.next&&y.next.next.type===i.VALUE&&(p=y.next.next.text);break}y=y.next}return p},r=function(m,p){var y=null,R=null;return p.closed?(m==="script"?y="text/javascript":m==="style"&&(y="text/css"),y=l(p)||y,y.search("text/css")>-1?R="css":y.search(/module|((text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect))/)>-1?R="javascript":y.search(/(text|application|dojo)\/(x-)?(html)/)>-1?R="html":y.search(/test\/null/)>-1&&(R="null"),R):null};function u(m,p){return p.indexOf(m)!==-1}function f(m,p,y){this.parent=m||null,this.tag=p?p.tag_name:"",this.indent_level=y||0,this.parser_token=p||null}function d(m){this._printer=m,this._current_frame=null}d.prototype.get_parser_token=function(){return this._current_frame?this._current_frame.parser_token:null},d.prototype.record_tag=function(m){var p=new f(this._current_frame,m,this._printer.indent_level);this._current_frame=p},d.prototype._try_pop_frame=function(m){var p=null;return m&&(p=m.parser_token,this._printer.indent_level=m.indent_level,this._current_frame=m.parent),p},d.prototype._get_frame=function(m,p){for(var y=this._current_frame;y&&m.indexOf(y.tag)===-1;){if(p&&p.indexOf(y.tag)!==-1){y=null;break}y=y.parent}return y},d.prototype.try_pop=function(m,p){var y=this._get_frame([m],p);return this._try_pop_frame(y)},d.prototype.indent_to_tag=function(m){var p=this._get_frame(m);p&&(this._printer.indent_level=p.indent_level)};function h(m,p,y,R){this._source_text=m||"",p=p||{},this._js_beautify=y,this._css_beautify=R,this._tag_stack=null;var I=new e(p,"html");this._options=I,this._is_wrap_attributes_force=this._options.wrap_attributes.substr(0,5)==="force",this._is_wrap_attributes_force_expand_multiline=this._options.wrap_attributes==="force-expand-multiline",this._is_wrap_attributes_force_aligned=this._options.wrap_attributes==="force-aligned",this._is_wrap_attributes_aligned_multiple=this._options.wrap_attributes==="aligned-multiple",this._is_wrap_attributes_preserve=this._options.wrap_attributes.substr(0,8)==="preserve",this._is_wrap_attributes_preserve_aligned=this._options.wrap_attributes==="preserve-aligned"}h.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var m=this._source_text,p=this._options.eol;this._options.eol==="auto"&&(p=`
`,m&&s.test(m)&&(p=m.match(s)[0])),m=m.replace(t,`
`);var y=m.match(/^[\t ]*/)[0],R={text:"",type:""},I=new v,W=new o(this._options,y),E=new n(m,this._options).tokenize();this._tag_stack=new d(W);for(var k=null,w=E.next();w.type!==i.EOF;)w.type===i.TAG_OPEN||w.type===i.COMMENT?(k=this._handle_tag_open(W,w,I,R),I=k):w.type===i.ATTRIBUTE||w.type===i.EQUALS||w.type===i.VALUE||w.type===i.TEXT&&!I.tag_complete?k=this._handle_inside_tag(W,w,I,E):w.type===i.TAG_CLOSE?k=this._handle_tag_close(W,w,I):w.type===i.TEXT?k=this._handle_text(W,w,I):W.add_raw_token(w),R=k,w=E.next();var x=W._output.get_code(p);return x},h.prototype._handle_tag_close=function(m,p,y){var R={text:p.text,type:p.type};return m.alignment_size=0,y.tag_complete=!0,m.set_space_before_token(p.newlines||p.whitespace_before!=="",!0),y.is_unformatted?m.add_raw_token(p):(y.tag_start_char==="<"&&(m.set_space_before_token(p.text[0]==="/",!0),this._is_wrap_attributes_force_expand_multiline&&y.has_wrapped_attrs&&m.print_newline(!1)),m.print_token(p)),y.indent_content&&!(y.is_unformatted||y.is_content_unformatted)&&(m.indent(),y.indent_content=!1),!y.is_inline_element&&!(y.is_unformatted||y.is_content_unformatted)&&m.set_wrap_point(),R},h.prototype._handle_inside_tag=function(m,p,y,R){var I=y.has_wrapped_attrs,W={text:p.text,type:p.type};if(m.set_space_before_token(p.newlines||p.whitespace_before!=="",!0),y.is_unformatted)m.add_raw_token(p);else if(y.tag_start_char==="{"&&p.type===i.TEXT)m.print_preserved_newlines(p)?(p.newlines=0,m.add_raw_token(p)):m.print_token(p);else{if(p.type===i.ATTRIBUTE?(m.set_space_before_token(!0),y.attr_count+=1):(p.type===i.EQUALS||p.type===i.VALUE&&p.previous.type===i.EQUALS)&&m.set_space_before_token(!1),p.type===i.ATTRIBUTE&&y.tag_start_char==="<"&&((this._is_wrap_attributes_preserve||this._is_wrap_attributes_preserve_aligned)&&(m.traverse_whitespace(p),I=I||p.newlines!==0),this._is_wrap_attributes_force)){var E=y.attr_count>1;if(this._is_wrap_attributes_force_expand_multiline&&y.attr_count===1){var k=!0,w=0,x;do{if(x=R.peek(w),x.type===i.ATTRIBUTE){k=!1;break}w+=1}while(w<4&&x.type!==i.EOF&&x.type!==i.TAG_CLOSE);E=!k}E&&(m.print_newline(!1),I=!0)}m.print_token(p),I=I||m.previous_token_wrapped(),y.has_wrapped_attrs=I}return W},h.prototype._handle_text=function(m,p,y){var R={text:p.text,type:"TK_CONTENT"};return y.custom_beautifier_name?this._print_custom_beatifier_text(m,p,y):y.is_unformatted||y.is_content_unformatted?m.add_raw_token(p):(m.traverse_whitespace(p),m.print_token(p)),R},h.prototype._print_custom_beatifier_text=function(m,p,y){var R=this;if(p.text!==""){var I=p.text,W,E=1,k="",w="";y.custom_beautifier_name==="javascript"&&typeof this._js_beautify=="function"?W=this._js_beautify:y.custom_beautifier_name==="css"&&typeof this._css_beautify=="function"?W=this._css_beautify:y.custom_beautifier_name==="html"&&(W=function(U,q){var H=new h(U,q,R._js_beautify,R._css_beautify);return H.beautify()}),this._options.indent_scripts==="keep"?E=0:this._options.indent_scripts==="separate"&&(E=-m.indent_level);var x=m.get_full_indent(E);if(I=I.replace(/\n[ \t]*$/,""),y.custom_beautifier_name!=="html"&&I[0]==="<"&&I.match(/^(<!--|<!\[CDATA\[)/)){var c=/^(<!--[^\n]*|<!\[CDATA\[)(\n?)([ \t\n]*)([\s\S]*)(-->|]]>)$/.exec(I);if(!c){m.add_raw_token(p);return}k=x+c[1]+`
`,I=c[4],c[5]&&(w=x+c[5]),I=I.replace(/\n[ \t]*$/,""),(c[2]||c[3].indexOf(`
`)!==-1)&&(c=c[3].match(/[ \t]+$/),c&&(p.whitespace_before=c[0]))}if(I)if(W){var S=function(){this.eol=`
`};S.prototype=this._options.raw_options;var O=new S;I=W(x+I,O)}else{var $=p.whitespace_before;$&&(I=I.replace(new RegExp(`
(`+$+")?","g"),`
`)),I=x+I.replace(/\n/g,`
`+x)}k&&(I?I=k+I+`
`+w:I=k+w),m.print_newline(!1),I&&(p.text=I,p.whitespace_before="",p.newlines=0,m.add_raw_token(p),m.print_newline(!0))}},h.prototype._handle_tag_open=function(m,p,y,R){var I=this._get_tag_open_token(p);return(y.is_unformatted||y.is_content_unformatted)&&!y.is_empty_element&&p.type===i.TAG_OPEN&&p.text.indexOf("</")===0?(m.add_raw_token(p),I.start_tag_token=this._tag_stack.try_pop(I.tag_name)):(m.traverse_whitespace(p),this._set_tag_position(m,p,I,y,R),I.is_inline_element||m.set_wrap_point(),m.print_token(p)),(this._is_wrap_attributes_force_aligned||this._is_wrap_attributes_aligned_multiple||this._is_wrap_attributes_preserve_aligned)&&(I.alignment_size=p.text.length+1),!I.tag_complete&&!I.is_unformatted&&(m.alignment_size=I.alignment_size),I};var v=function(m,p){if(this.parent=m||null,this.text="",this.type="TK_TAG_OPEN",this.tag_name="",this.is_inline_element=!1,this.is_unformatted=!1,this.is_content_unformatted=!1,this.is_empty_element=!1,this.is_start_tag=!1,this.is_end_tag=!1,this.indent_content=!1,this.multiline_content=!1,this.custom_beautifier_name=null,this.start_tag_token=null,this.attr_count=0,this.has_wrapped_attrs=!1,this.alignment_size=0,this.tag_complete=!1,this.tag_start_char="",this.tag_check="",!p)this.tag_complete=!0;else{var y;this.tag_start_char=p.text[0],this.text=p.text,this.tag_start_char==="<"?(y=p.text.match(/^<([^\s>]*)/),this.tag_check=y?y[1]:""):(y=p.text.match(/^{{(?:[\^]|#\*?)?([^\s}]+)/),this.tag_check=y?y[1]:"",p.text==="{{#>"&&this.tag_check===">"&&p.next!==null&&(this.tag_check=p.next.text)),this.tag_check=this.tag_check.toLowerCase(),p.type===i.COMMENT&&(this.tag_complete=!0),this.is_start_tag=this.tag_check.charAt(0)!=="/",this.tag_name=this.is_start_tag?this.tag_check:this.tag_check.substr(1),this.is_end_tag=!this.is_start_tag||p.closed&&p.closed.text==="/>",this.is_end_tag=this.is_end_tag||this.tag_start_char==="{"&&(this.text.length<3||/[^#\^]/.test(this.text.charAt(2)))}};h.prototype._get_tag_open_token=function(m){var p=new v(this._tag_stack.get_parser_token(),m);return p.alignment_size=this._options.wrap_attributes_indent_size,p.is_end_tag=p.is_end_tag||u(p.tag_check,this._options.void_elements),p.is_empty_element=p.tag_complete||p.is_start_tag&&p.is_end_tag,p.is_unformatted=!p.tag_complete&&u(p.tag_check,this._options.unformatted),p.is_content_unformatted=!p.is_empty_element&&u(p.tag_check,this._options.content_unformatted),p.is_inline_element=u(p.tag_name,this._options.inline)||p.tag_start_char==="{",p},h.prototype._set_tag_position=function(m,p,y,R,I){if(y.is_empty_element||(y.is_end_tag?y.start_tag_token=this._tag_stack.try_pop(y.tag_name):(this._do_optional_end_element(y)&&(y.is_inline_element||m.print_newline(!1)),this._tag_stack.record_tag(y),(y.tag_name==="script"||y.tag_name==="style")&&!(y.is_unformatted||y.is_content_unformatted)&&(y.custom_beautifier_name=r(y.tag_check,p)))),u(y.tag_check,this._options.extra_liners)&&(m.print_newline(!1),m._output.just_added_blankline()||m.print_newline(!0)),y.is_empty_element){if(y.tag_start_char==="{"&&y.tag_check==="else"){this._tag_stack.indent_to_tag(["if","unless","each"]),y.indent_content=!0;var W=m.current_line_has_match(/{{#if/);W||m.print_newline(!1)}y.tag_name==="!--"&&I.type===i.TAG_CLOSE&&R.is_end_tag&&y.text.indexOf(`
`)===-1||(y.is_inline_element||y.is_unformatted||m.print_newline(!1),this._calcluate_parent_multiline(m,y))}else if(y.is_end_tag){var E=!1;E=y.start_tag_token&&y.start_tag_token.multiline_content,E=E||!y.is_inline_element&&!(R.is_inline_element||R.is_unformatted)&&!(I.type===i.TAG_CLOSE&&y.start_tag_token===R)&&I.type!=="TK_CONTENT",(y.is_content_unformatted||y.is_unformatted)&&(E=!1),E&&m.print_newline(!1)}else y.indent_content=!y.custom_beautifier_name,y.tag_start_char==="<"&&(y.tag_name==="html"?y.indent_content=this._options.indent_inner_html:y.tag_name==="head"?y.indent_content=this._options.indent_head_inner_html:y.tag_name==="body"&&(y.indent_content=this._options.indent_body_inner_html)),!(y.is_inline_element||y.is_unformatted)&&(I.type!=="TK_CONTENT"||y.is_content_unformatted)&&m.print_newline(!1),this._calcluate_parent_multiline(m,y)},h.prototype._calcluate_parent_multiline=function(m,p){p.parent&&m._output.just_added_newline()&&!((p.is_inline_element||p.is_unformatted)&&p.parent.is_inline_element)&&(p.parent.multiline_content=!0)};var b=["address","article","aside","blockquote","details","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hr","main","nav","ol","p","pre","section","table","ul"],g=["a","audio","del","ins","map","noscript","video"];return h.prototype._do_optional_end_element=function(m){var p=null;if(!(m.is_empty_element||!m.is_start_tag||!m.parent)){if(m.tag_name==="body")p=p||this._tag_stack.try_pop("head");else if(m.tag_name==="li")p=p||this._tag_stack.try_pop("li",["ol","ul"]);else if(m.tag_name==="dd"||m.tag_name==="dt")p=p||this._tag_stack.try_pop("dt",["dl"]),p=p||this._tag_stack.try_pop("dd",["dl"]);else if(m.parent.tag_name==="p"&&b.indexOf(m.tag_name)!==-1){var y=m.parent.parent;(!y||g.indexOf(y.tag_name)===-1)&&(p=p||this._tag_stack.try_pop("p"))}else m.tag_name==="rp"||m.tag_name==="rt"?(p=p||this._tag_stack.try_pop("rt",["ruby","rtc"]),p=p||this._tag_stack.try_pop("rp",["ruby","rtc"])):m.tag_name==="optgroup"?p=p||this._tag_stack.try_pop("optgroup",["select"]):m.tag_name==="option"?p=p||this._tag_stack.try_pop("option",["select","datalist","optgroup"]):m.tag_name==="colgroup"?p=p||this._tag_stack.try_pop("caption",["table"]):m.tag_name==="thead"?(p=p||this._tag_stack.try_pop("caption",["table"]),p=p||this._tag_stack.try_pop("colgroup",["table"])):m.tag_name==="tbody"||m.tag_name==="tfoot"?(p=p||this._tag_stack.try_pop("caption",["table"]),p=p||this._tag_stack.try_pop("colgroup",["table"]),p=p||this._tag_stack.try_pop("thead",["table"]),p=p||this._tag_stack.try_pop("tbody",["table"])):m.tag_name==="tr"?(p=p||this._tag_stack.try_pop("caption",["table"]),p=p||this._tag_stack.try_pop("colgroup",["table"]),p=p||this._tag_stack.try_pop("tr",["table","thead","tbody","tfoot"])):(m.tag_name==="th"||m.tag_name==="td")&&(p=p||this._tag_stack.try_pop("td",["table","thead","tbody","tfoot","tr"]),p=p||this._tag_stack.try_pop("th",["table","thead","tbody","tfoot","tr"]));return m.parent=this._tag_stack.get_parser_token(),p}},hi.Beautifier=h,hi}var Tn;function Es(){if(Tn)return Dt.exports;Tn=1;var e=xs().Beautifier,a=Sa().Options;function n(i,s,t,o){var l=new e(i,s,t,o);return l.beautify()}return Dt.exports=n,Dt.exports.defaultOptions=function(){return new a},Dt.exports}var kn;function Ps(){if(kn)return ot;kn=1;var e=Ss(),a=Os(),n=Es();function i(s,t,o,l){return o=o||e,l=l||a,n(s,t,o,l)}return i.defaultOptions=n.defaultOptions,ot.js=e,ot.css=a,ot.html=i,ot}(function(e){function a(n,i,s){var t=function(o,l){return n.js_beautify(o,l)};return t.js=n.js_beautify,t.css=i.css_beautify,t.html=s.html_beautify,t.js_beautify=n.js_beautify,t.css_beautify=i.css_beautify,t.html_beautify=s.html_beautify,t}(function(n){var i=Ps();i.js_beautify=i.js,i.css_beautify=i.css,i.html_beautify=i.html,n.exports=a(i,i,i)})(e)})(ba);var Is=ba.exports;const tt=Si(Is);function Da(){const e=i=>(i||[]).some(s=>s.slot||s.search&&s.search.slot),a=i=>{let s="";return(i||[]).forEach(t=>{const o=t.formItemProps?t.formItemProps.slot:"";t.slot&&(s=s.length?`${s}
        <template #${t.slot}>
            <div>占位代码</div>
        </template>`:`${s}<template #${t.slot}>
        <div>占位代码</div>
    </template>`),o&&(s=s.length?`${s}
      <template #${o}>
          <div>占位代码</div>
      </template>`:`${s}<template #${o}>
      <div>占位代码</div>
  </template>`)}),s};return{getCrudTemplateCode:(i,s)=>s.request?`<z-crud
      v-bind="config"
      v-model:formData="config.searchFormData"
      v-model:data="config.data"
      ${s.pagination?'v-model:pagination="config.pagination"':""}
      v-model:loading="config.loading"
    />`:e(i)?`<z-crud
          v-bind="config"
          v-model:formData="config.searchFormData"
          v-model:data="config.data"
          ${s.pagination?'v-model:pagination="config.pagination"':""}
          v-model:loading="config.loading"
          @reset="handleSearch"
          @search="handleSearch"
          ${s.pagination?'@refresh="handlePaginationChange"':""}
        >
      ${a(i)}
    </z-crud>`:`<z-crud
        v-bind="config"
        v-model:formData="config.searchFormData"
        v-model:data="config.data"
        ${s.pagination?'v-model:pagination="config.pagination"':""}
        v-model:loading="config.loading"
        @reset="handleSearch"
        @search="handleSearch"
        ${s.pagination?'@refresh="handlePaginationChange"':""}
      />`}}function Gt(){const{widgets:e}=ae();return{getTableData:()=>{var s,t,o,l,r;const n=[],i={};return(t=(s=e.value[0])==null?void 0:s.schema)!=null&&t.columns&&((r=(l=(o=e.value[0])==null?void 0:o.schema)==null?void 0:l.columns)==null||r.forEach(u=>{u.prop&&!u.type&&(i[u.prop]=`${u.prop} mock data`)}),["","","","",""].forEach((u,f)=>{n.push({id:f,...i})})),n}}}function Xt(e="page"){const{config:a,columns:n}=he("code","crud");return a.request?`
    function getTableData(params: any) {
      console.log(params, 'getTableData params')
      return new Promise((resolve) => {
        setTimeout(() => {
          const data = [
            {
              id: 1,
              name: 'Steven',
              gender: 'male',
              age: 22,
              time: '2020-01-01',
            },
            {
              id: 2,
              name: 'Helen',
              gender: 'male',
              age: 12,
              time: '2012-01-01',
            },
            {
              id: 3,
              name: 'Nancy',
              gender: 'female',
              age: 18,
              time: '2018-01-01',
            },
            {
              id: 4,
              name: 'Jack',
              gender: 'male',
              age: 28,
              time: '2028-01-01',
            },
          ]

          resolve({
            data: {
              page: 1,
              pageSize: 2,
              total: 4,
              list: ${a.pagination?"data.slice((config.pagination.page - 1) * config.pagination.pageSize, config.pagination.page * config.pagination.pageSize)":"data"},
            },
          })
        }, 100)
      })
    }

    function commonApi(params: any) {
      console.log(JSON.stringify(params), 'commonApi params')
      return new Promise((resolve) => {
        setTimeout(() => {
          resolve({
            msg: 'success',
            code: 200,
          })
        }, 100)
      })
    }
    `:`
  const getTableData = async () => {
    config.loading = true;
    try {
      const params = {
        ${a.pagination?"...config.pagination,":""}
        ...config.searchFormData,
      }
      await delay(200);
      config.data = tableData;
    } catch (error) {
      console.log(error, 'getTableData error');
    }
    config.loading = false;
  }

  ${a.pagination?`const handlePaginationChange = (val) => {
    config.pagination.page = val.page;
    config.pagination.pageSize = val.pageSize;
    getTableData();
  }`:""}

  const handleSearch = () => {
    ${a.pagination?"config.pagination.page = 1;":""}
    getTableData();
  }

  function delay(time: number) {
    return new Promise(function (resolve) {
      setTimeout(resolve, time);
    });
  }

  ${e==="dialog"?"":"getTableData();"}
  `}function Fs(){const{getCrudTemplateCode:e}=Da(),{config:a,columns:n}=he("code","crud"),{getTableData:i}=Gt();return{code:`
      <template>
        <el-dialog v-model="visible" title="标题" width="720px">
          ${e(a.tableCols,a)}
          <template #footer>
            <el-button size="default" @click="visible = false">取 消</el-button>
            <el-button type="primary" size="default" @click="visible = false"
              >确 定</el-button
            >
          </template>
        </el-dialog>
      </template>


      <script lang='ts' setup>
        import { reactive, ref, watch, nextTick } from 'vue';

        const props = withDefaults(
          defineProps<{
            modelValue: boolean;
          }>(),
          {
            modelValue: false,
          }
        );
        const emit = defineEmits(['update:modelValue']);
        const visible = ref(false);
        const config = reactive(${JSON.stringify({formDecorator:{name:"div"},tableDecorator:{name:"div"},loading:!1,...a,columns:n})});
        ${a.request?"":`const tableData = ${JSON.stringify(i())};`}

        watch(
          () => props.modelValue,
          (newValue) => {
            visible.value = newValue;
          },
          { immediate: true }
        );

        watch(visible, async (newValue) => {
          await nextTick();
          if (!newValue) {
            config.pagination = {
              page: 1,
              pageSize: 10,
              total: 0
            }
            config.data = []
          } else {
            ${a.request?"":"getTableData()"}
          }
          emit('update:modelValue', newValue);
        }, { immediate: true });


        ${Xt()}
      <\/script>`,getCrudTemplateCode:e}}function Sn(){}function As(){const{getCrudTemplateCode:e}=Da(),{config:a,columns:n}=he("code","crud"),{getTableData:i}=Gt();return{code:`
      <template>
        ${e(n,a)}
      </template>

      <script lang='ts' setup>
        import { reactive, ref } from 'vue';

        ${a.request?`const config = reactive(${JSON.stringify({loading:!1,...a,columns:n,searchApi:i,deleteApi:Sn,submitApi:Sn})});`:`
          const config = reactive(${JSON.stringify({loading:!1,...a,columns:n})});
          const tableData = ${JSON.stringify(i())};
          `}

        ${Xt()}
      <\/script>`,getCrudTemplateCode:e}}function Oa(e){const a=t=>{let o="";return t.forEach(l=>{l.slot&&(o=o.length?`${o}
        <template #${l.slot}>
            <div>占位代码</div>
        </template>`:`${o}<template #${l.slot}>
        <div>占位代码</div>
    </template>`)}),o},n=()=>e==="page"?["<template>","</template>"]:[`<template>
        <el-dialog v-model="visible" title="标题" width="720px">`,`<template #footer>
            <el-button @click="visible = false" size="default">取 消</el-button>
            <el-button type="primary"  size="default" :loading="isConfirmBtnLoading" @click="handleValidate"
              >确 定</el-button
            >
          </template>
        </el-dialog>
      </template>`],i=t=>t.some(o=>o.slot);return{getTemplateCode:t=>i(t)?`${n()[0]}
    <z-form
      ref="formRef"
      v-bind="formConfig"
      v-model="formData"
      :options="options"
      :columns="columns"
    >
      ${a(t)}
    </z-form>
  ${n()[1]}`:`
    ${n()[0]}
      <z-form
        ref="formRef"
        v-bind="formConfig"
        v-model="formData"
        :options="options"
        :columns="columns"
      />
      ${n()[1]}`}}function Rs(){const{columns:e,options:a,formData:n,formConfig:i}=he(),{getTemplateCode:s}=Oa("dialog");return`
    ${s(e)}

    <script lang='ts' setup>
      import { ref, watch, nextTick } from 'vue';
      import { ElMessage } from 'element-plus';

      const props = withDefaults(
        defineProps<{
          modelValue: boolean;
        }>(),
        {
          modelValue: false,
        }
      );
      const emit = defineEmits(['update:modelValue']);

      const formRef = ref();
      const isConfirmBtnLoading = ref(false);
      const visible = ref(false);
      const formData = ref(${JSON.stringify(n)})
      const formConfig = ${JSON.stringify(i)}
      const options = ${JSON.stringify(a)}
      const columns = ${JSON.stringify(e)}

      watch(
        () => props.modelValue,
        (newValue) => {
          visible.value = newValue;
        },
        { immediate: true }
      );

      watch(visible, async (newValue) => {
        await nextTick();
        if (!newValue) {

        } else {
          formRef.value.resetFields();
        }
        emit('update:modelValue', newValue);
      }, { immediate: true });

      const handleSubmit = async () => {
        isConfirmBtnLoading.value = true;
        try {
          isConfirmBtnLoading.value = false;
          ElMessage.success('成功');
          visible.value = false;
        } catch (error) {
          console.log(error, 'getTableData error');
        }
        isConfirmBtnLoading.value = false;
      };

      const handleValidate = () => {
        formRef.value.validate((val) => {
          if(val) {
            handleSubmit();
          }
        })
      };

    <\/script>`}function Ns(){const{columns:e,options:a,formData:n,formConfig:i}=he(),{getTemplateCode:s}=Oa("page");return`
    ${s(e)}

    <script lang='ts' setup>
      import { ref } from 'vue';

      const columns = ref(${JSON.stringify(e)})
      const formData = ref(${JSON.stringify(n)})
      const formConfig = ${JSON.stringify(i)}
      const options = ${JSON.stringify(a)}

    <\/script>`}function xa(){const{widgets:e}=ae(),{formConfig:a}=Ue(),{workspaceWidgetType:n}=ve(),i=j(()=>{var t,o;return n.value==="form"?a.value.background==="dialog":((o=(t=e.value[0])==null?void 0:t.componentFormData)==null?void 0:o.background)==="dialog"});return{getPageCode:()=>{if(n.value==="form")return i.value?Rs():Ns();const{code:t}=As();return n.value==="crud"?i.value?Fs().code:t:""}}}function Ea(){const e=i=>(i||[]).some(s=>s.slot||s.search&&s.search.slot),a=i=>{const s={};return(i||[]).forEach(t=>{const o=t.formItemProps?t.formItemProps.slot:"";t.slot&&(s[t.slot]=()=>T("div",null,[Ye("占位代码")])),o&&(s[o]=()=>T("div",null,[Ye("占位代码")]))}),s};return{getCrudRenderCode:(i,s)=>s.request?`<z-crud
        v-model:formData={config.searchFormData}
        v-model:data={config.data}
        ${s.pagination?"v-model:pagination={config.pagination}":""}
        v-model:loading={config.loading}
        {...config}
      />`:e(i)?`<z-crud
          v-model:formData={config.searchFormData}
          v-model:data={config.data}
          ${s.pagination?"v-model:pagination={config.pagination}":""}
          v-model:loading={config.loading}
          {...config}
          onReset={handleSearch}
          onSearch={handleSearch}
          ${s.pagination?"onRefresh={handlePaginationChange}":""}
        >
      ${a(i)}
      </z-crud>`:`<z-crud
        v-model:formData={config.searchFormData}
        v-model:data={config.data}
        ${s.pagination?"v-model:pagination={config.pagination}":""}
        v-model:loading={config.loading}
        {...config}
        onReset={handleSearch}
        onSearch={handleSearch}
        ${s.pagination?"onRefresh={handlePaginationChange}":""}
      />`}}function Ms(){const{getCrudRenderCode:e}=Ea(),{config:a,columns:n}=he("code","crud"),{getTableData:i}=Gt();return{code:`
      import { reactive, ref, watch, nextTick, defineComponent } from 'vue';

      export default defineComponent({
        name: 'MyComponent',
        props: {
          modelValue: {
            type: Boolean,
            default: false
          }
        },
        emits: ['update:modelValue'],
        setup(props, { emit }) {
          const visible = ref(false);
          const config = reactive(${JSON.stringify({formDecorator:{name:"div"},tableDecorator:{name:"div"},loading:!1,...a,columns:n})});
          ${a.request?"":`const tableData = ${JSON.stringify(i())};`}

          watch(
            () => props.modelValue,
            (newValue) => {
              visible.value = newValue;
            },
            { immediate: true }
          );

          watch(visible, async (newValue) => {
            await nextTick();
            if (!newValue) {
              config.pagination = {
                page: 1,
                pageSize: 10,
                total: 0
              }
              config.data = []
            } else {
              ${a.request?"":"getTableData()"}
            }
            emit('update:modelValue', newValue);
          }, { immediate: true });

          ${Xt("dialog")}

          const renderFooter = () => {
            return <>
              <el-button size="default" onClick={() => visible.value = false}>取 消</el-button>
              <el-button type="primary" size="default" onClick={() => visible.value = false}
                >确 定</el-button
              >
            </>
          }

          return () => {
            return <el-dialog
                v-model={visible.value}
                title="标题"
                width="620px"
                v-slots={{ footer: renderFooter }}
              >
              ${e(a.tableCols,a)}
            </el-dialog>
          }
        }
      })`,getCrudRenderCode:e}}function Dn(){}function Ws(){const{getCrudRenderCode:e}=Ea(),{config:a,columns:n}=he("code","crud"),{getTableData:i}=Gt();return{code:`
      import { reactive, ref, defineComponent } from 'vue';

      export default defineComponent({
        name: 'MyComponent',
        setup() {
          ${a.request?`const config = reactive(${JSON.stringify({loading:!1,...a,columns:n,searchApi:i,deleteApi:Dn,submitApi:Dn})});`:`
            const config = reactive(${JSON.stringify({loading:!1,...a,columns:n})});
            const tableData = ${JSON.stringify(i())};
            `}

          ${Xt()}
          return () => {
            return (${e(a.columns,a)})
          }
        }
      })`,getCrudRenderCode:e}}function Pa(e){const a=t=>{const o={};return t.forEach(l=>{l.slot&&(o[l.slot]="<div>占位代码</div>")}),o},n=()=>e==="page"?["",""]:[`<el-dialog
          v-model={visible.value}
          title="标题"
          width="620px"
          v-slots={{ footer: renderFooter }}
        >`,"</el-dialog>"],i=t=>t.some(o=>o.slot);return{getRenderCode:t=>e==="page"?i(t)?`<z-form
        ref={formRef}
        v-model={formData.value}
        {...formConfig}
        options={options}
        columns={columns.value}
        v-slots={${JSON.stringify(a(t))}}
      />`:`<z-form
          ref={formRef}
          v-model={formData.value}
          {...formConfig}
          options={options}
          columns={columns.value}
        />`:i(t)?`${n()[0]}
    <z-form
      ref={formRef}
      v-model={formData.value}
      {...formConfig}
      options={options}
      columns={columns}
      v-slots={${JSON.stringify(a(t))}}
    />
  ${n()[1]}`:`
    ${n()[0]}
      <z-form
        ref={formRef}
        v-model={formData.value}
        {...formConfig}
        options={options}
        columns={columns}
      />
      ${n()[1]}`}}function Ls(){const{columns:e,options:a,formData:n,formConfig:i}=he(),{getRenderCode:s}=Pa("dialog");return`
    import { ref, watch, nextTick, defineComponent } from 'vue';
    import { ElMessage } from 'element-plus';

    export default defineComponent({
      name: 'MyComponent',
      props: {
        modelValue: {
          type: Boolean,
          default: false
        }
      },
      emits: ['update:modelValue'],
      setup(props, { emit }) {
        const formRef = ref();
        const isConfirmBtnLoading = ref(false);
        const visible = ref(false);
        const formData = ref(${JSON.stringify(n)})
        const formConfig = ${JSON.stringify(i)}
        const options = ${JSON.stringify(a)}
        const columns = ${JSON.stringify(e)}

        watch(
          () => props.modelValue,
          (newValue) => {
            visible.value = newValue;
          },
          { immediate: true }
        );

        watch(visible, async (newValue) => {
          await nextTick();
          if (!newValue) {

          } else {
            formRef.value.resetFields();
          }
          emit('update:modelValue', newValue);
        }, { immediate: true });

        const handleSubmit = async () => {
          isConfirmBtnLoading.value = true;
          try {
            isConfirmBtnLoading.value = false;
            ElMessage.success('成功');
            visible.value = false;
          } catch (error) {
            console.log(error, 'getTableData error');
          }
          isConfirmBtnLoading.value = false;
        };

        const handleValidate = () => {
          formRef.value.validate((val) => {
            if(val) {
              handleSubmit();
            }
          })
        };

        const renderFooter = () => {
          return <>
            <el-button onClick={() => visible.value = false} size="default">取 消</el-button>
            <el-button type="primary"  size="default" loading={isConfirmBtnLoading.value} onClick={handleValidate}
              >确 定</el-button
            >
          </>
        };

        return () => {
          return (${s(e)})
        }
      }
    })`}function zs(){const{columns:e,options:a,formData:n,formConfig:i}=he(),{getRenderCode:s}=Pa("page");return`
    import { ref, defineComponent } from 'vue';

    export default defineComponent({
      name: 'MyForm',
      props: {},
      setup() {
        const columns = ref(${JSON.stringify(e)})
        const formData = ref(${JSON.stringify(n)})
        const formConfig = ${JSON.stringify(i)}
        const options = ${JSON.stringify(a)}
        const formRef = ref()

        return () => {
          return (${s(e)})
        }
      }
    })`}function Ia(){const{widgets:e}=ae(),{formConfig:a}=Ue(),{workspaceWidgetType:n}=ve(),i=j(()=>{var t,o;return n.value==="form"?a.value.background==="dialog":((o=(t=e.value[0])==null?void 0:t.componentFormData)==null?void 0:o.background)==="dialog"});return{getTsxCode:()=>{if(n.value==="form")return i.value?Ls():zs();const{code:t}=Ws();if(n.value==="crud")return i.value?Ms().code:t}}}const Bs=J({name:"CopyPageCodeWidget",setup(){const{getPageCode:e}=xa(),a=()=>{Ht(tt.html_beautify(e(),{indent_size:2})),_t.success("Template代码复制成功")};return()=>T(L("el-tooltip"),{effect:"light",content:"Template代码复制",placement:"top",showAfter:500},{default:()=>[T(L("el-button"),{onClick:a},{default:()=>[T(L("el-icon"),{size:"20"},{default:()=>[T("i",{class:["icon-fuzhi","iconfont"]},null)]})]})]})}}),$s=J({name:"CopySchemaCodeWidget",setup(){const{workspaceWidgetType:e}=ve(),a=()=>{const n=he("code",e.value);Ht(tt.js_beautify(JSON.stringify(e.value==="crud"?{...n.config,columns:n.columns}:n),{indent_size:2})),_t.success("JSON复制成功")};return()=>T(L("el-tooltip"),{effect:"light",content:"JSON复制",placement:"top",showAfter:500},{default:()=>[T(L("el-button"),{onClick:a},{default:()=>[T(L("el-icon"),{size:"20"},{default:()=>[T("i",{class:["icon-fuzhi1","iconfont"]},null)]})]})]})}});var Vs=Di();const Fa=Si(Vs);(function(e,a){(function(n){n(Di())})(function(n){var i=n.Pos,s="http://www.w3.org/2000/svg";function t(_,C){this.mv=_,this.type=C,this.classes=C=="left"?{chunk:"CodeMirror-merge-l-chunk",start:"CodeMirror-merge-l-chunk-start",end:"CodeMirror-merge-l-chunk-end",insert:"CodeMirror-merge-l-inserted",del:"CodeMirror-merge-l-deleted",connect:"CodeMirror-merge-l-connect"}:{chunk:"CodeMirror-merge-r-chunk",start:"CodeMirror-merge-r-chunk-start",end:"CodeMirror-merge-r-chunk-end",insert:"CodeMirror-merge-r-inserted",del:"CodeMirror-merge-r-deleted",connect:"CodeMirror-merge-r-connect"}}t.prototype={constructor:t,init:function(_,C,D){this.edit=this.mv.edit,(this.edit.state.diffViews||(this.edit.state.diffViews=[])).push(this),this.orig=n(_,le({value:C,readOnly:!this.mv.options.allowEditingOriginals},le(D))),this.mv.options.connect=="align"&&(this.edit.state.trackAlignable||(this.edit.state.trackAlignable=new ee(this.edit)),this.orig.state.trackAlignable=new ee(this.orig)),this.lockButton.title=this.edit.phrase("Toggle locked scrolling"),this.lockButton.setAttribute("aria-label",this.lockButton.title),this.orig.state.diffViews=[this];var P=D.chunkClassLocation||"background";Object.prototype.toString.call(P)!="[object Array]"&&(P=[P]),this.classes.classLocation=P,this.diff=H(U(C),U(D.value),this.mv.options.ignoreWhitespace),this.chunks=Z(this.diff),this.diffOutOfDate=this.dealigned=!1,this.needsScrollSync=null,this.showDifferences=D.showDifferences!==!1},registerEvents:function(_){this.forceUpdate=r(this),h(this,!0,!1),u(this,_)},setShowDifferences:function(_){_=_!==!1,_!=this.showDifferences&&(this.showDifferences=_,this.forceUpdate("full"))}};function o(_){_.diffOutOfDate&&(_.diff=H(_.orig.getValue(),_.edit.getValue(),_.mv.options.ignoreWhitespace),_.chunks=Z(_.diff),_.diffOutOfDate=!1,n.signal(_.edit,"updateDiff",_.diff))}var l=!1;function r(_){var C={from:0,to:0,marked:[]},D={from:0,to:0,marked:[]},P,F=!1;function A(Y){l=!0,F=!1,Y=="full"&&(_.svg&&K(_.svg),_.copyButtons&&K(_.copyButtons),b(_.edit,C.marked,_.classes),b(_.orig,D.marked,_.classes),C.from=C.to=D.from=D.to=0),o(_),_.showDifferences&&(g(_.edit,_.diff,C,DIFF_INSERT,_.classes),g(_.orig,_.diff,D,DIFF_DELETE,_.classes)),_.mv.options.connect=="align"&&k(_),y(_),_.needsScrollSync!=null&&f(_,_.needsScrollSync),l=!1}function M(Y){l||(_.dealigned=!0,B(Y))}function B(Y){l||F||(clearTimeout(P),Y===!0&&(F=!0),P=setTimeout(A,Y===!0?20:250))}function V(Y,ie){_.diffOutOfDate||(_.diffOutOfDate=!0,C.from=C.to=D.from=D.to=0),M(ie.text.length-1!=ie.to.line-ie.from.line)}function X(){_.diffOutOfDate=!0,_.dealigned=!0,A("full")}return _.edit.on("change",V),_.orig.on("change",V),_.edit.on("swapDoc",X),_.orig.on("swapDoc",X),_.mv.options.connect=="align"&&(n.on(_.edit.state.trackAlignable,"realign",M),n.on(_.orig.state.trackAlignable,"realign",M)),_.edit.on("viewportChange",function(){B(!1)}),_.orig.on("viewportChange",function(){B(!1)}),A(),A}function u(_,C){_.edit.on("scroll",function(){f(_,!0)&&y(_)}),_.orig.on("scroll",function(){f(_,!1)&&y(_),C&&f(C,!0)&&y(C)})}function f(_,C){if(_.diffOutOfDate)return _.lockScroll&&_.needsScrollSync==null&&(_.needsScrollSync=C),!1;if(_.needsScrollSync=null,!_.lockScroll)return!0;var D,P,F=+new Date;if(C?(D=_.edit,P=_.orig):(D=_.orig,P=_.edit),D.state.scrollSetBy==_&&(D.state.scrollSetAt||0)+250>F)return!1;var A=D.getScrollInfo();if(_.mv.options.connect=="align")se=A.top;else{var M=.5*A.clientHeight,B=A.top+M,V=D.lineAtHeight(B,"local"),X=ye(_.chunks,V,C),Y=d(D,C?X.edit:X.orig),ie=d(P,C?X.orig:X.edit),ue=(B-Y.top)/(Y.bot-Y.top),se=ie.top-M+ue*(ie.bot-ie.top),ce,we;if(se>A.top&&(we=A.top/M)<1)se=se*we+A.top*(1-we);else if((ce=A.height-A.clientHeight-A.top)<M){var Ae=P.getScrollInfo(),de=Ae.height-Ae.clientHeight-se;de>ce&&(we=ce/M)<1&&(se=se*we+(Ae.height-Ae.clientHeight-ce)*(1-we))}}return P.scrollTo(A.left,se),P.state.scrollSetAt=F,P.state.scrollSetBy=_,!0}function d(_,C){var D=C.after;return D==null&&(D=_.lastLine()+1),{top:_.heightAtLine(C.before||0,"local"),bot:_.heightAtLine(D,"local")}}function h(_,C,D){_.lockScroll=C,C&&D!=!1&&f(_,DIFF_INSERT)&&y(_),(C?n.addClass:n.rmClass)(_.lockButton,"CodeMirror-merge-scrolllock-enabled")}function v(_,C,D){for(var P=D.classLocation,F=0;F<P.length;F++)_.removeLineClass(C,P[F],D.chunk),_.removeLineClass(C,P[F],D.start),_.removeLineClass(C,P[F],D.end)}function b(_,C,D){for(var P=0;P<C.length;++P){var F=C[P];F instanceof n.TextMarker?F.clear():F.parent&&v(_,F,D)}C.length=0}function g(_,C,D,P,F){var A=_.getViewport();_.operation(function(){D.from==D.to||A.from-D.to>20||D.from-A.to>20?(b(_,D.marked,F),p(_,C,P,D.marked,A.from,A.to,F),D.from=A.from,D.to=A.to):(A.from<D.from&&(p(_,C,P,D.marked,A.from,D.from,F),D.from=A.from),A.to>D.to&&(p(_,C,P,D.marked,D.to,A.to,F),D.to=A.to))})}function m(_,C,D,P,F,A){for(var M=D.classLocation,B=_.getLineHandle(C),V=0;V<M.length;V++)P&&_.addLineClass(B,M[V],D.chunk),F&&_.addLineClass(B,M[V],D.start),A&&_.addLineClass(B,M[V],D.end);return B}function p(_,C,D,P,F,A,M){var B=i(0,0),V=i(F,0),X=_.clipPos(i(A-1)),Y=D==DIFF_DELETE?M.del:M.insert;function ie(Yt,nt){for(var at=Math.max(F,Yt),Ui=Math.min(A,nt),lt=at;lt<Ui;++lt)P.push(m(_,lt,M,!0,lt==Yt,lt==nt-1));Yt==nt&&at==nt&&Ui==nt&&(at?P.push(m(_,at-1,M,!1,!1,!0)):P.push(m(_,at,M,!1,!0,!1)))}for(var ue=0,se=!1,ce=0;ce<C.length;++ce){var we=C[ce],Ae=we[0],de=we[1];if(Ae==DIFF_EQUAL){var Li=B.line+(ne(C,ce)?0:1);Oe(B,de);var zi=B.line+(te(C,ce)?1:0);zi>Li&&(se&&(ie(ue,Li),se=!1),ue=zi)}else if(se=!0,Ae==D){var Bi=Oe(B,de,!0),$i=We(V,B),Vi=pe(X,Bi);gt($i,Vi)||P.push(_.markText($i,Vi,{className:Y})),B=Bi}}se&&ie(ue,B.line+1)}function y(_){if(_.showDifferences){if(_.svg){K(_.svg);var C=_.gap.offsetWidth;Pe(_.svg,"width",C,"height",_.gap.offsetHeight)}_.copyButtons&&K(_.copyButtons);for(var D=_.edit.getViewport(),P=_.orig.getViewport(),F=_.mv.wrap.getBoundingClientRect().top,A=F-_.edit.getScrollerElement().getBoundingClientRect().top+_.edit.getScrollInfo().top,M=F-_.orig.getScrollerElement().getBoundingClientRect().top+_.orig.getScrollInfo().top,B=0;B<_.chunks.length;B++){var V=_.chunks[B];V.editFrom<=D.to&&V.editTo>=D.from&&V.origFrom<=P.to&&V.origTo>=P.from&&c(_,V,M,A,C)}}}function R(_,C){for(var D=0,P=0,F=0;F<C.length;F++){var A=C[F];if(A.editTo>_&&A.editFrom<=_)return null;if(A.editFrom>_)break;D=A.editTo,P=A.origTo}return P+(_-D)}function I(_,C,D){for(var P=_.state.trackAlignable,F=_.firstLine(),A=0,M=[],B=0;;B++){for(var V=C[B],X=V?D?V.origFrom:V.editFrom:1e9;A<P.alignable.length;A+=2){var Y=P.alignable[A]+1;if(!(Y<=F))if(Y<=X)M.push(Y);else break}if(!V)break;M.push(F=D?V.origTo:V.editTo)}return M}function W(_,C,D,P){var F=0,A=0,M=0,B=0;e:for(;;F++){var V=_[F],X=C[A];if(!V&&X==null)break;for(var Y=V?V[0]:1e9,ie=X??1e9;M<D.length;){var ue=D[M];if(ue.origFrom<=ie&&ue.origTo>ie){A++,F--;continue e}if(ue.editTo>Y){if(ue.editFrom<=Y)continue e;break}B+=ue.origTo-ue.origFrom-(ue.editTo-ue.editFrom),M++}if(Y==ie-B)V[P]=ie,A++;else if(Y<ie-B)V[P]=Y+B;else{var se=[ie-B,null,null];se[P]=ie,_.splice(F,0,se),A++}}}function E(_,C){var D=I(_.edit,_.chunks,!1),P=[];if(C)for(var F=0,A=0;F<C.chunks.length;F++){for(var M=C.chunks[F].editTo;A<D.length&&D[A]<M;)A++;(A==D.length||D[A]!=M)&&D.splice(A++,0,M)}for(var F=0;F<D.length;F++)P.push([D[F],null,null]);return W(P,I(_.orig,_.chunks,!0),_.chunks,1),C&&W(P,I(C.orig,C.chunks,!0),C.chunks,2),P}function k(_,C){if(!(!_.dealigned&&!C)){if(!_.orig.curOp)return _.orig.operation(function(){k(_,C)});_.dealigned=!1;var D=_.mv.left==_?_.mv.right:_.mv.left;D&&(o(D),D.dealigned=!1);for(var P=E(_,D),F=_.mv.aligners,A=0;A<F.length;A++)F[A].clear();F.length=0;var M=[_.edit,_.orig],B=[],V=[];D&&M.push(D.orig);for(var A=0;A<M.length;A++)B.push(M[A].getScrollInfo().top),V.push(-M[A].getScrollerElement().getBoundingClientRect().top);(V[0]!=V[1]||M.length==3&&V[1]!=V[2])&&w(M,V,[0,0,0],F);for(var X=0;X<P.length;X++)w(M,V,P[X],F);for(var A=0;A<M.length;A++)M[A].scrollTo(null,B[A])}}function w(_,C,D,P){for(var F=-1e8,A=[],M=0;M<_.length;M++)if(D[M]!=null){var B=_[M].heightAtLine(D[M],"local")-C[M];A[M]=B,F=Math.max(F,B)}for(var M=0;M<_.length;M++)if(D[M]!=null){var V=F-A[M];V>1&&P.push(x(_[M],D[M],V))}}function x(_,C,D){var P=!0;C>_.lastLine()&&(C--,P=!1);var F=document.createElement("div");return F.className="CodeMirror-merge-spacer",F.style.height=D+"px",F.style.minWidth="1px",_.addLineWidget(C,F,{height:D,above:P,mergeSpacer:!0,handleMouseEvents:!0})}function c(_,C,D,P,F){var A=_.type=="left",M=_.orig.heightAtLine(C.origFrom,"local",!0)-D;if(_.svg){var B=M,V=_.edit.heightAtLine(C.editFrom,"local",!0)-P;if(A){var X=B;B=V,V=X}var Y=_.orig.heightAtLine(C.origTo,"local",!0)-D,ie=_.edit.heightAtLine(C.editTo,"local",!0)-P;if(A){var X=Y;Y=ie,ie=X}var ue=" C "+F/2+" "+V+" "+F/2+" "+B+" "+(F+2)+" "+B,se=" C "+F/2+" "+Y+" "+F/2+" "+ie+" -1 "+ie;Pe(_.svg.appendChild(document.createElementNS(s,"path")),"d","M -1 "+V+ue+" L "+(F+2)+" "+Y+se+" z","class",_.classes.connect)}if(_.copyButtons){var ce=_.copyButtons.appendChild(fe("div",_.type=="left"?"⇝":"⇜","CodeMirror-merge-copy")),we=_.mv.options.allowEditingOriginals;if(ce.title=_.edit.phrase(we?"Push to left":"Revert chunk"),ce.chunk=C,ce.style.top=(C.origTo>C.origFrom?M:_.edit.heightAtLine(C.editFrom,"local")-P)+"px",ce.setAttribute("role","button"),ce.setAttribute("tabindex","0"),ce.setAttribute("aria-label",ce.title),we){var Ae=_.edit.heightAtLine(C.editFrom,"local")-P,de=_.copyButtons.appendChild(fe("div",_.type=="right"?"⇝":"⇜","CodeMirror-merge-copy-reverse"));de.title="Push to right",de.chunk={editFrom:C.origFrom,editTo:C.origTo,origFrom:C.editFrom,origTo:C.editTo},de.style.top=Ae+"px",_.type=="right"?de.style.left="2px":de.style.right="2px",de.setAttribute("role","button"),de.setAttribute("tabindex","0"),de.setAttribute("aria-label",de.title)}}}function S(_,C,D,P){if(!_.diffOutOfDate){var F=P.origTo>D.lastLine()?i(P.origFrom-1):i(P.origFrom,0),A=i(P.origTo,0),M=P.editTo>C.lastLine()?i(P.editFrom-1):i(P.editFrom,0),B=i(P.editTo,0),V=_.mv.options.revertChunk;V?V(_.mv,D,F,A,C,M,B):C.replaceRange(D.getRange(F,A),M,B)}}var O=n.MergeView=function(_,C){if(!(this instanceof O))return new O(_,C);this.options=C;var D=C.origLeft,P=C.origRight==null?C.orig:C.origRight,F=D!=null,A=P!=null,M=1+(F?1:0)+(A?1:0),B=[],V=this.left=null,X=this.right=null,Y=this;if(F){V=this.left=new t(this,"left");var ie=fe("div",null,"CodeMirror-merge-pane CodeMirror-merge-left");B.push(ie),B.push($(V))}var ue=fe("div",null,"CodeMirror-merge-pane CodeMirror-merge-editor");if(B.push(ue),A){X=this.right=new t(this,"right"),B.push($(X));var se=fe("div",null,"CodeMirror-merge-pane CodeMirror-merge-right");B.push(se)}(A?se:ue).className+=" CodeMirror-merge-pane-rightmost",B.push(fe("div",null,null,"height: 0; clear: both;"));var ce=this.wrap=_.appendChild(fe("div",B,"CodeMirror-merge CodeMirror-merge-"+M+"pane"));this.edit=n(ue,le(C)),V&&V.init(ie,D,C),X&&X.init(se,P,C),C.collapseIdentical&&this.editor().operation(function(){Ee(Y,C.collapseIdentical)}),C.connect=="align"&&(this.aligners=[],k(this.left||this.right,!0)),V&&V.registerEvents(X),X&&X.registerEvents(V);var we=function(){V&&y(V),X&&y(X)};n.on(window,"resize",we);var Ae=setInterval(function(){for(var de=ce.parentNode;de&&de!=document.body;de=de.parentNode);de||(clearInterval(Ae),n.off(window,"resize",we))},5e3)};function $(_){var C=_.lockButton=fe("div",null,"CodeMirror-merge-scrolllock");C.setAttribute("role","button"),C.setAttribute("tabindex","0");var D=fe("div",[C],"CodeMirror-merge-scrolllock-wrap");n.on(C,"click",function(){h(_,!_.lockScroll)}),n.on(C,"keyup",function(M){(M.key==="Enter"||M.code==="Space")&&h(_,!_.lockScroll)});var P=[D];if(_.mv.options.revertButtons!==!1){_.copyButtons=fe("div",null,"CodeMirror-merge-copybuttons-"+_.type);var F=function(M){var B=M.target||M.srcElement;if(B.chunk){if(B.className=="CodeMirror-merge-copy-reverse"){S(_,_.orig,_.edit,B.chunk);return}S(_,_.edit,_.orig,B.chunk)}};n.on(_.copyButtons,"click",F),n.on(_.copyButtons,"keyup",function(M){(M.key==="Enter"||M.code==="Space")&&F(M)}),P.unshift(_.copyButtons)}if(_.mv.options.connect!="align"){var A=document.createElementNS&&document.createElementNS(s,"svg");A&&!A.createSVGRect&&(A=null),_.svg=A,A&&P.push(A)}return _.gap=fe("div",P,"CodeMirror-merge-gap")}O.prototype={constructor:O,editor:function(){return this.edit},rightOriginal:function(){return this.right&&this.right.orig},leftOriginal:function(){return this.left&&this.left.orig},setShowDifferences:function(_){this.right&&this.right.setShowDifferences(_),this.left&&this.left.setShowDifferences(_)},rightChunks:function(){if(this.right)return o(this.right),this.right.chunks},leftChunks:function(){if(this.left)return o(this.left),this.left.chunks}};function U(_){return typeof _=="string"?_:_.getValue()}var q;function H(_,C,D){q||(q=new diff_match_patch);for(var P=q.diff_main(_,C),F=0;F<P.length;++F){var A=P[F];(D?!/[^ \t]/.test(A[1]):!A[1])?P.splice(F--,1):F&&P[F-1][0]==A[0]&&(P.splice(F--,1),P[F][1]+=A[1])}return P}function Z(_){var C=[];if(!_.length)return C;for(var D=0,P=0,F=i(0,0),A=i(0,0),M=0;M<_.length;++M){var B=_[M],V=B[0];if(V==DIFF_EQUAL){var X=!ne(_,M)||F.line<D||A.line<P?1:0,Y=F.line+X,ie=A.line+X;Oe(F,B[1],null,A);var ue=te(_,M)?1:0,se=F.line+ue,ce=A.line+ue;se>Y&&(M&&C.push({origFrom:P,origTo:ie,editFrom:D,editTo:Y}),D=se,P=ce)}else Oe(V==DIFF_INSERT?F:A,B[1])}return(D<=F.line||P<=A.line)&&C.push({origFrom:P,origTo:A.line+1,editFrom:D,editTo:F.line+1}),C}function te(_,C){if(C==_.length-1)return!0;var D=_[C+1][1];return D.length==1&&C<_.length-2||D.charCodeAt(0)!=10?!1:C==_.length-2?!0:(D=_[C+2][1],(D.length>1||C==_.length-3)&&D.charCodeAt(0)==10)}function ne(_,C){if(C==0)return!0;var D=_[C-1][1];return D.charCodeAt(D.length-1)!=10?!1:C==1?!0:(D=_[C-2][1],D.charCodeAt(D.length-1)==10)}function ye(_,C,D){for(var P,F,A,M,B=0;B<_.length;B++){var V=_[B],X=D?V.editFrom:V.origFrom,Y=D?V.editTo:V.origTo;F==null&&(X>C?(F=V.editFrom,M=V.origFrom):Y>C&&(F=V.editTo,M=V.origTo)),Y<=C?(P=V.editTo,A=V.origTo):X<=C&&(P=V.editFrom,A=V.origFrom)}return{edit:{before:P,after:F},orig:{before:A,after:M}}}function Ce(_,C,D){_.addLineClass(C,"wrap","CodeMirror-merge-collapsed-line");var P=document.createElement("span");P.className="CodeMirror-merge-collapsed-widget",P.title=_.phrase("Identical text collapsed. Click to expand.");var F=_.markText(i(C,0),i(D-1),{inclusiveLeft:!0,inclusiveRight:!0,replacedWith:P,clearOnEnter:!0});function A(){F.clear(),_.removeLineClass(C,"wrap","CodeMirror-merge-collapsed-line")}return F.explicitlyCleared&&A(),n.on(P,"click",A),F.on("clear",A),n.on(P,"click",A),{mark:F,clear:A}}function Te(_,C){var D=[];function P(){for(var B=0;B<D.length;B++)D[B].clear()}for(var F=0;F<C.length;F++){var A=C[F],M=Ce(A.cm,A.line,A.line+_);D.push(M),M.mark.on("clear",P)}return D[0].mark}function ke(_,C,D,P){for(var F=0;F<_.chunks.length;F++)for(var A=_.chunks[F],M=A.editFrom-C;M<A.editTo+C;M++){var B=M+D;B>=0&&B<P.length&&(P[B]=!1)}}function Ee(_,C){typeof C!="number"&&(C=2);for(var D=[],P=_.editor(),F=P.firstLine(),A=F,M=P.lastLine();A<=M;A++)D.push(!0);_.left&&ke(_.left,C,F,D),_.right&&ke(_.right,C,F,D);for(var B=0;B<D.length;B++)if(D[B]){for(var V=B+F,X=1;B<D.length-1&&D[B+1];B++,X++);if(X>C){var Y=[{line:V,cm:P}];_.left&&Y.push({line:R(V,_.left.chunks),cm:_.left.orig}),_.right&&Y.push({line:R(V,_.right.chunks),cm:_.right.orig});var ie=Te(X,Y);_.options.onCollapse&&_.options.onCollapse(_,V,X,ie)}}}function fe(_,C,D,P){var F=document.createElement(_);if(D&&(F.className=D),P&&(F.style.cssText=P),typeof C=="string")F.appendChild(document.createTextNode(C));else if(C)for(var A=0;A<C.length;++A)F.appendChild(C[A]);return F}function K(_){for(var C=_.childNodes.length;C>0;--C)_.removeChild(_.firstChild)}function Pe(_){for(var C=1;C<arguments.length;C+=2)_.setAttribute(arguments[C],arguments[C+1])}function le(_,C){C||(C={});for(var D in _)_.hasOwnProperty(D)&&(C[D]=_[D]);return C}function Oe(_,C,D,P){for(var F=D?i(_.line,_.ch):_,A=0;;){var M=C.indexOf(`
`,A);if(M==-1)break;++F.line,P&&++P.line,A=M+1}return F.ch=(A?0:F.ch)+(C.length-A),P&&(P.ch=(A?0:P.ch)+(C.length-A)),F}var Fe=1,xe=2,Me=4;function ee(_){this.cm=_,this.alignable=[],this.height=_.doc.height;var C=this;_.on("markerAdded",function(D,P){if(P.collapsed){var F=P.find(1);F!=null&&C.set(F.line,Me)}}),_.on("markerCleared",function(D,P,F,A){A!=null&&P.collapsed&&C.check(A,Me,C.hasMarker)}),_.on("markerChanged",this.signal.bind(this)),_.on("lineWidgetAdded",function(D,P,F){P.mergeSpacer||(P.above?C.set(F-1,xe):C.set(F,Fe))}),_.on("lineWidgetCleared",function(D,P,F){P.mergeSpacer||(P.above?C.check(F-1,xe,C.hasWidgetBelow):C.check(F,Fe,C.hasWidget))}),_.on("lineWidgetChanged",this.signal.bind(this)),_.on("change",function(D,P){var F=P.from.line,A=P.to.line-P.from.line,M=P.text.length-1,B=F+M;(A||M)&&C.map(F,A,M),C.check(B,Me,C.hasMarker),(A||M)&&C.check(P.from.line,Me,C.hasMarker)}),_.on("viewportChange",function(){C.cm.doc.height!=C.height&&C.signal()})}ee.prototype={signal:function(){n.signal(this,"realign"),this.height=this.cm.doc.height},set:function(_,C){for(var D=-1;D<this.alignable.length;D+=2){var P=this.alignable[D]-_;if(P==0){if((this.alignable[D+1]&C)==C)return;this.alignable[D+1]|=C,this.signal();return}if(P>0)break}this.signal(),this.alignable.splice(D,0,_,C)},find:function(_){for(var C=0;C<this.alignable.length;C+=2)if(this.alignable[C]==_)return C;return-1},check:function(_,C,D){var P=this.find(_);if(!(P==-1||!(this.alignable[P+1]&C))&&!D.call(this,_)){this.signal();var F=this.alignable[P+1]&~C;F?this.alignable[P+1]=F:this.alignable.splice(P,2)}},hasMarker:function(_){var C=this.cm.getLineHandle(_);if(C.markedSpans){for(var D=0;D<C.markedSpans.length;D++)if(C.markedSpans[D].marker.collapsed&&C.markedSpans[D].to!=null)return!0}return!1},hasWidget:function(_){var C=this.cm.getLineHandle(_);if(C.widgets){for(var D=0;D<C.widgets.length;D++)if(!C.widgets[D].above&&!C.widgets[D].mergeSpacer)return!0}return!1},hasWidgetBelow:function(_){if(_==this.cm.lastLine())return!1;var C=this.cm.getLineHandle(_+1);if(C.widgets){for(var D=0;D<C.widgets.length;D++)if(C.widgets[D].above&&!C.widgets[D].mergeSpacer)return!0}return!1},map:function(_,C,D){for(var P=D-C,F=_+C,A=-1,M=-1,B=0;B<this.alignable.length;B+=2){var V=this.alignable[B];V==_&&this.alignable[B+1]&xe&&(A=B),V==F&&this.alignable[B+1]&xe&&(M=B),!(V<=_)&&(V<F?this.alignable.splice(B--,2):this.alignable[B]+=P)}if(A>-1){var X=this.alignable[A+1];X==xe?this.alignable.splice(A,2):this.alignable[A+1]=X&~xe}M>-1&&D&&this.set(_+D,xe)}};function pe(_,C){return(_.line-C.line||_.ch-C.ch)<0?_:C}function We(_,C){return(_.line-C.line||_.ch-C.ch)>0?_:C}function gt(_,C){return _.line==C.line&&_.ch==C.ch}function vt(_,C,D){for(var P=_.length-1;P>=0;P--){var F=_[P],A=(D?F.origTo:F.editTo)-1;if(A<C)return A}}function bt(_,C,D){for(var P=0;P<_.length;P++){var F=_[P],A=D?F.origFrom:F.editFrom;if(A>C)return A}}function it(_,C){var D=null,P=_.state.diffViews,F=_.getCursor().line;if(P)for(var A=0;A<P.length;A++){var M=P[A],B=_==M.orig;o(M);var V=C<0?vt(M.chunks,F,B):bt(M.chunks,F,B);V!=null&&(D==null||(C<0?V>D:V<D))&&(D=V)}if(D!=null)_.setCursor(D,0);else return n.Pass}n.commands.goNextDiff=function(_){return it(_,1)},n.commands.goPrevDiff=function(_){return it(_,-1)}})})();var Aa={exports:{}};(function(e){var a=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},n=-1,i=1,s=0;a.Diff=function(t,o){return[t,o]},a.prototype.diff_main=function(t,o,l,r){typeof r>"u"&&(this.Diff_Timeout<=0?r=Number.MAX_VALUE:r=new Date().getTime()+this.Diff_Timeout*1e3);var u=r;if(t==null||o==null)throw new Error("Null input. (diff_main)");if(t==o)return t?[new a.Diff(s,t)]:[];typeof l>"u"&&(l=!0);var f=l,d=this.diff_commonPrefix(t,o),h=t.substring(0,d);t=t.substring(d),o=o.substring(d),d=this.diff_commonSuffix(t,o);var v=t.substring(t.length-d);t=t.substring(0,t.length-d),o=o.substring(0,o.length-d);var b=this.diff_compute_(t,o,f,u);return h&&b.unshift(new a.Diff(s,h)),v&&b.push(new a.Diff(s,v)),this.diff_cleanupMerge(b),b},a.prototype.diff_compute_=function(t,o,l,r){var u;if(!t)return[new a.Diff(i,o)];if(!o)return[new a.Diff(n,t)];var f=t.length>o.length?t:o,d=t.length>o.length?o:t,h=f.indexOf(d);if(h!=-1)return u=[new a.Diff(i,f.substring(0,h)),new a.Diff(s,d),new a.Diff(i,f.substring(h+d.length))],t.length>o.length&&(u[0][0]=u[2][0]=n),u;if(d.length==1)return[new a.Diff(n,t),new a.Diff(i,o)];var v=this.diff_halfMatch_(t,o);if(v){var b=v[0],g=v[1],m=v[2],p=v[3],y=v[4],R=this.diff_main(b,m,l,r),I=this.diff_main(g,p,l,r);return R.concat([new a.Diff(s,y)],I)}return l&&t.length>100&&o.length>100?this.diff_lineMode_(t,o,r):this.diff_bisect_(t,o,r)},a.prototype.diff_lineMode_=function(t,o,l){var r=this.diff_linesToChars_(t,o);t=r.chars1,o=r.chars2;var u=r.lineArray,f=this.diff_main(t,o,!1,l);this.diff_charsToLines_(f,u),this.diff_cleanupSemantic(f),f.push(new a.Diff(s,""));for(var d=0,h=0,v=0,b="",g="";d<f.length;){switch(f[d][0]){case i:v++,g+=f[d][1];break;case n:h++,b+=f[d][1];break;case s:if(h>=1&&v>=1){f.splice(d-h-v,h+v),d=d-h-v;for(var m=this.diff_main(b,g,!1,l),p=m.length-1;p>=0;p--)f.splice(d,0,m[p]);d=d+m.length}v=0,h=0,b="",g="";break}d++}return f.pop(),f},a.prototype.diff_bisect_=function(t,o,l){for(var r=t.length,u=o.length,f=Math.ceil((r+u)/2),d=f,h=2*f,v=new Array(h),b=new Array(h),g=0;g<h;g++)v[g]=-1,b[g]=-1;v[d+1]=0,b[d+1]=0;for(var m=r-u,p=m%2!=0,y=0,R=0,I=0,W=0,E=0;E<f&&!(new Date().getTime()>l);E++){for(var k=-E+y;k<=E-R;k+=2){var w=d+k,x;k==-E||k!=E&&v[w-1]<v[w+1]?x=v[w+1]:x=v[w-1]+1;for(var c=x-k;x<r&&c<u&&t.charAt(x)==o.charAt(c);)x++,c++;if(v[w]=x,x>r)R+=2;else if(c>u)y+=2;else if(p){var S=d+m-k;if(S>=0&&S<h&&b[S]!=-1){var O=r-b[S];if(x>=O)return this.diff_bisectSplit_(t,o,x,c,l)}}}for(var $=-E+I;$<=E-W;$+=2){var S=d+$,O;$==-E||$!=E&&b[S-1]<b[S+1]?O=b[S+1]:O=b[S-1]+1;for(var U=O-$;O<r&&U<u&&t.charAt(r-O-1)==o.charAt(u-U-1);)O++,U++;if(b[S]=O,O>r)W+=2;else if(U>u)I+=2;else if(!p){var w=d+m-$;if(w>=0&&w<h&&v[w]!=-1){var x=v[w],c=d+x-w;if(O=r-O,x>=O)return this.diff_bisectSplit_(t,o,x,c,l)}}}}return[new a.Diff(n,t),new a.Diff(i,o)]},a.prototype.diff_bisectSplit_=function(t,o,l,r,u){var f=t.substring(0,l),d=o.substring(0,r),h=t.substring(l),v=o.substring(r),b=this.diff_main(f,d,!1,u),g=this.diff_main(h,v,!1,u);return b.concat(g)},a.prototype.diff_linesToChars_=function(t,o){var l=[],r={};l[0]="";function u(v){for(var b="",g=0,m=-1,p=l.length;m<v.length-1;){m=v.indexOf(`
`,g),m==-1&&(m=v.length-1);var y=v.substring(g,m+1);(r.hasOwnProperty?r.hasOwnProperty(y):r[y]!==void 0)?b+=String.fromCharCode(r[y]):(p==f&&(y=v.substring(g),m=v.length),b+=String.fromCharCode(p),r[y]=p,l[p++]=y),g=m+1}return b}var f=4e4,d=u(t);f=65535;var h=u(o);return{chars1:d,chars2:h,lineArray:l}},a.prototype.diff_charsToLines_=function(t,o){for(var l=0;l<t.length;l++){for(var r=t[l][1],u=[],f=0;f<r.length;f++)u[f]=o[r.charCodeAt(f)];t[l][1]=u.join("")}},a.prototype.diff_commonPrefix=function(t,o){if(!t||!o||t.charAt(0)!=o.charAt(0))return 0;for(var l=0,r=Math.min(t.length,o.length),u=r,f=0;l<u;)t.substring(f,u)==o.substring(f,u)?(l=u,f=l):r=u,u=Math.floor((r-l)/2+l);return u},a.prototype.diff_commonSuffix=function(t,o){if(!t||!o||t.charAt(t.length-1)!=o.charAt(o.length-1))return 0;for(var l=0,r=Math.min(t.length,o.length),u=r,f=0;l<u;)t.substring(t.length-u,t.length-f)==o.substring(o.length-u,o.length-f)?(l=u,f=l):r=u,u=Math.floor((r-l)/2+l);return u},a.prototype.diff_commonOverlap_=function(t,o){var l=t.length,r=o.length;if(l==0||r==0)return 0;l>r?t=t.substring(l-r):l<r&&(o=o.substring(0,l));var u=Math.min(l,r);if(t==o)return u;for(var f=0,d=1;;){var h=t.substring(u-d),v=o.indexOf(h);if(v==-1)return f;d+=v,(v==0||t.substring(u-d)==o.substring(0,d))&&(f=d,d++)}},a.prototype.diff_halfMatch_=function(t,o){if(this.Diff_Timeout<=0)return null;var l=t.length>o.length?t:o,r=t.length>o.length?o:t;if(l.length<4||r.length*2<l.length)return null;var u=this;function f(R,I,W){for(var E=R.substring(W,W+Math.floor(R.length/4)),k=-1,w="",x,c,S,O;(k=I.indexOf(E,k+1))!=-1;){var $=u.diff_commonPrefix(R.substring(W),I.substring(k)),U=u.diff_commonSuffix(R.substring(0,W),I.substring(0,k));w.length<U+$&&(w=I.substring(k-U,k)+I.substring(k,k+$),x=R.substring(0,W-U),c=R.substring(W+$),S=I.substring(0,k-U),O=I.substring(k+$))}return w.length*2>=R.length?[x,c,S,O,w]:null}var d=f(l,r,Math.ceil(l.length/4)),h=f(l,r,Math.ceil(l.length/2)),v;if(!d&&!h)return null;h?d?v=d[4].length>h[4].length?d:h:v=h:v=d;var b,g,m,p;t.length>o.length?(b=v[0],g=v[1],m=v[2],p=v[3]):(m=v[0],p=v[1],b=v[2],g=v[3]);var y=v[4];return[b,g,m,p,y]},a.prototype.diff_cleanupSemantic=function(t){for(var o=!1,l=[],r=0,u=null,f=0,d=0,h=0,v=0,b=0;f<t.length;)t[f][0]==s?(l[r++]=f,d=v,h=b,v=0,b=0,u=t[f][1]):(t[f][0]==i?v+=t[f][1].length:b+=t[f][1].length,u&&u.length<=Math.max(d,h)&&u.length<=Math.max(v,b)&&(t.splice(l[r-1],0,new a.Diff(n,u)),t[l[r-1]+1][0]=i,r--,r--,f=r>0?l[r-1]:-1,d=0,h=0,v=0,b=0,u=null,o=!0)),f++;for(o&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),f=1;f<t.length;){if(t[f-1][0]==n&&t[f][0]==i){var g=t[f-1][1],m=t[f][1],p=this.diff_commonOverlap_(g,m),y=this.diff_commonOverlap_(m,g);p>=y?(p>=g.length/2||p>=m.length/2)&&(t.splice(f,0,new a.Diff(s,m.substring(0,p))),t[f-1][1]=g.substring(0,g.length-p),t[f+1][1]=m.substring(p),f++):(y>=g.length/2||y>=m.length/2)&&(t.splice(f,0,new a.Diff(s,g.substring(0,y))),t[f-1][0]=i,t[f-1][1]=m.substring(0,m.length-y),t[f+1][0]=n,t[f+1][1]=g.substring(y),f++),f++}f++}},a.prototype.diff_cleanupSemanticLossless=function(t){function o(y,R){if(!y||!R)return 6;var I=y.charAt(y.length-1),W=R.charAt(0),E=I.match(a.nonAlphaNumericRegex_),k=W.match(a.nonAlphaNumericRegex_),w=E&&I.match(a.whitespaceRegex_),x=k&&W.match(a.whitespaceRegex_),c=w&&I.match(a.linebreakRegex_),S=x&&W.match(a.linebreakRegex_),O=c&&y.match(a.blanklineEndRegex_),$=S&&R.match(a.blanklineStartRegex_);return O||$?5:c||S?4:E&&!w&&x?3:w||x?2:E||k?1:0}for(var l=1;l<t.length-1;){if(t[l-1][0]==s&&t[l+1][0]==s){var r=t[l-1][1],u=t[l][1],f=t[l+1][1],d=this.diff_commonSuffix(r,u);if(d){var h=u.substring(u.length-d);r=r.substring(0,r.length-d),u=h+u.substring(0,u.length-d),f=h+f}for(var v=r,b=u,g=f,m=o(r,u)+o(u,f);u.charAt(0)===f.charAt(0);){r+=u.charAt(0),u=u.substring(1)+f.charAt(0),f=f.substring(1);var p=o(r,u)+o(u,f);p>=m&&(m=p,v=r,b=u,g=f)}t[l-1][1]!=v&&(v?t[l-1][1]=v:(t.splice(l-1,1),l--),t[l][1]=b,g?t[l+1][1]=g:(t.splice(l+1,1),l--))}l++}},a.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,a.whitespaceRegex_=/\s/,a.linebreakRegex_=/[\r\n]/,a.blanklineEndRegex_=/\n\r?\n$/,a.blanklineStartRegex_=/^\r?\n\r?\n/,a.prototype.diff_cleanupEfficiency=function(t){for(var o=!1,l=[],r=0,u=null,f=0,d=!1,h=!1,v=!1,b=!1;f<t.length;)t[f][0]==s?(t[f][1].length<this.Diff_EditCost&&(v||b)?(l[r++]=f,d=v,h=b,u=t[f][1]):(r=0,u=null),v=b=!1):(t[f][0]==n?b=!0:v=!0,u&&(d&&h&&v&&b||u.length<this.Diff_EditCost/2&&d+h+v+b==3)&&(t.splice(l[r-1],0,new a.Diff(n,u)),t[l[r-1]+1][0]=i,r--,u=null,d&&h?(v=b=!0,r=0):(r--,f=r>0?l[r-1]:-1,v=b=!1),o=!0)),f++;o&&this.diff_cleanupMerge(t)},a.prototype.diff_cleanupMerge=function(t){t.push(new a.Diff(s,""));for(var o=0,l=0,r=0,u="",f="",d;o<t.length;)switch(t[o][0]){case i:r++,f+=t[o][1],o++;break;case n:l++,u+=t[o][1],o++;break;case s:l+r>1?(l!==0&&r!==0&&(d=this.diff_commonPrefix(f,u),d!==0&&(o-l-r>0&&t[o-l-r-1][0]==s?t[o-l-r-1][1]+=f.substring(0,d):(t.splice(0,0,new a.Diff(s,f.substring(0,d))),o++),f=f.substring(d),u=u.substring(d)),d=this.diff_commonSuffix(f,u),d!==0&&(t[o][1]=f.substring(f.length-d)+t[o][1],f=f.substring(0,f.length-d),u=u.substring(0,u.length-d))),o-=l+r,t.splice(o,l+r),u.length&&(t.splice(o,0,new a.Diff(n,u)),o++),f.length&&(t.splice(o,0,new a.Diff(i,f)),o++),o++):o!==0&&t[o-1][0]==s?(t[o-1][1]+=t[o][1],t.splice(o,1)):o++,r=0,l=0,u="",f="";break}t[t.length-1][1]===""&&t.pop();var h=!1;for(o=1;o<t.length-1;)t[o-1][0]==s&&t[o+1][0]==s&&(t[o][1].substring(t[o][1].length-t[o-1][1].length)==t[o-1][1]?(t[o][1]=t[o-1][1]+t[o][1].substring(0,t[o][1].length-t[o-1][1].length),t[o+1][1]=t[o-1][1]+t[o+1][1],t.splice(o-1,1),h=!0):t[o][1].substring(0,t[o+1][1].length)==t[o+1][1]&&(t[o-1][1]+=t[o+1][1],t[o][1]=t[o][1].substring(t[o+1][1].length)+t[o+1][1],t.splice(o+1,1),h=!0)),o++;h&&this.diff_cleanupMerge(t)},a.prototype.diff_xIndex=function(t,o){var l=0,r=0,u=0,f=0,d;for(d=0;d<t.length&&(t[d][0]!==i&&(l+=t[d][1].length),t[d][0]!==n&&(r+=t[d][1].length),!(l>o));d++)u=l,f=r;return t.length!=d&&t[d][0]===n?f:f+(o-u)},a.prototype.diff_prettyHtml=function(t){for(var o=[],l=/&/g,r=/</g,u=/>/g,f=/\n/g,d=0;d<t.length;d++){var h=t[d][0],v=t[d][1],b=v.replace(l,"&amp;").replace(r,"&lt;").replace(u,"&gt;").replace(f,"&para;<br>");switch(h){case i:o[d]='<ins style="background:#e6ffe6;">'+b+"</ins>";break;case n:o[d]='<del style="background:#ffe6e6;">'+b+"</del>";break;case s:o[d]="<span>"+b+"</span>";break}}return o.join("")},a.prototype.diff_text1=function(t){for(var o=[],l=0;l<t.length;l++)t[l][0]!==i&&(o[l]=t[l][1]);return o.join("")},a.prototype.diff_text2=function(t){for(var o=[],l=0;l<t.length;l++)t[l][0]!==n&&(o[l]=t[l][1]);return o.join("")},a.prototype.diff_levenshtein=function(t){for(var o=0,l=0,r=0,u=0;u<t.length;u++){var f=t[u][0],d=t[u][1];switch(f){case i:l+=d.length;break;case n:r+=d.length;break;case s:o+=Math.max(l,r),l=0,r=0;break}}return o+=Math.max(l,r),o},a.prototype.diff_toDelta=function(t){for(var o=[],l=0;l<t.length;l++)switch(t[l][0]){case i:o[l]="+"+encodeURI(t[l][1]);break;case n:o[l]="-"+t[l][1].length;break;case s:o[l]="="+t[l][1].length;break}return o.join("	").replace(/%20/g," ")},a.prototype.diff_fromDelta=function(t,o){for(var l=[],r=0,u=0,f=o.split(/\t/g),d=0;d<f.length;d++){var h=f[d].substring(1);switch(f[d].charAt(0)){case"+":try{l[r++]=new a.Diff(i,decodeURI(h))}catch{throw new Error("Illegal escape in diff_fromDelta: "+h)}break;case"-":case"=":var v=parseInt(h,10);if(isNaN(v)||v<0)throw new Error("Invalid number in diff_fromDelta: "+h);var b=t.substring(u,u+=v);f[d].charAt(0)=="="?l[r++]=new a.Diff(s,b):l[r++]=new a.Diff(n,b);break;default:if(f[d])throw new Error("Invalid diff operation in diff_fromDelta: "+f[d])}}if(u!=t.length)throw new Error("Delta length ("+u+") does not equal source text length ("+t.length+").");return l},a.prototype.match_main=function(t,o,l){if(t==null||o==null||l==null)throw new Error("Null input. (match_main)");return l=Math.max(0,Math.min(l,t.length)),t==o?0:t.length?t.substring(l,l+o.length)==o?l:this.match_bitap_(t,o,l):-1},a.prototype.match_bitap_=function(t,o,l){if(o.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var r=this.match_alphabet_(o),u=this;function f(x,c){var S=x/o.length,O=Math.abs(l-c);return u.Match_Distance?S+O/u.Match_Distance:O?1:S}var d=this.Match_Threshold,h=t.indexOf(o,l);h!=-1&&(d=Math.min(f(0,h),d),h=t.lastIndexOf(o,l+o.length),h!=-1&&(d=Math.min(f(0,h),d)));var v=1<<o.length-1;h=-1;for(var b,g,m=o.length+t.length,p,y=0;y<o.length;y++){for(b=0,g=m;b<g;)f(y,l+g)<=d?b=g:m=g,g=Math.floor((m-b)/2+b);m=g;var R=Math.max(1,l-g+1),I=Math.min(l+g,t.length)+o.length,W=Array(I+2);W[I+1]=(1<<y)-1;for(var E=I;E>=R;E--){var k=r[t.charAt(E-1)];if(y===0?W[E]=(W[E+1]<<1|1)&k:W[E]=(W[E+1]<<1|1)&k|((p[E+1]|p[E])<<1|1)|p[E+1],W[E]&v){var w=f(y,E-1);if(w<=d)if(d=w,h=E-1,h>l)R=Math.max(1,2*l-h);else break}}if(f(y+1,l)>d)break;p=W}return h},a.prototype.match_alphabet_=function(t){for(var o={},l=0;l<t.length;l++)o[t.charAt(l)]=0;for(var l=0;l<t.length;l++)o[t.charAt(l)]|=1<<t.length-l-1;return o},a.prototype.patch_addContext_=function(t,o){if(o.length!=0){if(t.start2===null)throw Error("patch not initialized");for(var l=o.substring(t.start2,t.start2+t.length1),r=0;o.indexOf(l)!=o.lastIndexOf(l)&&l.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)r+=this.Patch_Margin,l=o.substring(t.start2-r,t.start2+t.length1+r);r+=this.Patch_Margin;var u=o.substring(t.start2-r,t.start2);u&&t.diffs.unshift(new a.Diff(s,u));var f=o.substring(t.start2+t.length1,t.start2+t.length1+r);f&&t.diffs.push(new a.Diff(s,f)),t.start1-=u.length,t.start2-=u.length,t.length1+=u.length+f.length,t.length2+=u.length+f.length}},a.prototype.patch_make=function(t,o,l){var r,u;if(typeof t=="string"&&typeof o=="string"&&typeof l>"u")r=t,u=this.diff_main(r,o,!0),u.length>2&&(this.diff_cleanupSemantic(u),this.diff_cleanupEfficiency(u));else if(t&&typeof t=="object"&&typeof o>"u"&&typeof l>"u")u=t,r=this.diff_text1(u);else if(typeof t=="string"&&o&&typeof o=="object"&&typeof l>"u")r=t,u=o;else if(typeof t=="string"&&typeof o=="string"&&l&&typeof l=="object")r=t,u=l;else throw new Error("Unknown call format to patch_make.");if(u.length===0)return[];for(var f=[],d=new a.patch_obj,h=0,v=0,b=0,g=r,m=r,p=0;p<u.length;p++){var y=u[p][0],R=u[p][1];switch(!h&&y!==s&&(d.start1=v,d.start2=b),y){case i:d.diffs[h++]=u[p],d.length2+=R.length,m=m.substring(0,b)+R+m.substring(b);break;case n:d.length1+=R.length,d.diffs[h++]=u[p],m=m.substring(0,b)+m.substring(b+R.length);break;case s:R.length<=2*this.Patch_Margin&&h&&u.length!=p+1?(d.diffs[h++]=u[p],d.length1+=R.length,d.length2+=R.length):R.length>=2*this.Patch_Margin&&h&&(this.patch_addContext_(d,g),f.push(d),d=new a.patch_obj,h=0,g=m,v=b);break}y!==i&&(v+=R.length),y!==n&&(b+=R.length)}return h&&(this.patch_addContext_(d,g),f.push(d)),f},a.prototype.patch_deepCopy=function(t){for(var o=[],l=0;l<t.length;l++){var r=t[l],u=new a.patch_obj;u.diffs=[];for(var f=0;f<r.diffs.length;f++)u.diffs[f]=new a.Diff(r.diffs[f][0],r.diffs[f][1]);u.start1=r.start1,u.start2=r.start2,u.length1=r.length1,u.length2=r.length2,o[l]=u}return o},a.prototype.patch_apply=function(t,o){if(t.length==0)return[o,[]];t=this.patch_deepCopy(t);var l=this.patch_addPadding(t);o=l+o+l,this.patch_splitMax(t);for(var r=0,u=[],f=0;f<t.length;f++){var d=t[f].start2+r,h=this.diff_text1(t[f].diffs),v,b=-1;if(h.length>this.Match_MaxBits?(v=this.match_main(o,h.substring(0,this.Match_MaxBits),d),v!=-1&&(b=this.match_main(o,h.substring(h.length-this.Match_MaxBits),d+h.length-this.Match_MaxBits),(b==-1||v>=b)&&(v=-1))):v=this.match_main(o,h,d),v==-1)u[f]=!1,r-=t[f].length2-t[f].length1;else{u[f]=!0,r=v-d;var g;if(b==-1?g=o.substring(v,v+h.length):g=o.substring(v,b+this.Match_MaxBits),h==g)o=o.substring(0,v)+this.diff_text2(t[f].diffs)+o.substring(v+h.length);else{var m=this.diff_main(h,g,!1);if(h.length>this.Match_MaxBits&&this.diff_levenshtein(m)/h.length>this.Patch_DeleteThreshold)u[f]=!1;else{this.diff_cleanupSemanticLossless(m);for(var p=0,y,R=0;R<t[f].diffs.length;R++){var I=t[f].diffs[R];I[0]!==s&&(y=this.diff_xIndex(m,p)),I[0]===i?o=o.substring(0,v+y)+I[1]+o.substring(v+y):I[0]===n&&(o=o.substring(0,v+y)+o.substring(v+this.diff_xIndex(m,p+I[1].length))),I[0]!==n&&(p+=I[1].length)}}}}}return o=o.substring(l.length,o.length-l.length),[o,u]},a.prototype.patch_addPadding=function(t){for(var o=this.Patch_Margin,l="",r=1;r<=o;r++)l+=String.fromCharCode(r);for(var r=0;r<t.length;r++)t[r].start1+=o,t[r].start2+=o;var u=t[0],f=u.diffs;if(f.length==0||f[0][0]!=s)f.unshift(new a.Diff(s,l)),u.start1-=o,u.start2-=o,u.length1+=o,u.length2+=o;else if(o>f[0][1].length){var d=o-f[0][1].length;f[0][1]=l.substring(f[0][1].length)+f[0][1],u.start1-=d,u.start2-=d,u.length1+=d,u.length2+=d}if(u=t[t.length-1],f=u.diffs,f.length==0||f[f.length-1][0]!=s)f.push(new a.Diff(s,l)),u.length1+=o,u.length2+=o;else if(o>f[f.length-1][1].length){var d=o-f[f.length-1][1].length;f[f.length-1][1]+=l.substring(0,d),u.length1+=d,u.length2+=d}return l},a.prototype.patch_splitMax=function(t){for(var o=this.Match_MaxBits,l=0;l<t.length;l++)if(!(t[l].length1<=o)){var r=t[l];t.splice(l--,1);for(var u=r.start1,f=r.start2,d="";r.diffs.length!==0;){var h=new a.patch_obj,v=!0;for(h.start1=u-d.length,h.start2=f-d.length,d!==""&&(h.length1=h.length2=d.length,h.diffs.push(new a.Diff(s,d)));r.diffs.length!==0&&h.length1<o-this.Patch_Margin;){var b=r.diffs[0][0],g=r.diffs[0][1];b===i?(h.length2+=g.length,f+=g.length,h.diffs.push(r.diffs.shift()),v=!1):b===n&&h.diffs.length==1&&h.diffs[0][0]==s&&g.length>2*o?(h.length1+=g.length,u+=g.length,v=!1,h.diffs.push(new a.Diff(b,g)),r.diffs.shift()):(g=g.substring(0,o-h.length1-this.Patch_Margin),h.length1+=g.length,u+=g.length,b===s?(h.length2+=g.length,f+=g.length):v=!1,h.diffs.push(new a.Diff(b,g)),g==r.diffs[0][1]?r.diffs.shift():r.diffs[0][1]=r.diffs[0][1].substring(g.length))}d=this.diff_text2(h.diffs),d=d.substring(d.length-this.Patch_Margin);var m=this.diff_text1(r.diffs).substring(0,this.Patch_Margin);m!==""&&(h.length1+=m.length,h.length2+=m.length,h.diffs.length!==0&&h.diffs[h.diffs.length-1][0]===s?h.diffs[h.diffs.length-1][1]+=m:h.diffs.push(new a.Diff(s,m))),v||t.splice(++l,0,h)}}},a.prototype.patch_toText=function(t){for(var o=[],l=0;l<t.length;l++)o[l]=t[l];return o.join("")},a.prototype.patch_fromText=function(t){var o=[];if(!t)return o;for(var l=t.split(`
`),r=0,u=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;r<l.length;){var f=l[r].match(u);if(!f)throw new Error("Invalid patch string: "+l[r]);var d=new a.patch_obj;for(o.push(d),d.start1=parseInt(f[1],10),f[2]===""?(d.start1--,d.length1=1):f[2]=="0"?d.length1=0:(d.start1--,d.length1=parseInt(f[2],10)),d.start2=parseInt(f[3],10),f[4]===""?(d.start2--,d.length2=1):f[4]=="0"?d.length2=0:(d.start2--,d.length2=parseInt(f[4],10)),r++;r<l.length;){var h=l[r].charAt(0);try{var v=decodeURI(l[r].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+v)}if(h=="-")d.diffs.push(new a.Diff(n,v));else if(h=="+")d.diffs.push(new a.Diff(i,v));else if(h==" ")d.diffs.push(new a.Diff(s,v));else{if(h=="@")break;if(h!=="")throw new Error('Invalid patch mode "'+h+'" in: '+v)}r++}}return o},a.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},a.patch_obj.prototype.toString=function(){var t,o;this.length1===0?t=this.start1+",0":this.length1==1?t=this.start1+1:t=this.start1+1+","+this.length1,this.length2===0?o=this.start2+",0":this.length2==1?o=this.start2+1:o=this.start2+1+","+this.length2;for(var l=["@@ -"+t+" +"+o+` @@
`],r,u=0;u<this.diffs.length;u++){switch(this.diffs[u][0]){case i:r="+";break;case n:r="-";break;case s:r=" ";break}l[u+1]=r+encodeURI(this.diffs[u][1])+`
`}return l.join("").replace(/%20/g," ")},e.exports=a,e.exports.diff_match_patch=a,e.exports.DIFF_DELETE=n,e.exports.DIFF_INSERT=i,e.exports.DIFF_EQUAL=s})(Aa);var Us=Aa.exports;const Ks=Si(Us);(function(e,a){(function(n){n(Di())})(function(n){n.defineSimpleMode=function(h,v){n.defineMode(h,function(b){return n.simpleMode(b,v)})},n.simpleMode=function(h,v){i(v,"start");var b={},g=v.meta||{},m=!1;for(var p in v)if(p!=g&&v.hasOwnProperty(p))for(var y=b[p]=[],R=v[p],I=0;I<R.length;I++){var W=R[I];y.push(new o(W,v)),(W.indent||W.dedent)&&(m=!0)}var E={startState:function(){return{state:"start",pending:null,local:null,localState:null,indent:m?[]:null}},copyState:function(w){var x={state:w.state,pending:w.pending,local:w.local,localState:null,indent:w.indent&&w.indent.slice(0)};w.localState&&(x.localState=n.copyState(w.local.mode,w.localState)),w.stack&&(x.stack=w.stack.slice(0));for(var c=w.persistentStates;c;c=c.next)x.persistentStates={mode:c.mode,spec:c.spec,state:c.state==w.localState?x.localState:n.copyState(c.mode,c.state),next:x.persistentStates};return x},token:l(b,h),innerMode:function(w){return w.local&&{mode:w.local.mode,state:w.localState}},indent:d(b,g)};if(g)for(var k in g)g.hasOwnProperty(k)&&(E[k]=g[k]);return E};function i(h,v){if(!h.hasOwnProperty(v))throw new Error("Undefined state "+v+" in simple mode")}function s(h,v){if(!h)return/(?:)/;var b="";return h instanceof RegExp?(h.ignoreCase&&(b="i"),h.unicode&&(b+="u"),h=h.source):h=String(h),new RegExp((v===!1?"":"^")+"(?:"+h+")",b)}function t(h){if(!h)return null;if(h.apply)return h;if(typeof h=="string")return h.replace(/\./g," ");for(var v=[],b=0;b<h.length;b++)v.push(h[b]&&h[b].replace(/\./g," "));return v}function o(h,v){(h.next||h.push)&&i(v,h.next||h.push),this.regex=s(h.regex),this.token=t(h.token),this.data=h}function l(h,v){return function(b,g){if(g.pending){var m=g.pending.shift();return g.pending.length==0&&(g.pending=null),b.pos+=m.text.length,m.token}if(g.local)if(g.local.end&&b.match(g.local.end)){var p=g.local.endToken||null;return g.local=g.localState=null,p}else{var p=g.local.mode.token(b,g.localState),y;return g.local.endScan&&(y=g.local.endScan.exec(b.current()))&&(b.pos=b.start+y.index),p}for(var R=h[g.state],I=0;I<R.length;I++){var W=R[I],E=(!W.data.sol||b.sol())&&b.match(W.regex);if(E){W.data.next?g.state=W.data.next:W.data.push?((g.stack||(g.stack=[])).push(g.state),g.state=W.data.push):W.data.pop&&g.stack&&g.stack.length&&(g.state=g.stack.pop()),W.data.mode&&u(v,g,W.data.mode,W.token),W.data.indent&&g.indent.push(b.indentation()+v.indentUnit),W.data.dedent&&g.indent.pop();var k=W.token;if(k&&k.apply&&(k=k(E)),E.length>2&&W.token&&typeof W.token!="string"){for(var w=2;w<E.length;w++)E[w]&&(g.pending||(g.pending=[])).push({text:E[w],token:W.token[w-1]});return b.backUp(E[0].length-(E[1]?E[1].length:0)),k[0]}else return k&&k.join?k[0]:k}}return b.next(),null}}function r(h,v){if(h===v)return!0;if(!h||typeof h!="object"||!v||typeof v!="object")return!1;var b=0;for(var g in h)if(h.hasOwnProperty(g)){if(!v.hasOwnProperty(g)||!r(h[g],v[g]))return!1;b++}for(var g in v)v.hasOwnProperty(g)&&b--;return b==0}function u(h,v,b,g){var m;if(b.persistent)for(var p=v.persistentStates;p&&!m;p=p.next)(b.spec?r(b.spec,p.spec):b.mode==p.mode)&&(m=p);var y=m?m.mode:b.mode||n.getMode(h,b.spec),R=m?m.state:n.startState(y);b.persistent&&!m&&(v.persistentStates={mode:y,spec:b.spec,state:R,next:v.persistentStates}),v.localState=R,v.local={mode:y,end:b.end&&s(b.end),endScan:b.end&&b.forceEnd!==!1&&s(b.end,!1),endToken:g&&g.join?g[g.length-1]:g}}function f(h,v){for(var b=0;b<v.length;b++)if(v[b]===h)return!0}function d(h,v){return function(b,g,m){if(b.local&&b.local.mode.indent)return b.local.mode.indent(b.localState,g,m);if(b.indent==null||b.local||v.dontIndentStates&&f(b.state,v.dontIndentStates)>-1)return n.Pass;var p=b.indent.length-1,y=h[b.state];e:for(;;){for(var R=0;R<y.length;R++){var I=y[R];if(I.data.dedent&&I.data.dedentIfLineStart!==!1){var W=I.regex.exec(g);if(W&&W[0]){p--,(I.next||I.push)&&(y=h[I.next||I.push]),g=g.slice(W[0].length);continue e}}}break}return p<0?0:b.indent[p]}}})})();!window.CodeMirror&&(window.CodeMirror=Fa);const mt=window.CodeMirror||Fa,qs=J({name:"DefaultMode",props:{name:{type:String,default:`cm-textarea-${+new Date}`},value:{type:String,default:""},content:{type:String,default:""},options:{type:Object,default:()=>({})},cminstance:{type:Object,default:()=>null},placeholder:{type:String,default:""}},emits:{ready:e=>e,"update:cminstance":e=>e},setup(e,{emit:a}){const n=Q(),i=Q(null),s=()=>{i.value=Oi(mt.fromTextArea(n.value,e.options)),a("update:cminstance",i.value);const t=Re(()=>e.cminstance,o=>{var l;o&&((l=e.cminstance)==null||l.setValue(e.value||e.content)),a("ready",G(i)),t==null||t()},{deep:!0})};return Ie(()=>{s()}),{textarea:n,initialize:s}}}),Ni=(e,a)=>{const n=e.__vccOpts||e;for(const[i,s]of a)n[i]=s;return n},js=["name","placeholder"];function Hs(e,a,n,i,s,t){return De(),$e("textarea",{ref:"textarea",name:e.$props.name,placeholder:e.$props.placeholder},null,8,js)}const On=Ni(qs,[["render",Hs]]);window.diff_match_patch=Ks;window.DIFF_DELETE=-1;window.DIFF_INSERT=1;window.DIFF_EQUAL=0;const Js=J({name:"MergeMode",props:{options:{type:Object,default:()=>({})},cminstance:{type:Object,default:()=>({})}},emits:["update:cminstance","ready"],setup(e,{emit:a}){const n=Q(),i=Q(),s=()=>{n.value=Oi(mt.MergeView(i.value,e.options)),a("update:cminstance",n.value),a("ready",n)};return Ie(()=>{s()}),{mergeView:i,initialize:s}}}),Gs={ref:"mergeView"};function Xs(e,a,n,i,s,t){return De(),$e("div",Gs,null,512)}const Ys=Ni(Js,[["render",Xs]]);function Qs(e){const a=/#link#(.+)#link#/g,n=[];let i;for(i=a.exec(e);i;){const s=document.createElement("a"),t=JSON.parse(i[1]),o=Object.entries(t);for(const[l,r]of o)s.setAttribute(l,r);s.className="editor_custom_link",s.innerHTML="logDownload",n.push({start:i.index,end:i.index+i[0].length,node:s}),i=a.exec(e)}return n}function Zs(e){const a=[];function n(){const i=/#log<(\w*)>log#((.|\r\n|\n)*?)#log<(\w*)>log#/g;let s;for(s=i.exec(e);s;){const t=s[0].replace(/\r\n/g,`
`).split(`
`),o=s[2].replace(/\r\n/g,`
`).split(`
`),l=document.createElement("span"),r=s[1];l.className=`c-editor--log__${r}`;let u=0;for(let f=0;f<t.length;f++){const d=t[f],h=o[f],v=l.cloneNode(!1);v.innerText=h,a.push({start:s.index+u,end:s.index+u+d.length,node:v}),u=u+d.length+1}s=i.exec(e)}}return n(),a}const xt=[{regex:/(\[.*?\])([ \t]*)(<error>[ \t])(.+)/,token:["tag","","error.strong","error.strong"],sol:!0},{regex:/(\[.*?\])([ \t]*)(<info>)(.+)(.?)/,token:["tag","","bracket","bracket","hr"],sol:!0},{regex:/(\[.*?\])([ \t]*)(<warning>)(.+)(.?)/,token:["tag","","comment","comment","hr"],sol:!0}];mt.defineSimpleMode("fclog",{start:[...xt,{regex:/.*/,token:"hr"}],error:[...xt,{regex:/.*/,token:"error.strong"}],info:[...xt,{regex:/.*/,token:"bracket"}],warning:[...xt,{regex:/.*\[/,token:"comment"}]});mt.defineSimpleMode("log",{start:[{regex:/^[=]+[^=]*[=]+/,token:"strong"},{regex:/([^\w])([A-Z][\w]*)/,token:["","string"]},{regex:/(^[A-Z][\w]*)/,token:"string"}]});const er=J({name:"CodemirrorFclog",props:{value:{type:String,default:""},name:{type:String,default:`cm-textarea-${+new Date}`},options:{type:Object,default:()=>({})},cminstance:{type:Object,default:()=>({})},placeholder:{type:String,default:""}},emits:["update:cminstance","ready"],setup(e,{emit:a}){const n=Q(),i=Q(null),s=(o=e.cminstance)=>{o.getAllMarks().forEach(u=>u.clear());const l=o.getValue(),r=[].concat(Qs(l)).concat(Zs(l));for(let u=0;u<r.length;u++){const f=r[u];o.markText(o.posFromIndex(f.start),o.posFromIndex(f.end),{replacedWith:f.node})}},t=()=>{var o;i.value=Oi(mt.fromTextArea(n.value,e.options)),a("update:cminstance",G(i)),(o=i.value)==null||o.on("change",s)};return Re(()=>e.cminstance,o=>{var l;o&&(s(e.cminstance),(l=e.cminstance)==null||l.setValue(e.value),a("ready",i))},{deep:!0,immediate:!0}),Ie(()=>{t()}),{initialize:t,textarea:n}}}),tr=["name","placeholder"];function ir(e,a,n,i,s,t){return De(),$e("textarea",{ref:"textarea",name:e.$props.name,placeholder:e.$props.placeholder},null,8,tr)}const nr=Ni(er,[["render",ir]]),Ra={"update:value":()=>!0,change:(e,a)=>({value:e,cm:a}),input:()=>!0,ready:e=>e},ar=["changes","scroll","beforeChange","cursorActivity","keyHandled","inputRead","electricInput","beforeSelectionChange","viewportChange","swapDoc","gutterClick","gutterContextMenu","focus","blur","refresh","optionChange","scrollCursorIntoView","update"],lr=()=>{const e={};return ar.forEach(a=>{e[a]=(...n)=>n}),e},or={...Ra,...lr()},mi={mode:"text",theme:"default",lineNumbers:!0,smartIndent:!0,indentUnit:2};function sr(e){Promise.resolve().then(()=>{const a=e.getScrollInfo();e.scrollTo(a.left,a.height)})}const rr=({props:e,cminstance:a,emit:n,internalInstance:i,content:s})=>{const t=j(()=>{var l;return e.merge?(l=G(a))==null?void 0:l.editor():G(a)}),o=()=>{const l=[];return Object.keys(i==null?void 0:i.vnode.props).forEach(r=>{if(r.startsWith("on")){const u=r.replace(r[2],r[2].toLowerCase()).slice(2);!Ra[u]&&l.push(u)}}),l};return{listenerEvents:()=>{t.value.on("change",r=>{const u=r.getValue();u===s.value&&u!==""||(s.value=u,n("update:value",s.value||""),n("input",s.value||" "),Promise.resolve().then(()=>{n("change",s.value,r)}),e.keepCursorInEnd&&sr(r))});const l={};o().filter(r=>!l[r]&&(l[r]=!0)).forEach(r=>{t.value.on(r,(...u)=>{n(r,...u)})})}}};function ur({props:e,cminstance:a,presetRef:n}){const i=Q(null),s=Q(null),t=j(()=>{var d;return e.merge?(d=G(a))==null?void 0:d.editor():G(a)}),o=()=>{ut(()=>{var d;(d=t.value)==null||d.refresh()})},l=(d=e.width,h=e.height)=>{var v;i.value=String(d).replace("px",""),s.value=String(h).replace("px","");const b=s.value;(v=t.value)==null||v.setSize(i.value,b)},r=()=>{var d;const h=(d=t.value)==null?void 0:d.getWrapperElement();h==null||h.remove()},u=()=>{var d,h,v;const b=(d=t.value)==null?void 0:d.getDoc().getHistory();(h=n.value)==null||h.initialize(),r(),(v=t.value)==null||v.getDoc().setHistory(b)},f=()=>{const d=document.querySelector(".CodeMirror-gutters");return(d==null?void 0:d.style.left.replace("px",""))!=="0"};return{reload:u,refresh:o,resize:l,destroy:r,containerHeight:s,reviseStyle:()=>{if(o(),!f())return;const d=setInterval(()=>{f()?o():clearInterval(d)},60),h=setTimeout(()=>{clearInterval(d),clearTimeout(h)},400)}}}const Mi=J({__name:"index",props:{value:{type:String,default:""},options:{type:Object,default:()=>mi},globalOptions:{type:Object,default:()=>mi},placeholder:{type:String,default:""},border:{type:Boolean,default:!1},width:{type:[String,Number],default:null},height:{type:[String,Number],default:null},originalStyle:{type:Boolean,default:!1},keepCursorInEnd:{type:Boolean,default:!1},merge:{type:Boolean,default:!1},name:{type:String,default:""},marker:{type:Function,default:()=>null},unseenLines:{type:Array,default:()=>[]}},emits:or,setup(e,{expose:a,emit:n}){var i,s;const t=e;typeof Object.assign!="function"&&Object.defineProperty(Object,"assign",{value(w){if(w==null)throw new TypeError("Cannot convert undefined or null to object");const x=Object(w);for(let c=1;c<arguments.length;c++){const S=arguments[c];if(S!=null)for(const O in S)Object.prototype.hasOwnProperty.call(S,O)&&(x[O]=S[O])}return x},writable:!0,configurable:!0});const o=Q(null),l=Q(""),r=tl(On),u=Q({...mi,...t.globalOptions,...t.options}),f=pt(),d=t.name||((s=(i=f==null?void 0:f.parent)==null?void 0:i.type)==null?void 0:s.name)||void 0,h=Q(null),v=j(()=>{var w;return t.merge?(w=G(o))==null?void 0:w.editor():G(o)}),{refresh:b,resize:g,destroy:m,containerHeight:p,reviseStyle:y}=ur({props:t,cminstance:o,presetRef:h}),{listenerEvents:R}=rr({props:t,cminstance:o,emit:n,internalInstance:f,content:l}),I=()=>{t.unseenLines!==void 0&&t.marker!==void 0&&t.unseenLines.forEach(w=>{var x,c;const S=(x=o.value)==null?void 0:x.lineInfo(w);(c=o.value)==null||c.setGutterMarker(w,"breakpoints",S!=null&&S.gutterMarkers?null:t.marker())})},W=w=>{var x,c;const S=(x=o.value)==null?void 0:x.getValue();w!==S&&((c=o.value)==null||c.setValue(w),l.value=w,y()),I()},E=()=>{R(),I(),g(t.width,t.height),n("ready",o.value),Re([()=>t.width,()=>t.height],([w,x])=>{g(w,x)},{deep:!0})},k=()=>{if(t.options.mode==="fclog"||t.options.mode==="log"){r.value=nr;return}if(t.merge){r.value=Ys;return}r.value=On};return Re(()=>t.options,w=>{var x;for(const c in t.options)(x=v.value)==null||x.setOption(c,G(w[c]))},{deep:!0}),Re(()=>t.value,w=>{W(w)}),Re(()=>t.merge,k,{immediate:!0}),et(()=>{m()}),a({cminstance:o,resize:g,refresh:b,destroy:m}),(w,x)=>(De(),$e("div",{class:ze(["codemirror-container",{merge:w.$props.merge,bordered:w.$props.border||w.$props.merge&&!t.originalStyle,"width-auto":!w.$props.width||w.$props.width=="100%","height-auto":!w.$props.height||w.$props.height=="100%","original-style":t.originalStyle}]),style:Mn({height:G(p)+"px"})},[(De(),je(Wn(G(r)),be({ref_key:"presetRef",ref:h,cminstance:o.value,"onUpdate:cminstance":x[0]||(x[0]=c=>o.value=c),style:{height:"100%"}},{...w.$props,...w.$attrs,options:u.value,name:G(d),content:l.value},{onReady:E}),null,16,["cminstance"]))],6))}});function cr(e,a){a===void 0&&(a={});var n=a.insertAt;if(!(!e||typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",n==="top"&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}}cr(`.codemirror-container {
  position: relative;
  display: inline-block;
  height: 100%;
  width: fit-content;
  font-size: 12px;
  overflow: hidden;
}
.codemirror-container.bordered {
  border-radius: 4px;
  border: 1px solid #dddddd;
}
.codemirror-container.width-auto {
  width: 100%;
}
.codemirror-container.height-auto {
  height: 100%;
}
.codemirror-container.height-auto .CodeMirror,
.codemirror-container.height-auto .cm-s-default {
  height: 100% !important;
}
.codemirror-container .editor_custom_link {
  cursor: pointer;
  color: #1474f1;
  text-decoration: underline;
}
.codemirror-container .editor_custom_link:hover {
  color: #04b4fa;
}
.codemirror-container:not(.original-style) .CodeMirror-lines .CodeMirror-placeholder.CodeMirror-line-like {
  color: #666;
}
.codemirror-container:not(.original-style) .CodeMirror,
.codemirror-container:not(.original-style) .CodeMirror-merge-pane {
  height: 100%;
  font-family: consolas !important;
}
.codemirror-container:not(.original-style) .CodeMirror-merge,
.codemirror-container:not(.original-style) .CodeMirror-merge-right .CodeMirror {
  height: 100%;
  border: none !important;
}
.codemirror-container:not(.original-style) .c-editor--log__error {
  color: #bb0606;
  font-weight: bold;
}
.codemirror-container:not(.original-style) .c-editor--log__info {
  color: #333333;
  font-weight: bold;
}
.codemirror-container:not(.original-style) .c-editor--log__warning {
  color: #ee9900;
}
.codemirror-container:not(.original-style) .c-editor--log__success {
  color: #669600;
}
.codemirror-container:not(.original-style) .cm-header,
.codemirror-container:not(.original-style) .cm-strong {
  font-weight: bold;
}
`);const fr=J({name:"JSONWidget",setup(){const{workspaceWidgetType:e}=ve(),a=Q(),n={mode:"text/javascript",theme:"default",lineNumbers:!0,smartIndent:!0,indentUnit:2,foldGutter:!0,styleActiveLine:!0},i=s=>{a.value=s};return()=>T(Mi,{value:tt.js_beautify(JSON.stringify(e.value==="crud"?{...he("code",e.value).config,columns:he("code",e.value).columns}:he("code",e.value)),{indent_size:2}),class:"h-full",language:"json",options:n,onReady:i},null)}}),pr=J({name:"PageWidget",setup(){const e=Q(),{getPageCode:a}=xa(),n={mode:"text/javascript",theme:"default",lineNumbers:!0,smartIndent:!0,indentUnit:2,foldGutter:!0,styleActiveLine:!0},i=s=>{e.value=s};return()=>T(Mi,{value:tt.html_beautify(a(),{indent_size:2}),class:"h-full",language:"html",options:n,onChange:s=>console.log(s,"value"),onReady:i},null)}}),dr=J({name:"PlayWidget",props:{viewType:{type:String,default:"design"}},setup(){const{workspaceWidgetType:e}=ve(),a=Q({}),n=Q([]);return Ie(()=>{if(e.value==="form"){const{formData:i,columns:s}=he("preview");a.value={...i},n.value=[...s]}else{const{config:i}=he("preview","crud");a.value={...i.searchFormData}}}),()=>{if(e.value==="form"){const{formConfig:t,options:o}=he("preview");return T(L("z-form"),be({modelValue:a.value,"onUpdate:modelValue":l=>a.value=l},{...t,type:"normal"},{options:o,columns:n.value}),null)}const{config:i,columns:s}=he("preview","crud");return T(L("z-crud"),be({class:"crud__preview"},i,{columns:s,formData:a.value,"onUpdate:formData":t=>a.value=t}),null)}}}),hr=J({name:"TsxWidget",setup(){const e=Q(),{getTsxCode:a}=Ia(),n={mode:"text/javascript",theme:"default",lineNumbers:!0,smartIndent:!0,indentUnit:2,foldGutter:!0,styleActiveLine:!0},i=s=>{e.value=s};return()=>T(Mi,{value:tt.js_beautify(a(),{e4x:!0,indent_size:2}),class:"h-full",options:n,onChange:s=>console.log(s,"value"),onReady:i},null)}}),_r=J({name:"CopyPageCodeWidget",setup(){const{getTsxCode:e}=Ia(),a=()=>{Ht(tt.html_beautify(e(),{indent_size:2})),_t.success("TSX代码复制成功")};return()=>T(L("el-tooltip"),{effect:"light",content:"TSX代码复制",placement:"top",showAfter:500},{default:()=>[T(L("el-button"),{onClick:a},{default:()=>[T(L("el-icon"),{size:"16"},{default:()=>[T(L("i-copy-document"),null,null)]})]})]})}}),mr=ws,gr=vs,vr=dr,br=pr,yr=$s,wr=Bs,Cr=bs,Tr=hr,kr=fr,Sr=_r,Dr=J({name:"Copy",setup(){const{activeWidget:e,copyWidget:a}=ae(),n=i=>{i.preventDefault(),i.stopPropagation(),a(e.value)};return()=>T(L("el-button"),{type:"primary",size:"small",class:"aux-button mr-1",onClick:n},{default:()=>[T(L("el-icon"),null,{default:()=>[T(L("i-document-copy"),null,null)]})]})}}),Or=J({name:"Delete",setup(){const{activeWidget:e,deleteWidget:a,updateActiveWidget:n}=ae(),{updateWorkspaceComponentType:i}=ve(),s=()=>{a(e.value),e.value.name==="crud"&&i("form"),n({})};return()=>T(L("el-button"),{type:"primary",size:"small",class:"aux-button",onClick:s},{default:()=>[T(L("el-icon"),null,{default:()=>[T(L("i-delete"),null,null)]})]})}});function Wi(e,a){let n={};const i=(s,t)=>{s.forEach(o=>{o.id===t?n=o:o.children&&o.children.length&&i(o.children,t)})};return i(e,a),n}function Ti(e,a){const n=[],i=s=>{if(s.pid){const t=Wi(e,s.pid);n.push({id:s.id,title:s.title}),i(t)}else s.id&&n.push({id:s.id,title:s.title})};return i(a),n}const xr=J({name:"Selector",setup(){const{workspaceWidgetType:e}=ve(),{activeWidget:a,widgets:n,updateActiveWidget:i}=ae(),{isOutside:s,changeBtnStatus:t}=sl("selector-btn"),o=j(()=>{const{parentData:h}=yi(a.value.id,n.value);return h?[...Ti(n.value,a.value),h]:Ti(n.value,a.value)}),l=j(()=>a.value.name==="tableCol"||a.value.name==="tableForm"?[{id:n.value[0].id,title:"增删改查",icon:n.value[0].icon}]:[]),r=h=>{t(!0);const v=Wi(n.value,h.id);i(v)},u=()=>{t(!0),i({})},f=()=>qt(T(L("el-button"),{type:"primary",size:"small",class:"aux-button w-full",onClick:()=>r(a.value)},{default:()=>[T(L("el-icon"),null,{default:()=>[T("i",{class:[a.value.icon,"iconfont"]},null)]}),T("span",null,[a.value.title])]}),[[Kt,a.value.id]]),d=(h,v)=>T(dt,null,[v&&T(L("el-button"),{type:"primary",size:"small",class:h,onClick:u},{default:()=>[T(L("el-icon"),null,{default:()=>[T("i",{class:["icon-biaodan","iconfont"]},null)]}),T("span",null,[e.value==="form"?"表单":"页面"])]})]);return()=>T("div",{class:"relative mr-1",id:"selector-btn"},[f(),!s.value&&T("div",{style:{position:"absolute",top:"100%",left:0},class:"selector-menu"},[e.value==="form"?o.value.slice(1,o.value.length).map(h=>T(L("el-button"),{type:"primary",size:"small",class:["aux-button","mt-1"],onClick:()=>r(h)},{default:()=>[T(L("el-icon"),null,{default:()=>[T("i",{class:[h.icon,"iconfont"]},null)]}),T("span",null,[h.title])]})):l.value.map(h=>T(L("el-button"),{type:"primary",size:"small",class:["aux-button","mt-1"],onClick:()=>r(h)},{default:()=>[T(L("el-icon"),null,{default:()=>[T("i",{class:[h.icon,"iconfont"]},null)]}),T("span",null,[h.title])]})),d(o.value.length?"aux-button selector-menu mt-1":"aux-button selector-menu",!!a.value.id&&e.value==="form")]),d("aux-button",!a.value.id)])}}),Er=J({name:"Helpers",props:{position:{type:String,default:"top"}},setup(e){const{activeWidget:a}=ae(),n=j(()=>{const i={};return e.position==="bottom"?i.top="100%":e.position==="inner-top"?(i.top="0",i.right="1px"):i.bottom="100%",{position:"absolute",right:0,margin:"4px 0",zIndex:10,userSelect:"none",pointerEvents:"all",...i}});return()=>T("div",{style:G(n),class:"flex"},[T(xr,null,null),a.value.allowCopy&&T(Dr,null,null),a.value.allowDelete&&T(Or,null,null)])}}),Pr=J({name:"Selection",setup(){const{activeWidget:e,widgets:a}=ae(),{formConfig:n}=Ue(),i=Q({}),s=setInterval(()=>{l()},50),t=j(()=>{var d,h;const u=document.getElementById("view-port"),f=u==null?void 0:u.getBoundingClientRect();return{position:"absolute",top:0,left:0,transform:`perspective(1px) translate3d(
          ${i.value.left-(f?f.left:0)}px,
          ${i.value.top-(f?f.top:0)}px,
          0)`,width:`${(d=i.value)==null?void 0:d.width}px`,height:`${(h=i.value)==null?void 0:h.height}px`,border:"2px solid #409eff",pointerEvents:"none",boxSizing:"border-box",visibility:"visible",transition:"all 0.2s",zIndex:2}}),o=j(()=>{let u=-1;return a.value.forEach((f,d)=>{var h,v;if(e.value.id===f.id)u=d;else{const b=(v=(h=f.schema)==null?void 0:h.fieldProps)==null?void 0:v.columns;b!=null&&b.length&&b.forEach((g,m)=>{e.value.id===g.id&&(u=m)})}}),n.value.column>1&&e.value.id||u===0||e.value.pid||e.value.name==="tableForm"?"bottom":u===-1?"inner-top":"top"});Ie(()=>{var f,d;Ge.on("selection-change",l);let u=document.getElementById(((f=e.value)==null?void 0:f.id)||"");e.value.id||(u=document.getElementById("view-port")),u&&(i.value=u==null?void 0:u.getBoundingClientRect(),(d=document.getElementById("view-port"))==null||d.addEventListener("scroll",l),window.addEventListener("resize",l))});async function l(){var f,d;await ut(),await ut(),await r(50);let u=document.getElementById(`schema-field${(f=e.value)==null?void 0:f.id}`);if(e.value.id||(u=document.getElementById("view-port")),e.value.name==="tableCol"){const v=a.value[0].schema.data.length,b=document.getElementsByClassName(`schema-field${(d=e.value)==null?void 0:d.id}`)[v-1],g=document.getElementsByClassName("crudHeader")[0];if(b&&g){const m=b.getBoundingClientRect(),p=g.getBoundingClientRect();i.value={width:m.width,height:m.height*v+p.height,x:m.x,y:m.y,left:m.left,top:p.top,right:m.right,bottom:m.bottom,toJSON:()=>{}}}}u&&(i.value=u==null?void 0:u.getBoundingClientRect())}function r(u){return new Promise(f=>{setTimeout(f,u)})}return et(()=>{var u;(u=document.getElementById("view-port"))==null||u.removeEventListener("scroll",l),window.removeEventListener("resize",l),Ge.off("selection-change"),clearInterval(s)}),()=>T("div",{style:G(t)},[T(Er,{position:o.value},null)])}}),Ir=J({name:"Clear",setup(){const{updateBoardWH:e,boardHeight:a,boardWidth:n,originBoardHeight:i,originBoardWidth:s}=ae();return()=>T("div",{class:"board-wh"},[T(L("el-input"),{modelValue:n.value,onInput:t=>e(Number(t),a.value)},null),T("span",{class:"board-wh-md"},[Ye("x")]),T(L("el-input"),{class:"mr-2",modelValue:a.value,onInput:t=>e(n.value,Number(t))},null),Number(a.value)!==Number(i.value)||Number(n.value)!==Number(s.value)?T(L("el-tooltip"),{effect:"light",content:"重置",placement:"top",showAfter:500},{default:()=>[T(L("el-button"),{onClick:()=>Ge.emit("board-drag-reset")},{default:()=>[T(L("el-icon"),null,{default:()=>[T(L("i-refresh-right"),null,null)]})]})]}):null])}}),Fr=J({name:"Clear",setup(){const{updateWorkspaceComponentType:e}=ve(),{updateActiveWidget:a,clearWorkspaceComponentList:n}=ae(),i=()=>{Ht(""),n(),e("form"),a({})};return()=>T(L("el-tooltip"),{effect:"light",content:"清空",placement:"top",showAfter:500},{default:()=>[T(L("el-button"),{onClick:i},{default:()=>[T(L("el-icon"),{size:"20"},{default:()=>[T("i",{class:["icon-shanchu","iconfont"]},null)]})]})]})}}),Ar=J({name:"Commands",props:{value:{type:String,default:"undo"}},setup(){const{viewType:e}=ae();return()=>T(L("el-button-group"),{size:"small",type:"default"},{default:()=>[T(L("el-button"),{onClick:()=>{ji.undo()},disabled:It.value.length===0||Nt.value===0||e.value!=="design"},{default:()=>[T(L("el-tooltip"),{effect:"light",content:"后退（Command + X）",placement:"top",showAfter:500},{default:()=>[T(L("el-icon"),{size:"20"},{default:()=>[T("i",{class:["icon-zhixiang-houtui","iconfont"]},null)]})]})]}),T(L("el-button"),{onClick:()=>{ji.redo()},disabled:It.value.length===0||Nt.value===It.value.length-1||e.value!=="design"},{default:()=>[T(L("el-tooltip"),{effect:"light",content:"前进（Command + Y）",placement:"top",showAfter:500},{default:()=>[T(L("el-icon"),{size:"20"},{default:()=>[T("i",{class:["icon-zhixiang-qianjin","iconfont"]},null)]})]})]})]})}}),Rr=J({name:"ScreenPixel",props:{value:{type:String,default:"pc"}},emits:["clickPixel"],setup(e,{emit:a}){return()=>T(L("el-button-group"),{size:"small",type:"default"},{default:()=>[T(L("el-button"),{disabled:e.value==="pc",onClick:()=>a("clickPixel","pc")},{default:()=>[T(L("el-tooltip"),{effect:"light",content:"客户端",placement:"top",showAfter:500},{default:()=>[T(L("el-icon"),null,{default:()=>[T("i",{class:["icon-bijibendiannao","iconfont"]},null)]})]})]}),T(L("el-button"),{disabled:e.value==="mobile",onClick:()=>a("clickPixel","mobile")},{default:()=>[T(L("el-tooltip"),{effect:"light",content:"移动端",placement:"top",showAfter:500},{default:()=>[T(L("el-icon"),null,{default:()=>[T("i",{class:["icon-android","iconfont"]},null)]})]})]}),T(L("el-button"),{disabled:e.value==="pad",onClick:()=>a("clickPixel","pad")},{default:()=>[T(L("el-tooltip"),{effect:"light",content:"平板端",placement:"top",showAfter:500},{default:()=>[T(L("el-icon"),null,{default:()=>[T("i",{class:["icon-shebei-PC","iconfont"]},null)]})]})]})]})}});function Nr(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ht(e)}const Mr=[{icon:"icon-huaban",type:"design",tooltip:"画板"},{icon:"icon-var",type:"json",tooltip:"JSON预览"},{icon:"icon-JSX",type:"tsx",tooltip:"TSX代码预览"},{icon:"icon-html",type:"page",tooltip:"Template代码预览"},{icon:"icon-shipin",type:"play",tooltip:"效果预览"}],Wr=J({name:"View",props:{value:{type:String,default:"design"}},emits:["clickView"],setup(e,{emit:a}){return()=>{let n;return T(L("el-button-group"),{size:"small",type:"default"},Nr(n=Mr.map(i=>T(L("el-button"),{disabled:e.value===i.type,onClick:()=>a("clickView",i.type)},{default:()=>[T(L("el-tooltip"),{effect:"light",content:i.tooltip,placement:"top",showAfter:500},{default:()=>[T(L("el-icon"),null,{default:()=>[T("i",{class:[i.icon,"iconfont"]},null)]})]})]})))?n:{default:()=>[n]})}}}),Lr=J({name:"DesignToolsWidget",props:{pixelType:{type:String},viewType:{type:String}},emits:["clickPixel","clickView"],setup(e,{emit:a}){return()=>T("div",{class:"design-tools"},[T("div",{class:"flex justify-between"},[T(Ar,{class:"mr-2"},null),T(Rr,{class:"mr-5",value:e.pixelType,onClickPixel:n=>a("clickPixel",n)},null),e.pixelType==="pad"&&T(Ir,null,null)]),T("div",{class:"flex"},[T(Wr,{value:e.viewType,class:"mr-2",onClickView:n=>a("clickView",n)},null),T("div",{class:"design-tools-end"},[T(yr,null,null),T(Sr,null,null),T(wr,null,null),T(Fr,null,null)])])])}}),zr=J({name:"MobileSimulatorWidget",setup(){const e=jt();return()=>T("div",{class:"board"},[T("div",{class:"mobile-simulator"},[T("div",{class:"mobile-simulator-content"},[T("div",{class:"mobile-simulator-body"},[T("div",{class:"mobile-simulator-body-wrapper"},[T("img",{src:"https://img.alicdn.com/imgextra/i4/O1CN01ehfzMc1QPqY6HONTJ_!!6000000001969-55-tps-459-945.svg"},null),T("div",{class:"mobile-simulator-body-content"},[e.default&&e.default()])])])])])])}}),Br=J({name:"PadSimulatorWidget",setup(){const{updateBoardWH:e,boardHeight:a,boardWidth:n,originBoardHeight:i,originBoardWidth:s,updateOriginBoardWH:t}=ae(),{compositeArrowDirection:o,settingArrowDirection:l}=ve(),r=jt(),u=Q(0),f=Q(0),d=Q(!0),h=Q(),v=Q(new Date().valueOf());Ie(()=>{Ge.on("board-drag-reset",()=>{e(s.value,i.value),v.value=new Date().valueOf()})}),et(()=>{Ge.off("board-drag-reset")}),Re(()=>[a.value,n.value],async()=>{await ut(),u.value=n.value,f.value=a.value}),Re(()=>[o.value,l.value],async()=>{await m(300),await ut(),n.value===s.value&&a.value===i.value&&g()}),Ie(()=>{g(),d.value=!1});const b=(p,y,R,I)=>{e(R,I)};async function g(){const y=document.getElementsByClassName("board")[0].getBoundingClientRect();u.value=y.width,f.value=y.height,e(u.value,f.value),t(u.value,f.value)}function m(p){return new Promise(y=>{setTimeout(y,p)})}return()=>T("div",{class:"board"},[!d.value&&T(L("vue-drag-resize-rotate"),{ref:h,isActive:!0,class:"pad-simulator",draggable:!0,rotatable:!1,key:v.value,w:u.value,h:f.value,enableNativeDrag:!0,onResizestop:b},{default:()=>[r.default&&r.default()]})])}}),$r=J({name:"PcSimulatorWidget",setup(){const e=jt();return()=>T("div",{class:"board"},[T("div",{class:"pc-simulator"},[e.default&&e.default()])])}}),Vr=J({name:"ViewWidget",components:{JSONWidget:kr,PlayWidget:vr,PageWidget:br,TsxWidget:Tr},props:{viewType:{type:String,default:"design"}},setup(e){const a=i=>i==="json"?"JSONWidget":i==="play"?"PlayWidget":i==="tsx"?"TsxWidget":"PageWidget",n=j(()=>{const{formConfig:i}=he("preview");return i.type==="array"&&e.viewType==="play"});return()=>T("div",{class:"view-widget",style:{padding:n.value?"20px":""}},[Rt(L(a(e.viewType)))])}}),Ur=J({name:"WorkspacePanel",setup(){const{compositeArrowDirection:e,settingArrowDirection:a}=ve(),{clickAsideToggleWidget:n}=Mt("right","300px",300),{clickAsideToggleWidget:i}=Mt("left","300px",300),{viewType:s,updateViewType:t,simulatorType:o,updateSimulatorType:l}=ae();function r(f){t(f);const d=f==="design"?"left":"right",h=f==="design"?"right":"left";e.value!==d&&i(),a.value!==h&&n()}const u=j(()=>{switch(o.value){case"pc":return $r;case"mobile":return zr;case"pad":return Br}});return()=>T("div",{class:"workspace-panel"},[T(Lr,{"pixel-type":o.value,"view-type":s.value,onClickPixel:f=>l(f),onClickView:r},null),T(u.value,null,{default:()=>[s.value==="design"&&T(Pr,null,null),s.value==="design"&&T(Cr,null,null),s.value!=="design"&&T(Vr,{"view-type":s.value},null)]})])}}),Na=J({name:"Drawer",props:{title:{type:String,default:""}},setup(e){const a=jt();return()=>T("div",{class:"drawer"},[T("div",{class:"drawer__header"},[T("div",{class:"drawer__header--title"},[e.title]),T("div",{class:"drawer__header--action"},[a.action&&a.action()])]),T("div",{class:"drawer__body"},[a.default&&a.default()])])}}),Kr=J({name:"Header",setup(){const e=()=>{window.open("")},a=()=>{window.open("https://naivesteven.github.io/ideaz-element/")};return()=>T("div",{class:"header"},[T("div",{class:"logo"},null),T("div",{class:"header--actions"},[T(L("el-button"),{size:"default",class:"mr-4",onClick:a},{default:()=>[T("span",{class:"text"},[Ye("Ideaz Element")])]}),T(L("el-button"),{size:"default",onClick:e},{default:()=>[T(L("el-icon"),{size:"14"},{default:()=>[T("i",{class:["icon-github","iconfont"]},null)]}),T("span",{class:"text"},[Ye("Github")])]})])])}}),Ma=J({name:"AsideToggleWidget",props:{arrowDirection:{type:String,default:"right"},left:{type:String,default:""},right:{type:String,default:""}},emits:["click"],setup(e,{emit:a}){const n=j(()=>{const i={};return e.left&&(i.left=e.left),e.right&&(i.right=e.right),i});return()=>T("div",{class:"aside-toggle",style:n.value,onClick:()=>a("click")},[T(L("el-icon"),null,{default:()=>[e.arrowDirection==="left"&&T("i",{class:["icon-zhixiang-zhishiqizuo","iconfont"]},null),e.arrowDirection==="right"&&T("i",{class:["icon-zhixiang-zhishiqiyou","iconfont"]},null)]})])}}),qr=J({name:"ComponentTreeWidget",setup(){const{workspaceWidgetType:e}=ve(),{widgets:a,activeWidget:n,updateActiveWidget:i}=ae(),s=Q(),t=j(()=>{var f;if(e.value==="form")return[{title:"表单",id:"form",children:a.value}];const r=[],u=[];return(f=a.value[0].schema.columns)==null||f.forEach(d=>{d.search&&r.push({...d.search,title:d.search.label||d.search.slot}),u.push({...d,title:d.label||d.slot})}),[{title:"增删改查",id:a.value[0].id,children:[{title:"筛选表单",children:r},{title:"表格项",children:u}]}]});Ie(async()=>{s.value&&s.value.setCurrentKey(n.value.id||"form")});const o=r=>{if(r.id===a.value[0].id){i(a.value[0]);return}if(!(r.title==="筛选表单"||r.title==="表格项")){if(r.id==="form"){i({});return}i(r)}},l=({data:r})=>T("div",{class:"h-full w-full flex items-center text-xs",onClick:()=>o(r)},[r.title]);return()=>T(L("el-tree"),{ref:s,nodeKey:"id",data:t.value,defaultExpandAll:!0,expandOnClickNode:!1,highlightCurrent:!0},{default:l})}}),jr=J({name:"HistoryWidget",setup(){const{viewType:e,updateActiveWidget:a}=ae(),n=(i,s)=>{if(e.value!=="design"){il({type:"warning",message:"请在画布处执行该操作"});return}Nt.value=i,s.redo(),a({})};return()=>T("div",{class:"history"},[It.value.map((i,s)=>{var t;return T("div",{class:["history__item",s===Nt.value&&"history__item--active"],onClick:()=>n(s,i)},[T("div",{class:"history__item--title"},[i.message]),T("div",{class:"history__item--timestamp"},[al((t=i.time)==null?void 0:t.valueOf(),"ymd hms")])])})])}}),Hr=J({name:"CompositePanelTabContent",components:{ComponentWidget:mr,ComponentTreeWidget:qr,historyWidget:jr},props:{currentTabPane:{type:String,default:"component"},currentTabPaneInfo:{type:Object,default:()=>({})}},setup(e){const{activeWidget:a}=ae(),n=Q("key"),i=j(()=>e.currentTabPane==="component"?"ComponentWidget":e.currentTabPane==="history"?"historyWidget":"ComponentTreeWidget");return Re(()=>a.value,async(s,t)=>{s.id!==t.id&&(await nl(0),n.value=String(new Date().valueOf()))}),()=>T(Na,{title:e.currentTabPaneInfo.title},{default:()=>[i.value==="ComponentTreeWidget"?Rt(L(i.value),{key:n.value}):Rt(L(i.value))]})}}),Jr=[{title:"组件",icon:"icon-shezhi",key:"component"},{title:"目录",icon:"icon-fuhao-tuceng",key:"menu"},{title:"操作记录",icon:"icon-shijianzhou",key:"history"}],Gr=J({name:"CompositePanelTabs",props:{modelValue:{type:String,default:"component"},currentTabPaneInfo:{type:Object,default:()=>({})}},emits:["update:modelValue","update:currentTabPaneInfo"],setup(e,{emit:a}){const n=i=>{a("update:modelValue",i.key),a("update:currentTabPaneInfo",i)};return()=>T("div",{class:"composite-panel-tabs"},[Jr.map(i=>T(L("el-tooltip"),{placement:"right",content:i.title,showAfter:500,effect:"dark"},{default:()=>[T("div",{class:["composite-panel-tabs-pane",e.modelValue===i.key&&"composite-panel-tabs-pane--active"],onClick:()=>n(i)},[T(L("el-icon"),{size:"20"},{default:()=>[T("i",{class:[i.icon,"iconfont"]},null)]})])]}))])}}),Xr=J({name:"CompositePanel",setup(){const{compositeArrowDirection:e,clickAsideToggleWidget:a}=Mt("left","300px",300),n=Q("component"),i=Q({key:"component",title:"组件",icon:"i-setting"});return()=>T("div",{class:"composite-panel"},[T(Gr,{modelValue:n.value,"onUpdate:modelValue":s=>n.value=s,currentTabPaneInfo:i.value,"onUpdate:currentTabPaneInfo":s=>i.value=s},null),T("div",{ref:"content",class:"composite-panel-tabs-content"},[T(Ma,{right:"-11px","arrow-direction":e.value,onClick:()=>a()},null),T(Hr,{currentTabPane:n.value,currentTabPaneInfo:i.value},null)])])}}),Yr=J({name:"DesignToolsWidget",setup(){const{workspaceWidgetType:e}=ve(),{activeWidget:a,widgets:n,updateActiveWidget:i}=ae(),s=j(()=>Ti(n.value,a.value)),t=j(()=>{var d;const u=[{title:"页面",id:""}],f=[{title:"增删改查",id:(d=n==null?void 0:n.value[0])==null?void 0:d.id}];return a.value.name==="crud"?f:a.value.name==="tableCol"?f.concat([{title:"表格项",id:a.value.id}]):a.value.name==="tableForm"?f.concat([{title:"表单项",id:a.value.id}]):u}),o=j(()=>{const u=[{title:"表单"}];return e.value==="form"?a.value.id?u.concat(me(s.value).reverse()):u:t.value}),l=u=>{if(u.title==="表单")i({});else{const f=Wi(n.value,u.id);i(f)}},r=(u,f)=>T(dt,null,[T("span",{class:f===o.value.length-1?["dark","cursor-pointer"]:["light","cursor-pointer"],onClick:()=>l(u)},[u.title]),qt(T("span",{class:"light mx-1"},[Ye("/")]),[[Kt,f!==o.value.length-1]])]);return()=>T("div",{class:"breadcrumb"},[T("div",{class:"flex items-center"},[T(L("el-icon"),{class:o.value.length===1?["icon-class","dark"]:["icon-class","light"]},{default:()=>[T(L("i-location-filled"),null,null)]}),o.value.map((u,f)=>r(u,f))])])}}),Qr=J({name:"Settings",setup(){const{settingArrowDirection:e,clickAsideToggleWidget:a}=Mt("right","300px",300);return()=>T("div",{id:"settings-panel",ref:"content",class:"settings-panel"},[T(Ma,{left:e.value==="right"?"-11px":"-22px","arrow-direction":e.value,onClick:()=>a()},null),T("div",{class:"panel"},[T("div",null,null),T(Na,{title:"属性配置"},{default:()=>[T("div",{class:"wrapper"},[T(Yr,null,null),T(gr,null,null)])]})])])}}),eu=J({name:"Editor",setup(){const{startDriver:e}=ol(),{updateWidgets:a,addHistory:n}=ae();return Ie(()=>{n(()=>{a([],"",!1)},{message:"缺省态",time:new Date}),setTimeout(()=>{e()},201)}),()=>T("div",{class:"root"},[T(Kr,null,null),T("div",{class:"main-panel"},[T(Xr,null,null),T(Ur,null,null),T(Qr,null,null)])])}});export{eu as default};
